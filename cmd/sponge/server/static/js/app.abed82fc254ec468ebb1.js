webpackJsonp([1],{"+m+9":function(e,t){},"3CNT":function(e,t){},"7O3S":function(e,t){},"9fbn":function(e,t){},AWpY:function(e,t){},AaHZ:function(e,t){},"B+Oq":function(e,t){},BXTp:function(e,t){},Blme:function(e,t){},C642:function(e,t){},EX0q:function(e,t){},Gdd2:function(e,t){},Gmoc:function(e,t){},H8MM:function(e,t){},IH7g:function(e,t){},IWyD:function(e,t){},LZ0h:function(e,t){},MenH:function(e,t){},NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("7+uW"),i={name:"App",data:function(){return{isCollapse:!1,collapseSize:"320px",toggle:!1,block:!0,collapsebgcolor:"",dialogTableVisible:!1,logoImageSrc:o("hIB5"),logoImagePosition:"18%",wechatImageSrc:o("ebUW"),currentMenu:"/ui",languageOptions:[{value:"🇺🇸 English",label:"🇺🇸 English"},{value:"🇨🇳 中文",label:"🇨🇳 中文"}],languageValue:"🇨🇳 中文",homeRoute:"/ui",webHttpRoute:"/ui/web-http",webHandlerRoute:"/ui/web-handler",webCacheRoute:"/ui/web-cache",webDaoRoute:"/ui/web-dao",webModelRoute:"/ui/web-model",microRPCRoute:"/ui/micro-rpc",microServiceRoute:"/ui/micro-service",microServiceHandlerRoute:"/ui/micro-service-handler",microRPCConnRoute:"/ui/micro-rpc-conn",microRPCPbRoute:"/ui/micro-rpc-pb",microGRPCHTTPRoute:"/ui/micro-grpc-http",microGRPCHTTPPbRoute:"/ui/micro-grpc-http-pb",microRPCGwPbRoute:"/ui/micro-rpc-gw-pb",microProtobufRoute:"/ui/micro-protobuf",webHTTPPbRoute:"/ui/web-http-pb",yamlConfigRoute:"/ui/yaml-config",customTplFieldRoute:"/ui/custom-tpl-field",customTplSqlRoute:"/ui/custom-tpl-sql",customTplProtobufRoute:"/ui/custom-tpl-protobuf",assistantGenerate:"/ui/assistant-generate",assistantMerge:"/ui/assistant-merge",downloadCodeRoute:"/ui/download"}},watch:{$route:function(e){this.currentMenu=e.path}},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},created:function(){"en"==localStorage.getItem("localeLanguage")?(this.$i18n.locale="en",this.languageValue="🇺🇸 English"):(this.$i18n.locale="cn",this.languageValue="🇨🇳 中文"),this.adaptedRouteByLanguage(),this.currentMenu=this.$route.path,"en"==this.$i18n.locale&&"/ui"==this.currentMenu&&this.$router.push(this.homeRoute),window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(e){this.fullWidth=document.documentElement.clientWidth},handleSelect:function(e,t){},handleOpen:function(e,t){},handleClose:function(e,t){},clickHandle:function(e){},collapseStatus:function(){this.toggle=!this.toggle,this.block=!this.block,this.isCollapse=!this.isCollapse,this.isCollapse?(this.collapseSize="0px",this.logoImagePosition="0%"):(this.collapseSize="320px",this.logoImagePosition="18%")},changebgcolor:function(){this.collapsebgcolor="#66B1FF"},clearcolor:function(){this.collapsebgcolor=""},changeLanguage:function(e){this.languageValue=e,"🇨🇳 中文"===e?(this.$i18n.locale="cn",localStorage.setItem("localeLanguage","cn")):(this.$i18n.locale="en",localStorage.setItem("localeLanguage","en")),this.adaptedRouteByLanguage(),this.$router.push(this.homeRoute),window.location.reload()},adaptedRouteByLanguage:function(){var e="";"en"==this.$i18n.locale&&(e="/en"),this.homeRoute=e+this.homeRoute.replace("/en",""),this.webHttpRoute=e+this.webHttpRoute.replace("/en",""),this.webHandlerRoute=e+this.webHandlerRoute.replace("/en",""),this.webCacheRoute=e+this.webCacheRoute.replace("/en",""),this.webDaoRoute=e+this.webDaoRoute.replace("/en",""),this.webModelRoute=e+this.webModelRoute.replace("/en",""),this.microRPCRoute=e+this.microRPCRoute.replace("/en",""),this.microRPCConnRoute=e+this.microRPCConnRoute.replace("/en",""),this.microRPCPbRoute=e+this.microRPCPbRoute.replace("/en",""),this.microGRPCHTTPRoute=e+this.microGRPCHTTPRoute.replace("/en",""),this.microGRPCHTTPPbRoute=e+this.microGRPCHTTPPbRoute.replace("/en",""),this.microRPCGwPbRoute=e+this.microRPCGwPbRoute.replace("/en",""),this.microServiceRoute=e+this.microServiceRoute.replace("/en",""),this.microServiceHandlerRoute=e+this.microServiceHandlerRoute.replace("/en",""),this.microProtobufRoute=e+this.microProtobufRoute.replace("/en",""),this.webHTTPPbRoute=e+this.webHTTPPbRoute.replace("/en",""),this.yamlConfigRoute=e+this.yamlConfigRoute.replace("/en",""),this.customTplFieldRoute=e+this.customTplFieldRoute.replace("/en",""),this.customTplSqlRoute=e+this.customTplSqlRoute.replace("/en",""),this.customTplProtobufRoute=e+this.customTplProtobufRoute.replace("/en",""),this.assistantGenerate=e+this.assistantGenerate.replace("/en",""),this.assistantMerge=e+this.assistantMerge.replace("/en",""),this.downloadCodeRoute=e+this.downloadCodeRoute.replace("/en","")},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0,this.logoImagePosition="0%"):(this.spanSize=16,this.offsetSize=4,this.logoImagePosition="18%")}}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("div",[o("el-container",[o("el-header",{staticStyle:{height:"100px","border-bottom":"2px solid #eee"}},[o("div",{staticClass:"header-image",style:{"padding-left":e.logoImagePosition}},[o("el-image",{staticStyle:{height:"50px"},attrs:{src:e.logoImageSrc}})],1),e._v(" "),o("div",{staticClass:"menuControl",style:{"background-color":e.collapsebgcolor},on:{mouseenter:e.changebgcolor,mouseleave:e.clearcolor,click:e.collapseStatus}},[o("div",{staticStyle:{"text-align":"center","padding-top":"5px"}},[o("i",{directives:[{name:"show",rawName:"v-show",value:e.block,expression:"block"}],staticClass:"el-icon-s-fold"}),e._v(" "),o("i",{directives:[{name:"show",rawName:"v-show",value:e.toggle,expression:"toggle"}],staticClass:"el-icon-s-unfold"})])]),e._v(" "),o("div",{staticStyle:{float:"right","margin-top":"-20px"}},[o("el-select",{staticClass:"languageClass",on:{change:e.changeLanguage},model:{value:e.languageValue,callback:function(t){e.languageValue=t},expression:"languageValue"}},e._l(e.languageOptions,function(e){return o("el-option",{key:e.value,staticStyle:{"font-size":"medium"},attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),o("el-container",[o("el-aside",{staticClass:"aside-menu",attrs:{width:e.collapseSize}},[o("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:"","default-active":"$router.currentRoute.path","default-active":e.currentMenu,collapse:e.isCollapse},on:{select:e.handleSelect,open:e.handleOpen,close:e.handleClose}},[o("el-menu-item",{attrs:{index:e.homeRoute}},[o("i",{staticClass:"el-icon-s-home"}),e._v(" "),o("span",{staticClass:"home-class",attrs:{slot:"title"},slot:"title"},[e._v("Home")])]),e._v(" "),o("el-submenu",{attrs:{index:"1"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-coin"}),e._v(" "),o("span",{staticClass:"el-menu-span1",attrs:{slot:"title"},slot:"title"},[e._v("SQL")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webHttpRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.webHttp"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microRPCRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microRpc"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microGRPCHTTPRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microGRPCHTTP"))+"\n                ")])])],2),e._v(" "),o("el-submenu",{attrs:{index:"2"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-tickets"}),e._v(" "),o("span",{staticClass:"el-menu-span1",attrs:{slot:"title"},slot:"title"},[e._v("Protobuf")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webHTTPPbRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.webHttpPb"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microRPCPbRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microrpcPb"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microGRPCHTTPPbRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microGRPCHTTPPb"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microRPCGwPbRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microRpcGwPb"))+"\n                ")])])],2),e._v(" "),o("el-submenu",{attrs:{index:"3"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-suitcase"}),e._v(" "),o("span",{staticClass:"el-menu-span1",attrs:{slot:"title"},slot:"title"},[e._v("Public")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webHandlerRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.wehHandler"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microServiceRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microService"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microServiceHandlerRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microServiceHandler"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webDaoRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.webDao"))+" ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microProtobufRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microProtobuf"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webModelRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.webModel"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.yamlConfigRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.yamlConfig"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microRPCConnRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microRpcConn"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webCacheRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.webCache"))+"\n                ")])])],2),e._v(" "),o("el-submenu",{attrs:{index:"4"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-edit-outline"}),e._v(" "),o("span",{staticClass:"el-menu-span1",attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.$t("navMenu.customType")))])]),e._v(" "),o("el-menu-item",{attrs:{index:e.customTplFieldRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.customTplField"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.customTplSqlRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.customTplSql"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.customTplProtobufRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.customTplProtobuf"))+"\n                ")])])],2),e._v(" "),o("el-submenu",{attrs:{index:"5"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-document"}),e._v(" "),o("span",{staticClass:"el-menu-span1",attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.$t("navMenu.assistant")))])]),e._v(" "),o("el-menu-item",{attrs:{index:e.assistantGenerate}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.assistantGenerate"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.assistantMerge}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.assistantMerge"))+"\n                ")])])],2)],1)],1),e._v(" "),o("el-container",[o("el-main",[o("router-view")],1),e._v(" "),o("el-footer",[o("div",{staticStyle:{"text-align":"center",position:"relative"}},[o("p",{staticStyle:{"font-style":"italic","font-size":"medium",color:"#666"}},[e._v("\n                "+e._s(e.$t("footer.text1"))+"\n                "),o("a",{attrs:{href:"https://github.com/go-dev-frame/sponge",target:"_blank"}},[e._v("\n                  star⭐")]),e._v("\n                "+e._s(e.$t("footer.text2"))+"\n                "),o("el-button",{staticStyle:{"font-size":"medium"},attrs:{type:"text"},on:{click:function(t){e.dialogTableVisible=!0}}},[e._v(e._s(e.$t("footer.text3")))])],1),e._v(" "),o("el-dialog",{attrs:{title:"加微信进群(标注sponge)",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[o("el-image",{staticStyle:{height:"320px"},attrs:{src:e.wechatImageSrc}})],1)],1)])],1)],1)],1)],1)])},staticRenderFns:[]};var a=o("VU/8")(i,l,!1,function(e){o("Blme")},"data-v-288dfbfc",null).exports,s=o("/ocq"),n={name:"Home",data:function(){return{homeImageSrc:o("X4KW"),homeTplImageSrc:o("SOJA"),homeAssistantImageSrc:o("XkHf")}}},d={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:18,offset:3}},[o("p",{staticStyle:{"margin-bottom":"30px","line-height":"150%"}},[e._v('\n      sponge 是一个强大且易用的 Go 开发框架，其核心理念是定义即代码(Definition is Code)，通过解析 SQL、Protobuf、JSON 文件生成模块化的 Go 代码，这些模块代码可灵活组合成多种类型的完整后端服务。sponge 提供一站式项目开发解决方案，涵盖代码生成、开发、测试、API 文档和部署等，以"低代码"方式轻松构建稳定可靠的高性能后端服务。\n    ')]),e._v(" "),o("p",[e._v("\n      github 地址："),o("a",{attrs:{href:"https://github.com/go-dev-frame/sponge",target:"_blank"}},[e._v("https://github.com/go-dev-frame/sponge")])]),e._v(" "),o("p",[e._v("\n      开发文档："),o("a",{attrs:{href:"https://go-sponge.com/zh/",target:"_blank"}},[e._v("https://go-sponge.com/zh/")])]),e._v(" "),o("br"),e._v(" "),o("p",[o("b",[e._v("\n        sponge 代码生成引擎。\n      ")])]),e._v(" "),o("p",[o("b",[e._v("1.")]),e._v(" sponge 基于自带模板生成代码框架，如下图所示：")]),e._v(" "),o("div",{staticClass:"home-image"},[o("el-image",{attrs:{src:e.homeImageSrc}})],1),e._v(" "),o("br"),e._v(" "),o("p",[o("b",[e._v("2.")]),e._v(" sponge 基于自定义模板生成代码框架，如下图所示：")]),e._v(" "),o("div",{staticClass:"framework-image"},[o("el-image",{attrs:{src:e.homeTplImageSrc}})],1),e._v(" "),o("br"),e._v(" "),o("p",[o("b",[e._v("3.")]),e._v(" sponge 基于函数及注释生成业务逻辑代码框架，如下图所示：")]),e._v(" "),o("div",{staticClass:"framework-image"},[o("el-image",{attrs:{src:e.homeAssistantImageSrc}})],1),e._v(" "),o("br"),e._v(" "),o("p")])],1)},staticRenderFns:[]};var c=o("VU/8")(n,d,!1,function(e){o("cuTw")},null,null).exports,m=o("mtWM"),p={name:"DownloadCode",data:function(){return{downloadStatusDialogVisible:!1,dialogContent:""}},methods:{execution:function(e,t,o,r){var i=this,l={path:t,arg:o};this.$emit("update-is-downloading",!0),m.a.post(e,l,{responseType:"blob"}).then(function(e){var t=e.data,o=e.headers,l=o["content-disposition"],a=new Blob([t],{type:o["content-type"]}),s=window.URL.createObjectURL(a),n=document.createElement("a");n.href=s,n.download=decodeURI(l),n.style.display="none",document.body.appendChild(n),n.click(),n.parentNode.removeChild(n),window.URL.revokeObjectURL(s),i.dialogContent=r,i.downloadStatusDialogVisible=!0,i.$emit("update-is-downloading",!1)}).catch(function(e){var t=e.response.headers;""!=t["err-msg"]?i.$message.error(t["err-msg"]):i.$message.error(e.message),i.$emit("update-is-downloading",!1)})}}},u={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{staticClass:"helper-dialog",attrs:{title:"下载成功",visible:e.downloadStatusDialogVisible,width:"60%",center:""},on:{"update:visible":function(t){e.downloadStatusDialogVisible=t}}},[o("h3",{staticStyle:{"margin-left":"30px"}},[e._v("使用帮助：")]),e._v(" "),o("div",{staticStyle:{padding:"5px 30px","font-size":"16px"},domProps:{innerHTML:e._s(e.dialogContent)}})])],1)},staticRenderFns:[]};var v=o("VU/8")(p,u,!1,function(e){o("9fbn")},"data-v-3d35e9ca",null).exports,f=o("bOdI"),h=o.n(f),b={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{attrs:{title:"单体应用单仓库(monolith)或微服务多仓库(multi-repo)目录结构",top:"7vh",width:"60%",visible:e.isShowMutiDialog},on:{"update:visible":function(t){e.isShowMutiDialog=t}}},[o("pre",[e._v(e._s(e.mutiRepoText))])]),e._v(" "),o("el-dialog",{attrs:{title:"微服务单仓库(mono-repo)目录结构(也就是大仓库目录结构)",width:"66%",visible:e.isShowMonoDialog},on:{"update:visible":function(t){e.isShowMonoDialog=t}}},[o("pre",[e._v(e._s(e.monoRepoText))])])],1)},staticRenderFns:[]};var g=o("VU/8")({name:"ShowRepoDir",computed:{mutiRepoFormattedText:function(){return this.mutiRepoText.replace(/\n/g,"<br>")}},data:function(){return{isShowMutiDialog:!1,isShowMonoDialog:!1,mutiRepoText:" .\n├── api            # protobuf 文件和生成的*pb.go 目录\n├── assets         # 其他与资源库一起使用的资产(图片、logo 等)目录\n├── cmd            # 程序入口目录\n├── configs        # 配置文件的目录\n├── deployments    # 裸机、docker、k8s 部署脚本目录\n├── docs           # 设计文档和界面文档目录\n├── internal       # 项目内部代码目录\n│    ├── cache        # 基于业务包装的缓存目录\n│    ├── config       # Go 结构的配置文件目录\n│    ├── dao          # 数据访问目录\n│    ├── ecode        # 自定义业务错误代码目录\n│    ├── handler      # http 的业务功能实现目录\n│    ├── model        # 数据库模型目录\n│    ├── routers      # http 路由目录\n│    ├── rpcclient    # 连接 gRP 服务的客户端目录\n│    ├── server       # 服务入口，包括 http、gRPC 等\n│    ├── service      # gRPC 的业务功能实现目录\n│    └── types        # http 的请求和响应类型目录\n├── pkg            # 外部应用程序可以使用的库目录\n├── scripts        # 执行脚本目录\n├── test           # 额外的外部测试程序和测试数据\n├── third_party    # 依赖第三方 protobuf 文件或其他工具的目录\n├── Makefile       # 开发、测试、部署相关的命令集合\n├── go.mod         # go 模块依赖关系和版本控制文件\n└── go.sum         # go 模块依赖项的密钥和校验文件\n      ",monoRepoText:" .\n├── api\n│    ├── server1       # 服务1的 protobuf 文件和生成的*pb.go 目录\n│    ├── server2       # 服务2的 protobuf 文件和生成的*pb.go 目录\n│    ├── server3       # 服务3的 protobuf 文件和生成的*pb.go 目录\n│    └── ...\n├── server1        # 服务1的代码目录，与微服务多仓库(multi-repo)目录结构基本一样\n├── server2        # 服务2的代码目录，与微服务多仓库(multi-repo)目录结构基本一样\n├── server3        # 服务3的代码目录，与微服务多仓库(multi-repo)目录结构基本一样\n├── ...\n├── third_party    # 依赖的第三方 protobuf 文件\n├── go.mod         # go 模块依赖关系和版本控制文件\n└── go.sum         # go 模块依赖项的密钥和校验和文件\n\n"}}},b,!1,function(e){o("Pigd")},"data-v-6f357494",null).exports,_={name:"WebHTTP",data:function(){var e;return{title:"",path:"web-http",helpInfo:'\n      <p><b>基于 sql 创建 web 服务</b> 生成包括 CRUD API 的完整 web 服务后端代码，更多开发细节，请参考 <a href="https://go-sponge.com/zh/guide/web/based-on-sql.html" target="_blank">开发指南</a>。</p>\n      <br />\n      <p>1. 解压文件。</p>\n      <p>2. 打开终端，执行命令生成 swagger 文档:  <b style="color: green">make docs</b></p>\n      <p>3. 编译和运行服务:  <b style="color: green">make run</b></p>\n      <p>4. 在浏览器访问 <a href="http://localhost:8080/swagger/index.html" target="_blank">http://localhost:8080/swagger/index.html</a>，测试 CRUD API。</p>\n      <br />\n      <p>技术栈：<b>Go、Gin、{{.DBDriver}}、go-redis、Zap、Prometheus、OpenTracing</b> 等。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:(e={dsnAddr:"",dbDriver:"",tableName:[]},h()(e,"dbDriver",""),h()(e,"moduleName",""),h()(e,"serverName",""),h()(e,"projectName",""),h()(e,"repoAddr",""),h()(e,"embed",!1),h()(e,"suitedMonoRepo",!1),h()(e,"isExtendedApi",!1),e),rules:{dsnAddr:[{required:!0,message:"请输入数据源 dsn",trigger:"blur"}],tableName:[{required:!0,message:"请选择表名",trigger:"change"}],dbDriver:[{required:!0,message:"请选择数据库类型",trigger:"blur"}],moduleName:[{required:!0,message:"请输入 go module 名称",trigger:"blur"}],serverName:[{required:!0,message:"请输入服务名称",trigger:"blur"}],projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="web http --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi,l=t.helpInfo;l="mongodb"===t.ruleForm.dbDriver?l.replace("{{.DBDriver}}","Mongo"):l.replace("{{.DBDriver}}","Gorm"),t.$refs.downloadCode.execution(o,t.path,i,l)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("获取表名成功"):t.$message.error("获取表名失败，"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("获取表名失败，请检查"+t.ruleForm.dbDriver+" dsn 地址是否正确、或者"+t.ruleForm.dbDriver+"服务是否运行。")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},w={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#ff8040"},attrs:{href:"https://go-sponge.com/zh/guide/web/based-on-sql.html",target:"_blank"}},[e._v("基于 sql 创建 web 服务")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          —— 生成完整的 web 服务后端代码")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"数据库类型",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择数据库类型",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              选择数据库类型之后，生成的代码会自动匹配该数据库类型。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"数据库 dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果数据库是"),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v("、"),o("b",[e._v("postgresql")]),e._v("，填写\n              dsn 地址，"),o("br"),e._v("\n              dsn 格式："),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              注意：user 和 password 不能包含特殊字符 "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              mongodb 的 dsn 支持 SRV 记录，格式为："),o("br"),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              postgresql 的 dsn 支持指定 schema，在 dsn 后添加参数示例："),o("br"),e._v(" "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              如果数据库是"),o("b",[e._v("sqlite")]),e._v("，填写 sqlite db 文件本地绝对路径，"),o("br"),e._v("\n              示例："),o("b",[e._v("/tmp/test.db")]),e._v(" 或 "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("获取表名")])],1),e._v(" "),o("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择表名，支持多选",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("全选")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              以后如果需要添加新的 CRUD 代码，可以在菜单"),o("br"),o("b",[e._v("【Public】 -> 【生成 handler CRUD 代码】")]),o("br"),e._v("\n              中生成代码，然后移动到项目代码中。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-server 🡆 your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module 名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod 文件的 module 名称。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果名称包括大写字母，会转换为小写，并用中划线分隔，"),o("br"),e._v("\n              示例：yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker 镜像仓库"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              docker 镜像仓库地址，默认值是"),o("b",[e._v("image-repo-host")]),e._v("，这个参数"),o("br"),e._v("\n              用在构建 docker 镜像、k8s 的部署脚本上，如果使用 docker 官方"),o("br"),e._v("\n              镜像仓库，只需填写注册 docker 仓库的用户名。如果使用私有仓"),o("br"),e._v("\n              库地址，需要填写完整仓库地址。\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"嵌入 Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model 结构体字段对应表的 id、created_at、"),o("br"),e._v("\n              updated_at、deleted_at 这 4 个列名，支持软删除。"),o("br"),e._v("\n              如果表包含这些列名，请开启嵌入 Model，"),o("br"),e._v("\n              如果表不包含这些列名，请关闭嵌入 Model。\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API 扩展"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，生成5个常用的 CRUD API 代码。"),o("br"),e._v("\n              如果开启，在5个常用的 CRUD API 基础上，额外增加了4个API，"),o("br"),e._v("\n              分别是 DeleteByIDs, GetByCondition, ListByIDs, ListByLastID。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("或"),o("b",[e._v("微服务多"),o("br"),e._v("\n                仓库(multi-repo)")]),e._v("类型的服务代码，即使把多个服务代码放在一个"),o("br"),e._v("\n              git 仓库下，不同服务代码之间不可复用。"),o("br"),e._v("点击查看"),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("目录结构示例")]),e._v("。"),o("br"),o("br"),e._v("\n              如果开启，表示生成适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),e._v("类型的服务"),o("br"),e._v("\n              代码，多个服务代码放在一个 git 仓库下，不同服务之间的代码可以"),o("br"),e._v("\n              复用。如果后面在页面生成的模块代码移动到此服务，也需要开启"),o("br"),e._v("这个选项。"),o("br"),e._v("\n              点击查看"),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("目录结构示例")]),e._v("。\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1)])],1)},staticRenderFns:[]};var F=o("VU/8")(_,w,!1,function(e){o("Gdd2")},"data-v-4c5e172b",null).exports,y={name:"WebHandler",data:function(){return{title:"生成 handler CRUD 代码",path:"web-handler",helpInfo1:'\n      <p>基于 sql 生成的 handler 代码，包含了 http api 的 CRUD、自定义条件查询、缓存等。</p>\n      <br />\n      <p>1. 解压文件，将文件夹<b>internal</b>移动到一个<b>基于 sql 创建的 web 服务</b>项目代码文件夹下。</p>\n      <p>2. 打开终端，执行命令:  <b style="color: green">make docs</b></p>\n      <p>3. 编译和运行服务:  <b style="color: green">make run</b></p>\n      <p>4. 在浏览器访问 <a href="http://localhost:8080/swagger/index.html" target="_blank">http://localhost:8080/swagger/index.html</a>，测试 CRUD API。</p>\n      ',helpInfo2:'\n      <p>基于 sql 生成的 protobuf 和 handler 代码，包含了 http api 的 CRUD、分页查询、自定义条件查询、缓存等。</p>\n      <br />\n      <p>1. 解压文件，将文件夹<b>api</b>和<b>internal</b>移动到一个<b>基于 protobuf 创建的 web 服务</b>项目代码文件夹下。</p>\n      <p>2. 打开终端，执行命令:  <b style="color: green">make proto</b></p>\n      <p>3. 编译和运行服务:  <b style="color: green">make run</b></p>\n      <p>4. 在浏览器访问 <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a>，测试 CRUDapi。</p>\n      ',helpInfo:"",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",embed:!1,isUseInProtobuf:!1,serverName:"",isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"请输入数据源 dsn",trigger:"blur"}],tableName:[{required:!0,message:"请选择表名",trigger:"change"}],dbDriver:[{required:!0,message:"请选择数据库类型",trigger:"blur"}],moduleName:[{required:!0,message:"请输入 go module 名称",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="";if(t.ruleForm.isUseInProtobuf){if(""==t.ruleForm.serverName)return t.$message.error("服务名称不能为空"),!1;t.helpInfo=t.helpInfo2,i="web handler-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else{if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("服务名称不能为空"),!1;i="web handler --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else i="web handler --module-name="+t.ruleForm.moduleName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.helpInfo=t.helpInfo1}t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,isUseInProtobuf:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("获取表名成功"):t.$message.error("获取表名失败，"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("获取表名失败，请检查"+t.ruleForm.dbDriver+" dsn 地址是否正确、或者"+t.ruleForm.dbDriver+"服务是否运行。")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},C={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"数据库类型",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择数据库类型",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              选择数据库类型之后，生成的代码会自动匹配该数据库类型。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"数据库 dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果数据库是"),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v("、"),o("b",[e._v("postgresql")]),e._v("，填写\n              dsn 地址，"),o("br"),e._v("\n              dsn 格式："),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              注意：user 和 password 不能包含特殊字符 "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              mongodb 的 dsn 支持 SRV 记录，格式为："),o("br"),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              postgresql 的 dsn 支持指定 schema，在 dsn 后添加参数示例："),o("br"),e._v(" "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              如果数据库是"),o("b",[e._v("sqlite")]),e._v("，填写 sqlite db 文件本地绝对路径，"),o("br"),e._v("\n              示例："),o("b",[e._v("/tmp/test.db")]),e._v(" 或 "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"medium"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("获取表名")])],1),e._v(" "),o("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择表名，支持多选",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("全选")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),e.ruleForm.isUseInProtobuf||e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"必填字段"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到"),o("b",[e._v("user")]),e._v("服务代码目录，则这里填写"),o("b",[e._v("user")]),e._v("。"),o("br"),e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-server 🡆 your_server\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"module 名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到"),o("b",[e._v("user")]),e._v("服务代码目录，"),o("br"),e._v("\n              这里填写"),o("b",[e._v("user")]),e._v("服务对应 go.mod 文件的 module 名称。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"protobuf 类型"}},[o("el-switch",{model:{value:e.ruleForm.isUseInProtobuf,callback:function(t){e.$set(e.ruleForm,"isUseInProtobuf",t)},expression:"ruleForm.isUseInProtobuf"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              如果关闭，表示生成的 handler CRUD 代码只适合"'),o("b",[e._v("基于 sql 创建的 web 服务")]),e._v('"的项目代码，'),o("br"),e._v('\n              如果开启，表示生成的 handler CRUD 代码只适合"'),o("b",[e._v("基于 protobuf 创建的 web 服务")]),e._v('"的项目代码。\n            ')])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"嵌入 Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model 结构体字段对应表的 id、created_at、"),o("br"),e._v("\n              updated_at、deleted_at 这 4 个列名，支持软删除。"),o("br"),e._v("\n              如果表包含这些列名，请开启嵌入 Model，"),o("br"),e._v("\n              如果表不包含这些列名，请关闭嵌入 Model。\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API 扩展"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，生成5个常用的 CRUD API 代码。"),o("br"),e._v("\n              如果开启，在5个常用的 CRUD API 基础上，额外增加了4个API，"),o("br"),e._v("\n              分别是 DeleteByIDs, GetByCondition, ListByIDs, ListByLastID。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成的模块代码只适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("或"),o("br"),e._v(" "),o("b",[e._v("微服务多仓库(multi-repo)")]),e._v("类型的项目代码。"),o("br"),o("br"),e._v("\n              如果开启，表示生成的模块代码只适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),o("br"),e._v("类型的项目代码。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var D=o("VU/8")(y,C,!1,function(e){o("XoEw")},"data-v-4ae1fb65",null).exports,S={name:"WebCache",data:function(){return{title:"生成 cache 代码",path:"web-cache",helpInfo:'\n      <p>生成 Key-Value 缓存(redis)代码, 更多开发细节，请参考 <a href="https://go-sponge.com/guide/module-code/gen-cache.html" target="_blank">Development Guide</a>。</p>\n      <br />\n      <p>解压文件，将文件夹<b>internal</b>移动到项目代码文件夹下。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{moduleName:"",serverName:"",cacheName:"",prefixKey:"",keyName:"",keyType:"",valueName:"",valueType:"",suitedMonoRepo:!1,isNeedCustomKeyPrefix:!1},rules:{moduleName:[{required:!0,message:"请输入 go module 名称",trigger:"blur"}],cacheName:[{required:!0,message:"请输入缓存名称",trigger:"blur"}],keyName:[{required:!0,message:"请输入 key 名称",trigger:"blur"}],keyType:[{required:!0,message:"请选择 key 的 go 类型",trigger:"blur"}],valueName:[{required:!0,message:"请输入 value 名称",trigger:"blur"}],valueType:[{required:!0,message:"请选择 value 的 go 类型",trigger:"blur"}]},keyTypes:[{label:"uint64",value:"uint64"},{label:"string",value:"string"},{label:"int",value:"int"},{label:"int64",value:"int64"}],valueTypes:[{label:"uint64",value:"uint64"},{label:"string",value:"string"},{label:"int",value:"int"},{label:"int64",value:"int64"}]}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName)}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r="";if(""==t.ruleForm.keyType)return t.$message.error("key 的 go 类型不能为空"),!1;if(""==t.ruleForm.valueType)return t.$message.error("value 的 go 类型不能为空"),!1;if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("服务名称不能为空"),!1;r="web cache --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --cache-name="+t.ruleForm.cacheName+" --prefix-key="+t.ruleForm.prefixKey+" --key-name="+t.ruleForm.keyName+" --key-type="+t.ruleForm.keyType+" --value-name="+t.ruleForm.valueName+" --value-type="+t.ruleForm.valueType+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo}else r="web cache --module-name="+t.ruleForm.moduleName+" --cache-name="+t.ruleForm.cacheName+" --prefix-key="+t.ruleForm.prefixKey+" --key-name="+t.ruleForm.keyName+" --key-type="+t.ruleForm.keyType+" --value-name="+t.ruleForm.valueName+" --value-type="+t.ruleForm.valueType+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.ruleForm={}},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){this.value=e,this.$forceUpdate()},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},x={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"module 名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请输入 module 名称"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到"),o("b",[e._v("user")]),e._v("服务代码目录，"),o("br"),e._v("\n              这里填写"),o("b",[e._v("user")]),e._v("服务对应 go.mod 文件的 module 名称。\n            ")])])],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"必填字段"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到"),o("b",[e._v("user")]),e._v("服务代码目录，则这里填写"),o("b",[e._v("user")]),e._v("。"),o("br"),e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-server 🡆 your_server\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"缓存名称",prop:"cacheName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"示例 userToken"},model:{value:e.ruleForm.cacheName,callback:function(t){e.$set(e.ruleForm,"cacheName","string"==typeof t?t.trim():t)},expression:"ruleForm.cacheName"}})],1),e._v(" "),e.ruleForm.isNeedCustomKeyPrefix?o("el-form-item",{attrs:{label:"缓存 key 前缀",prop:"prefixKey"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"示例 user:token"},model:{value:e.ruleForm.prefixKey,callback:function(t){e.$set(e.ruleForm,"prefixKey","string"==typeof t?t.trim():t)},expression:"ruleForm.prefixKey"}})],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"key 名称",prop:"keyName"}},[o("el-input",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"示例 id"},model:{value:e.ruleForm.keyName,callback:function(t){e.$set(e.ruleForm,"keyName","string"==typeof t?t.trim():t)},expression:"ruleForm.keyName"}}),e._v(" "),o("el-select",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"key 的 go 类型",filterable:"","allow-create":"",clearable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.keyType,callback:function(t){e.$set(e.ruleForm,"keyType",t)},expression:"ruleForm.keyType"}},e._l(e.keyTypes,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"value 名称",prop:"valueName"}},[o("el-input",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"示例 token"},model:{value:e.ruleForm.valueName,callback:function(t){e.$set(e.ruleForm,"valueName","string"==typeof t?t.trim():t)},expression:"ruleForm.valueName"}}),e._v(" "),o("el-select",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"value 的 go 类型",filterable:"","allow-create":"",clearable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.valueType,callback:function(t){e.$set(e.ruleForm,"valueType",t)},expression:"ruleForm.valueType"}},e._l(e.valueTypes,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"自定义缓存 key 前缀"}},[o("el-switch",{model:{value:e.ruleForm.isNeedCustomKeyPrefix,callback:function(t){e.$set(e.ruleForm,"isNeedCustomKeyPrefix",t)},expression:"ruleForm.isNeedCustomKeyPrefix"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              在缓存服务中存储的 key 名称默认是\n              "),o("b",[e._v("缓存名称:key 值")]),e._v("。"),o("br"),o("br"),e._v("\n              如果开启此选项，设置自定义的缓存 key 前缀，"),o("br"),e._v("key 名称将变为\n              "),o("b",[e._v("自定义缓存 key 前缀:key 值")]),e._v("。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成的模块代码只适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("或"),o("br"),e._v(" "),o("b",[e._v("微服务多仓库(multi-repo)")]),e._v("类型的项目代码。"),o("br"),o("br"),e._v("\n              如果开启，表示生成的模块代码只适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),o("br"),e._v("类型的项目代码。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var N=o("VU/8")(S,x,!1,function(e){o("iV68")},"data-v-e818946c",null).exports,k={name:"WebDao",data:function(){return{title:"生成 DAO CRUD 代码",path:"web-dao",helpInfo:'\n      <p>基于表 sql 生成 DAO 代码，包含了表的 CRUD 操作、分页查询、自定义条件查询、缓存。更多开发细节，请参考 <a href="https://go-sponge.com/zh/guide/module-code/gen-dao-crud.html" target="_blank">开发指南</a>。</p>\n      <br />\n      <p>1. 解压文件，将文件夹<b>internal</b>移动到项目代码文件夹下。</p>\n      <p>2. 在 handler 或 service 调用 dao 代码。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",includeInitDB:!1,embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"请输入数据源 dsn",trigger:"blur"}],tableName:[{required:!0,message:"请选择表名",trigger:"change"}],dbDriver:[{required:!0,message:"请选择数据库类型",trigger:"blur"}],moduleName:[{required:!0,message:"请输入 go module 名称",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.includeInitDB=!1,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="";if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("服务名称不能为空"),!1;i="web dao --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --include-init-db="+t.ruleForm.includeInitDB+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else i="web dao --module-name="+t.ruleForm.moduleName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --include-init-db="+t.ruleForm.includeInitDB+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("获取表名成功"):t.$message.error("获取表名失败，"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("获取表名失败，请检查"+t.ruleForm.dbDriver+" dsn 地址是否正确、或者"+t.ruleForm.dbDriver+"服务是否运行。")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},R={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"数据库类型",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择数据库类型",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              选择数据库类型之后，生成的代码会自动匹配该数据库类型。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"数据库 dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果数据库是"),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v("、"),o("b",[e._v("postgresql")]),e._v("，填写\n              dsn 地址，"),o("br"),e._v("\n              dsn 格式："),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              注意：user 和 password 不能包含特殊字符 "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              mongodb 的 dsn 支持 SRV 记录，格式为："),o("br"),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              postgresql 的 dsn 支持指定 schema，在 dsn 后添加参数示例："),o("br"),e._v(" "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              如果数据库是"),o("b",[e._v("sqlite")]),e._v("，填写 sqlite db 文件本地绝对路径，"),o("br"),e._v("\n              示例："),o("b",[e._v("/tmp/test.db")]),e._v(" 或 "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("获取表名")])],1),e._v(" "),o("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择表名，支持多选",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("全选")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"必填字段"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到"),o("b",[e._v("user")]),e._v("服务代码目录，则这里填写"),o("b",[e._v("user")]),e._v("。"),o("br"),e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-server 🡆 your_server\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"module 名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到"),o("b",[e._v("user")]),e._v("服务代码目录，"),o("br"),e._v("\n              这里填写"),o("b",[e._v("user")]),e._v("服务对应 go.mod 文件的 module 名称。\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"嵌入 Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model 结构体字段对应表的 id、created_at、"),o("br"),e._v("\n              updated_at、deleted_at 这 4 个列名，支持软删除。"),o("br"),e._v("\n              如果表包含这些列名，请开启嵌入 Model，"),o("br"),e._v("\n              如果表不包含这些列名，请关闭嵌入 Model。\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API 扩展"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，生成5个常用的 CRUD API 代码。"),o("br"),e._v("\n              如果开启，在5个常用的 CRUD API 基础上，额外增加了4个API，"),o("br"),e._v("\n              分别是 DeleteByIDs, GetByCondition, ListByIDs, ListByLastID。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成的模块代码只适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("或"),o("br"),e._v(" "),o("b",[e._v("微服务多仓库(multi-repo)")]),e._v("类型的项目代码。"),o("br"),o("br"),e._v("\n              如果开启，表示生成的模块代码只适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),o("br"),e._v("类型的项目代码。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var A=o("VU/8")(k,R,!1,function(e){o("EX0q")},"data-v-69d1bfe4",null).exports,z={name:"WebModel",data:function(){return{title:"生成 model 代码",path:"web-model",helpInfo:"\n      <p>基于表 sql 生成对应 Go 的结构体。</p>\n      <br />\n      <p>解压文件，将文件夹<b>internal</b>移动到项目代码文件夹下。</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",embed:!1},rules:{dsnAddr:[{required:!0,message:"请输入数据源 dsn",trigger:"blur"}],tableName:[{required:!0,message:"请选择表名",trigger:"change"}],dbDriver:[{required:!0,message:"请选择数据库类型",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="web model --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("获取表名成功"):t.$message.error("获取表名失败，"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("获取表名失败，请检查"+t.ruleForm.dbDriver+" dsn 地址是否正确、或者"+t.ruleForm.dbDriver+"服务是否运行。")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},$={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"数据库类型",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择数据库类型",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              选择数据库类型之后，生成的代码会自动匹配该数据库类型。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"数据库 dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果数据库是"),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v("、"),o("b",[e._v("postgresql")]),e._v("，填写\n              dsn 地址，"),o("br"),e._v("\n              dsn 格式："),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              注意：user 和 password 不能包含特殊字符 "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              mongodb 的 dsn 支持 SRV 记录，格式为："),o("br"),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              postgresql 的 dsn 支持指定 schema，在 dsn 后添加参数示例："),o("br"),e._v(" "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              如果数据库是"),o("b",[e._v("sqlite")]),e._v("，填写 sqlite db 文件本地绝对路径，"),o("br"),e._v("\n              示例："),o("b",[e._v("/tmp/test.db")]),e._v(" 或 "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("获取表名")])],1),e._v(" "),o("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择表名，支持多选",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("全选")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"嵌入 Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model 结构体字段对应表的 id、created_at、"),o("br"),e._v("\n              updated_at、deleted_at 这 4 个列名，支持软删除。"),o("br"),e._v("\n              如果表包含这些列名，请开启嵌入 Model，"),o("br"),e._v("\n              如果表不包含这些列名，请关闭嵌入 Model。\n            ")])])],1):e._e()],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var q=o("VU/8")(z,$,!1,function(e){o("AWpY")},"data-v-12517b52",null).exports,T={name:"MicroRPC",data:function(){return{title:"",path:"micro-rpc",helpInfo:'\n      <p><b>基于 sql 创建 gRPC 服务</b> 生成包括 CRUD API 的完整微服务代码，更多开发细节，请参考 <a href="https://go-sponge.com/zh/guide/grpc/based-on-sql.html" target="_blank">开发指南</a>。</p>\n      <br />\n      <p>1. 解压文件。</p>\n      <p>2. 打开终端，执行命令生成代码:  <b style="color: green">make proto</b></p>\n      <p>3. 编译和运行服务:  <b style="color: green">make run</b></p>\n      <p>4. 使用 <b>Goland</b> 或 <b>VSCode</b> 打开文件 <span style="color: chocolate">internal/service/xxx_client_test.go</span>，测试或者压测 api。</p>\n      <br />\n      <p>技术栈： <b>Go、gRPC、{{.DBDriver}}、go-redis、Protobuf、Zap、Prometheus、OpenTracing</b> 等。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",projectName:"",repoAddr:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"请输入数据源 dsn",trigger:"blur"}],tableName:[{required:!0,message:"请选择表名",trigger:"change"}],dbDriver:[{required:!0,message:"请选择数据库类型",trigger:"blur"}],moduleName:[{required:!0,message:"请输入 go module 名称",trigger:"blur"}],serverName:[{required:!0,message:"请输入服务名称",trigger:"blur"}],projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro rpc --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi,l=t.helpInfo;l="mongodb"===t.ruleForm.dbDriver?l.replace("{{.DBDriver}}","Mongo"):l.replace("{{.DBDriver}}","Gorm"),t.$refs.downloadCode.execution(o,t.path,i,l)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("获取表名成功"):t.$message.error("获取表名失败，"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("获取表名失败，请检查"+t.ruleForm.dbDriver+" dsn 地址是否正确、或者"+t.ruleForm.dbDriver+"服务是否运行。")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},I={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#99c400"},attrs:{href:"https://go-sponge.com/zh/guide/grpc/based-on-sql.html",target:"_blank"}},[e._v("基于 sql 创建 gRPC 服务")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          —— 生成完整的微服务代码")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"数据库类型",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择数据库类型",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              选择数据库类型之后，生成的代码会自动匹配该数据库类型。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"数据库 dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果数据库是"),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v("、"),o("b",[e._v("postgresql")]),e._v("，填写\n              dsn 地址，"),o("br"),e._v("\n              dsn 格式："),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              注意：user 和 password 不能包含特殊字符 "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              mongodb 的 dsn 支持 SRV 记录，格式为："),o("br"),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              postgresql 的 dsn 支持指定 schema，在 dsn 后添加参数示例："),o("br"),e._v(" "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              如果数据库是"),o("b",[e._v("sqlite")]),e._v("，填写 sqlite db 文件本地绝对路径，"),o("br"),e._v("\n              示例："),o("b",[e._v("/tmp/test.db")]),e._v(" 或 "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("获取表名")])],1),e._v(" "),o("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择表名，支持多选",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("全选")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              以后如果需要添加新的 CRUD 代码，可以在菜单"),o("br"),o("b",[e._v("【Public】 -> 【生成 service CRUD 代码】")]),o("br"),e._v("中生成代码，然后移动到项目代码中。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-server 🡆 your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module 名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod 文件的 module 名称。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果名称包括大写字母，会转换为小写，并用中划线分隔，"),o("br"),e._v("\n              示例：yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker 镜像仓库"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              docker 镜像仓库地址，默认值是"),o("b",[e._v("image-repo-host")]),e._v("，这个参数"),o("br"),e._v("\n              用在构建 docker 镜像、k8s 的部署脚本上，如果使用 docker 官方"),o("br"),e._v("\n              镜像仓库，只需填写注册 docker 仓库的用户名。如果使用私有仓"),o("br"),e._v("\n              库地址，需要填写完整仓库地址。\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"嵌入 Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model 结构体字段对应表的 id、created_at、"),o("br"),e._v("\n              updated_at、deleted_at 这 4 个列名，支持软删除。"),o("br"),e._v("\n              如果表包含这些列名，请开启嵌入 Model，"),o("br"),e._v("\n              如果表不包含这些列名，请关闭嵌入 Model。\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API 扩展"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，生成5个常用的 CRUD API 代码。"),o("br"),e._v("\n              如果开启，在5个常用的 CRUD API 基础上，额外增加了4个API，"),o("br"),e._v("\n              分别是 DeleteByIDs, GetByCondition, ListByIDs, ListByLastID。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("或"),o("b",[e._v("微服务多"),o("br"),e._v("\n                仓库(multi-repo)")]),e._v("类型的服务代码，即使把多个服务代码放在一个"),o("br"),e._v("\n              git 仓库下，不同服务代码之间不可复用。"),o("br"),e._v("点击查看"),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("目录结构示例")]),e._v("。"),o("br"),o("br"),e._v("\n              如果开启，表示生成适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),e._v("类型的服务"),o("br"),e._v("\n              代码，多个服务代码放在一个 git 仓库下，不同服务之间的代码可以"),o("br"),e._v("\n              复用。如果后面在页面生成的模块代码移动到此服务，也需要开启"),o("br"),e._v("这个选项。"),o("br"),e._v("\n              点击查看"),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("目录结构示例")]),e._v("。\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1)])],1)},staticRenderFns:[]};var P=o("VU/8")(T,I,!1,function(e){o("wdk2")},"data-v-fcde0b5c",null).exports,M={name:"MicroRPCConn",data:function(){return{title:"生成 gRPC 服务连接代码",path:"micro-rpc-conn",helpInfo:"\n      <p>gRPC 服务连接代码包括常用服务治理功能，例如服务发现、负载均衡、限流、熔断、链路追踪等。</p>\n      <br />\n      <p>解压文件，将文件夹<b>internal</b>移动到项目代码文件夹下。</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{moduleName:"",serverName:"",rpcServerNames:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"请输入 go module 名称",trigger:"blur"}],rpcServerNames:[{required:!0,message:"请输入 gRPC 服务名称",trigger:"blur"}]}}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.rpcServerNames=o.data.rpcServerNames)}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r="";if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("服务名称不能为空"),!1;r="micro rpc-conn --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --rpc-server-name="+t.ruleForm.rpcServerNames+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo}else r="micro rpc-conn --module-name="+t.ruleForm.moduleName+" --rpc-server-name="+t.ruleForm.rpcServerNames+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.ruleForm={}},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},W={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"module 名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请输入 module 名称"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到 user 服务代码目录，"),o("br"),e._v("\n              这里填写 user 服务对应 go.mod 文件的 module 名称。\n            ")])])],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"必填字段"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到"),o("b",[e._v("user")]),e._v("服务代码目录，则这里填写"),o("b",[e._v("user")]),e._v("。"),o("br"),e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-server 🡆 your_server\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"gRPC 服务名称",prop:"rpcServerNames"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"支持填写多个 gRPC 服务名称"},model:{value:e.ruleForm.rpcServerNames,callback:function(t){e.$set(e.ruleForm,"rpcServerNames","string"==typeof t?t.trim():t)},expression:"ruleForm.rpcServerNames"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果想生成连接多个 gRPC 服务代码，"),o("br"),e._v("\n              多个 gRPC 服务名称之间用"),o("b",[e._v("逗号")]),e._v("分隔。"),o("br"),e._v("\n              示例：server_name1,server_name2\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成的模块代码只适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("或"),o("br"),e._v(" "),o("b",[e._v("微服务多仓库(multi-repo)")]),e._v("类型的项目代码。"),o("br"),o("br"),e._v("\n              如果开启，表示生成的模块代码只适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),o("br"),e._v("类型的项目代码。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var L=o("VU/8")(M,W,!1,function(e){o("3CNT")},"data-v-327a2276",null).exports,E={name:"MicroService",data:function(){return{title:"生成 service CRUD 代码",path:"micro-service",helpInfo:'\n      <p>基于表 sql 生成的 service 代码，包含了表的 gRPC API 的 CRUD 和测试代码，支持分页、过滤、排序查询。</p>\n      <br />\n      <p>1. 解压文件，将文件夹<b>api</b>和<b>internal</b>移动到<b>基于 sql 创建 gRPC 服务</b>或者<b>基于 protobuf 创建 gRPC 服务</b>的项目代码文件夹下。</p>\n      <p>2. 打开终端，执行命令:  <b style="color: green">make proto</b></p>\n      <p>3. 编译和运行服务:  <b style="color: green">make run</b></p>\n      <p>4. 使用 <b>Goland</b> 或 <b>VSCode</b> 打开文件 <span style="color: chocolate">internal/service/xxx_client_test.go</span>，测试 CRUD API。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"请输入数据源 dsn",trigger:"blur"}],tableName:[{required:!0,message:"请选择表名",trigger:"change"}],dbDriver:[{required:!0,message:"请选择数据库类型",trigger:"blur"}],moduleName:[{required:!0,message:"请输入 go module 名称",trigger:"blur"}],serverName:[{required:!0,message:"请输入服务名称",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro service --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("获取表名成功"):t.$message.error("获取表名失败，"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("获取表名失败，请检查"+t.ruleForm.dbDriver+" dsn 地址是否正确、或者"+t.ruleForm.dbDriver+"服务是否运行。")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},j={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"数据库类型",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择数据库类型",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              选择数据库类型之后，生成的代码会自动匹配该数据库类型。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"数据库 dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果数据库是"),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v("、"),o("b",[e._v("postgresql")]),e._v("，填写\n              dsn 地址，"),o("br"),e._v("\n              dsn 格式："),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              注意：user 和 password 不能包含特殊字符 "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              mongodb 的 dsn 支持 SRV 记录，格式为："),o("br"),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              postgresql 的 dsn 支持指定 schema，在 dsn 后添加参数示例："),o("br"),e._v(" "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              如果数据库是"),o("b",[e._v("sqlite")]),e._v("，填写 sqlite db 文件本地绝对路径，"),o("br"),e._v("\n              示例："),o("b",[e._v("/tmp/test.db")]),e._v(" 或 "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("获取表名")])],1),e._v(" "),o("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择表名，支持多选",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("全选")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到"),o("b",[e._v("user")]),e._v("服务代码目录，则这里填写"),o("b",[e._v("user")]),e._v("。"),o("br"),e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-server 🡆 your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module 名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到"),o("b",[e._v("user")]),e._v("服务代码目录，"),o("br"),e._v("\n              这里填写"),o("b",[e._v("user")]),e._v("服务对应 go.mod 文件的 module 名称。\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"嵌入 Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model 结构体字段对应表的 id、created_at、"),o("br"),e._v("\n              updated_at、deleted_at 这 4 个列名，支持软删除。"),o("br"),e._v("\n              如果表包含这些列名，请开启嵌入 Model，"),o("br"),e._v("\n              如果表不包含这些列名，请关闭嵌入 Model。\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API 扩展"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，生成5个常用的 CRUD API 代码。"),o("br"),e._v("\n              如果开启，在5个常用的 CRUD API 基础上，额外增加了4个API，"),o("br"),e._v("\n              分别是 DeleteByIDs, GetByCondition, ListByIDs, ListByLastID。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成的模块代码只适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("或"),o("br"),e._v(" "),o("b",[e._v("微服务多仓库(multi-repo)")]),e._v("类型的项目代码。"),o("br"),o("br"),e._v("\n              如果开启，表示生成的模块代码只适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),o("br"),e._v("类型的项目代码。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var U=o("VU/8")(E,j,!1,function(e){o("mKPG")},"data-v-43eb1873",null).exports,B={name:"MicroService",data:function(){return{title:"生成 service+handler CRUD 代码",path:"micro-service-handler",helpInfo:'\n      <p>基于表 sql 生成的 service+handler CRUD 代码，包含了 gRPC+HTTP CRUD API 相关代码。</p>\n      <br />\n      <p>1. 解压文件，把文件夹<b>api</b>和<b>internal</b>移动到<b>基于 protobuf 创建 gRPC+HTTP 服务</b>的项目代码文件夹下。</p>\n      <p>2. 打开终端，执行命令生成 gRPC 和 HTTP 相关代码:  <b style="color: green">make proto</b></p>\n      <p>3. 编译和运行服务:  <b style="color: green">make run</b></p>\n      <p>4. 测试或压测 api:<br />\n        &emsp;○ 使用 <b>Goland</b> 或 <b>VSCode</b> 打开文件 <span style="color: chocolate">internal/service/xxx_client_test.go</span>，测试或性能压测 gRPC api。<br />\n        &emsp;○ 在浏览器访问 <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a>，测试 http api。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"请输入数据源 dsn",trigger:"blur"}],tableName:[{required:!0,message:"请选择表名",trigger:"change"}],dbDriver:[{required:!0,message:"请选择数据库类型",trigger:"blur"}],moduleName:[{required:!0,message:"请输入 go module 名称",trigger:"blur"}],serverName:[{required:!0,message:"请输入服务名称",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro service-handler --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("获取表名成功"):t.$message.error("获取表名失败，"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("获取表名失败，请检查"+t.ruleForm.dbDriver+" dsn 地址是否正确、或者"+t.ruleForm.dbDriver+"服务是否运行。")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},G={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"数据库类型",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择数据库类型",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              选择数据库类型之后，生成的代码会自动匹配该数据库类型。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"数据库 dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果数据库是"),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v("、"),o("b",[e._v("postgresql")]),e._v("，填写\n              dsn 地址，"),o("br"),e._v("\n              dsn 格式："),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              注意：user 和 password 不能包含特殊字符 "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              mongodb 的 dsn 支持 SRV 记录，格式为："),o("br"),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              postgresql 的 dsn 支持指定 schema，在 dsn 后添加参数示例："),o("br"),e._v(" "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              如果数据库是"),o("b",[e._v("sqlite")]),e._v("，填写 sqlite db 文件本地绝对路径，"),o("br"),e._v("\n              示例："),o("b",[e._v("/tmp/test.db")]),e._v(" 或 "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("获取表名")])],1),e._v(" "),o("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择表名，支持多选",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("全选")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到"),o("b",[e._v("user")]),e._v("服务代码目录，则这里填写"),o("b",[e._v("user")]),e._v("。"),o("br"),e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-server 🡆 your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module 名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              例如生成的代码将要移动到"),o("b",[e._v("user")]),e._v("服务代码目录，"),o("br"),e._v("\n              这里填写"),o("b",[e._v("user")]),e._v("服务对应 go.mod 文件的 module 名称。\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"嵌入 Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model 结构体字段对应表的 id、created_at、"),o("br"),e._v("\n              updated_at、deleted_at 这 4 个列名，支持软删除。"),o("br"),e._v("\n              如果表包含这些列名，请开启嵌入 Model，"),o("br"),e._v("\n              如果表不包含这些列名，请关闭嵌入 Model。\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API 扩展"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，生成5个常用的 CRUD API 代码。"),o("br"),e._v("\n              如果开启，在5个常用的 CRUD API 基础上，额外增加了4个API，"),o("br"),e._v("\n              分别是 DeleteByIDs, GetByCondition, ListByIDs, ListByLastID。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成的模块代码只适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("或"),o("br"),e._v(" "),o("b",[e._v("微服务多仓库(multi-repo)")]),e._v("类型的项目代码。"),o("br"),o("br"),e._v("\n              如果开启，表示生成的模块代码只适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),o("br"),e._v("类型的项目代码。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var H=o("VU/8")(B,G,!1,function(e){o("AaHZ")},"data-v-2d04e847",null).exports,V={name:"MicroProtobuf",data:function(){return{title:"生成 protobuf CURD 描述信息",path:"micro-protobuf",helpInfo:'\n      <p>把表 sql 转换为 protobuf 描述信息，主要包含 CRUD API。</p>\n      <br />\n      <p>解压文件，将文件夹<b>api</b>移动到项目代码文件夹下，proto 文件还有下面用途：</p>\n      <p style="text-indent:2em;">● 生成 swagger 文档。\n      <p style="text-indent:2em;">● 作为 protoc 的自定义的插件生成需要的代码。\n      <p style="text-indent:2em;">● 创建 web 服务。\n      <p style="text-indent:2em;">● 创建 gRPC 服务。\n      <p style="text-indent:2em;">● 创建 gRPC+HTTP 服务。\n      <p style="text-indent:2em;">● 创建 gRPC 网关服务。\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",isWebProto:!1,isExtendedApi:!1},rules:{dsnAddr:[{required:!0,message:"请输入数据源 dsn",trigger:"blur"}],tableName:[{required:!0,message:"请选择表名",trigger:"change"}],dbDriver:[{required:!0,message:"请选择数据库类型",trigger:"blur"}],moduleName:[{required:!0,message:"请输入 go module 名称",trigger:"blur"}],serverName:[{required:!0,message:"请输入服务名称",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.isWebProto=!1,e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro protobuf --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --web-type="+t.ruleForm.isWebProto+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[]}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("获取表名成功"):t.$message.error("获取表名失败，"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("获取表名失败，请检查"+t.ruleForm.dbDriver+" dsn 地址是否正确、或者"+t.ruleForm.dbDriver+"服务是否运行。")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},O={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"数据库类型",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择数据库类型",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              选择数据库类型之后，生成的代码会自动匹配该数据库类型。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"数据库 dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果数据库是"),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v("、"),o("b",[e._v("postgresql")]),e._v("，填写\n              dsn 地址，"),o("br"),e._v("\n              dsn 格式："),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              注意：user 和 password 不能包含特殊字符 "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              mongodb 的 dsn 支持 SRV 记录，格式为："),o("br"),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              postgresql 的 dsn 支持指定 schema，在 dsn 后添加参数示例："),o("br"),e._v(" "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              如果数据库是"),o("b",[e._v("sqlite")]),e._v("，填写 sqlite db 文件本地绝对路径，"),o("br"),e._v("\n              示例："),o("b",[e._v("/tmp/test.db")]),e._v(" 或 "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("获取表名")])],1),e._v(" "),o("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择表名，支持多选",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("全选")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-server 🡆 your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module 名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod 文件的 module 名称。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"包含路由和 swagger"}},[o("el-switch",{model:{value:e.ruleForm.isWebProto,callback:function(t){e.$set(e.ruleForm,"isWebProto",t)},expression:"ruleForm.isWebProto"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果开启，生成的 proto 文件包含路由和 swagger 描述信息。"),o("br"),e._v("\n              如果关闭，则不包含路由和 swagger 描述信息。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API 扩展"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，生成5个常用的 CRUD API 代码。"),o("br"),e._v("\n              如果开启，在5个常用的 CRUD API 基础上，额外增加了4个API，"),o("br"),e._v("\n              分别是 DeleteByIDs, GetByCondition, ListByIDs, ListByLastID。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var K=o("VU/8")(V,O,!1,function(e){o("LZ0h")},"data-v-46407c76",null).exports,Z={name:"WebHTTPPb",data:function(){return{title:"",path:"web-http-pb",helpInfo:'\n      <p><b>基于 protobuf 创建 web 服务</b> 生成了通用的 web 服务后端代码，更多开发细节，请参考 <a href="https://go-sponge.com/zh/guide/web/based-on-protobuf.html" target="_blank">开发指南</a>。</p>\n      <br />\n      <p>1. 解压文件。</p>\n      <p>2. 打开终端，执行命令生成代码:  <b style="color: green">make proto</b></p>\n      <p>3. 打开文件 <span style="color: chocolate">internal/handler/xxx.go</span>, 根据模板代码示例填充代码替换 <span style="color: chocolate">panic("implement me")</span></p>\n      <p>4. 编译和运行服务:  <b style="color: green">make run</b></p>\n      <p>5. 在浏览器访问 <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a>，测试 api。</p>\n      <br />\n      <p>技术栈：<b>Go、Gin、Protobuf、Zap、Prometheus、OpenTracing</b> 等。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"请输入 go module 名称",trigger:"blur"}],serverName:[{required:!0,message:"请输入服务名称",trigger:"blur"}],projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],protobufFile:[{required:!0,message:"请选择 proto 文件",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\n// 第一个 user 是 go module 名称，第二个 user 是服务名称，v1是版本号\noption go_package = "user/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // Login 登录注释\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "登录",\n      description: "使用邮箱登录",\n    };\n  }\n\n  // 注意：下面两类 rpc 会被忽略生成 http 相关代码\n  //    1. 在 rpc 没有设置 google.api.http，例如 SayHi\n  //    2. rpc 属于 stream 类型，例如 ClientSteam、ServerSteam、BidiSteam\n\n  //rpc SayHi(HelloRequest) returns (HelloReply) {}\n  //rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  //rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  //rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="web http-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("下载代码失败")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},X={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#e403a4"},attrs:{href:"https://go-sponge.com/zh/guide/web/based-on-protobuf.html",target:"_blank"}},[e._v("基于 protobuf 创 建 web 服务")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          —— 生成通用的 web 服务后端代码")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto 文件",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("查看 protobuf 文件示例")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("选择 proto 文件")]),e._v("，支持多文件。\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-server 🡆 your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module 名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod 文件的 module 名称。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果名称包括大写字母，会转换为小写，并用中划线分隔，"),o("br"),e._v("\n              示例：yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker 镜像仓库"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              docker 镜像仓库地址，默认值是"),o("b",[e._v("image-repo-host")]),e._v("，这个参数"),o("br"),e._v("\n              用在构建 docker 镜像、k8s 的部署脚本上，如果使用 docker 官方"),o("br"),e._v("\n              镜像仓库，只需填写注册 docker 仓库的用户名。如果使用私有仓"),o("br"),e._v("\n              库地址，需要填写完整仓库地址。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("或"),o("b",[e._v("微服务多"),o("br"),e._v("\n                仓库(multi-repo)")]),e._v("类型的服务代码，即使把多个服务代码放在一个"),o("br"),e._v("\n              git 仓库下，不同服务代码之间不可复用。"),o("br"),e._v("点击查看"),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("目录结构示例")]),e._v("。"),o("br"),o("br"),e._v("\n              如果开启，表示生成适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),e._v("类型的服务"),o("br"),e._v("\n              代码，多个服务代码放在一个 git 仓库下，不同服务之间的代码可以"),o("br"),e._v("\n              复用。如果后面在页面生成的模块代码移动到此服务，也需要开启"),o("br"),e._v("这个选项。"),o("br"),e._v("\n              点击查看"),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("目录结构示例")]),e._v("。\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var J=o("VU/8")(Z,X,!1,function(e){o("C642")},"data-v-4648dc19",null).exports,Y={name:"MicroRPCPb",data:function(){return{title:"",path:"micro-rpc-pb",helpInfo:'\n      <p><b>基于 protobuf 创建 gRPC 服务</b> 生成了通用的 gRPC 服务代码，更多开发细节，请参考 <a href="https://go-sponge.com/zh/guide/grpc/based-on-protobuf.html" target="_blank">开发指南</a>。</p>\n      <br />\n      <p>1. 解压文件。</p>\n      <p>2. 打开终端，执行命令生成代码:  <b style="color: green">make proto</b></p>\n      <p>3. 打开文件 <span style="color: chocolate">internal/service/xxx.go</span>, 根据模板代码示例填充代码替换 <span style="color: chocolate">panic("implement me")</span></p>\n      <p>4. 编译和运行服务:  <b style="color: green">make run</b></p>\n      <p>5. 使用 <b>Goland</b> 或 <b>VSCode</b> 打开文件 <span style="color: chocolate">internal/service/xxx_client_test.go</span>，测试 api。</p>\n      <br />\n      <p>技术栈：<b>Go、gRPC、Protobuf、Zap、Prometheus、OpenTracing</b> 等。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"请输入 go module 名称",trigger:"blur"}],serverName:[{required:!0,message:"请输入服务名称",trigger:"blur"}],projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],protobufFile:[{required:!0,message:"请选择 proto 文件",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\n// 第一个 user 是 go module 名称，第二个 user 是服务名称，v1是版本号\noption go_package = "user/api/user/v1;v1";\n\nservice user {\n  // Login 登录注释\n  rpc Login(LoginRequest) returns (LoginReply) {}\n\n  rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro rpc-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("下载代码失败")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Q={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#2ba207"},attrs:{href:"https://go-sponge.com/zh/guide/grpc/based-on-protobuf.html",target:"_blank"}},[e._v("基于 protobuf 创建 gRPC 服务")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          —— 生成通用的微服务代码")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto 文件",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("查看 protobuf 文件示例")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("选择 proto 文件")]),e._v("，支持多文件。\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-server 🡆 your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module 名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod 文件的 module 名称。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果名称包括大写字母，会转换为小写，并用中划线分隔，"),o("br"),e._v("\n              示例：yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker 镜像仓库"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              docker 镜像仓库地址，默认值是"),o("b",[e._v("image-repo-host")]),e._v("，这个参数"),o("br"),e._v("\n              用在构建 docker 镜像、k8s 的部署脚本上，如果使用 docker 官方"),o("br"),e._v("\n              镜像仓库，只需填写注册 docker 仓库的用户名。如果使用私有仓"),o("br"),e._v("\n              库地址，需要填写完整仓库地址。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("或"),o("b",[e._v("微服务多"),o("br"),e._v("\n                仓库(multi-repo)")]),e._v("类型的服务代码，即使把多个服务代码放在一个"),o("br"),e._v("\n              git 仓库下，不同服务代码之间不可复用。"),o("br"),e._v("点击查看"),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("目录结构示例")]),e._v("。"),o("br"),o("br"),e._v("\n              如果开启，表示生成适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),e._v("类型的服务"),o("br"),e._v("\n              代码，多个服务代码放在一个 git 仓库下，不同服务之间的代码可以"),o("br"),e._v("\n              复用。如果后面在页面生成的模块代码移动到此服务，也需要开启"),o("br"),e._v("这个选项。"),o("br"),e._v("\n              点击查看"),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("目录结构示例")]),e._v("。\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var ee=o("VU/8")(Y,Q,!1,function(e){o("ZmZt")},"data-v-76a67862",null).exports,te={name:"MicroGRPCHTTP",data:function(){return{title:"",path:"micro-grpc-http",helpInfo:'\n      <p><b>基于 sql 创建 gRPC+HTTP 服务</b> 生成了包括了 CRUD API 的完整微服务代码，更多开发细节，请参考 <a href="https://go-sponge.com/zh/guide/grpc-http/based-on-sql.html" target="_blank">开发指南</a>。</p>\n      <br />\n      <p>1. 解压文件。</p>\n      <p>2. 打开终端，执行命令生成代码:  <b style="color: green">make proto</b></p>\n      <p>3. 编译和运行服务:  <b style="color: green">make run</b></p>\n      <p>5. 测试或压测 api:<br />\n        &emsp;○ 使用 <b>Goland</b> 或 <b>VSCode</b> 打开文件 <span style="color: chocolate">internal/service/xxx_client_test.go</span>，测试或性能压测 gRPC api。<br />\n        &emsp;○ 在浏览器访问 <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a>，测试 http api。</p>\n      <br />\n      <p>技术栈： <b>Go、gRPC、{{.DBDriver}}、go-redis、Protobuf、Zap、Prometheus、OpenTracing</b> 等。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",projectName:"",repoAddr:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"请输入数据源 dsn",trigger:"blur"}],tableName:[{required:!0,message:"请选择表名",trigger:"change"}],dbDriver:[{required:!0,message:"请选择数据库类型",trigger:"blur"}],moduleName:[{required:!0,message:"请输入 go module 名称",trigger:"blur"}],serverName:[{required:!0,message:"请输入服务名称",trigger:"blur"}],projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro grpc-http --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi,l=t.helpInfo;l="mongodb"===t.ruleForm.dbDriver?l.replace("{{.DBDriver}}","Mongo"):l.replace("{{.DBDriver}}","Gorm"),t.$refs.downloadCode.execution(o,t.path,i,l)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("获取表名成功"):t.$message.error("获取表名失败，"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("获取表名失败，请检查"+t.ruleForm.dbDriver+" dsn 地址是否正确、或者"+t.ruleForm.dbDriver+"服务是否运行。")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},oe={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#00CED1"},attrs:{href:"https://go-sponge.com/zh/guide/grpc-http/based-on-sql.html",target:"_blank"}},[e._v("基于 sql 创建 gRPC+HTTP 服务")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          —— 生成支持 gRPC 和 HTTP 协议的完整微服务代码")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"数据库类型",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择数据库类型",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              选择数据库类型之后，生成的代码会自动匹配该数据库类型。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"数据库 dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果数据库是"),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v("、"),o("b",[e._v("postgresql")]),e._v("，填写\n              dsn 地址，"),o("br"),e._v("\n              dsn 格式："),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              注意：user 和 password 不能包含特殊字符 "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              mongodb 的 dsn 支持 SRV 记录，格式为："),o("br"),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              postgresql 的 dsn 支持指定 schema，在 dsn 后添加参数示例："),o("br"),e._v(" "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              如果数据库是"),o("b",[e._v("sqlite")]),e._v("，填写 sqlite db 文件本地绝对路径，"),o("br"),e._v("\n              示例："),o("b",[e._v("/tmp/test.db")]),e._v(" 或 "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("获取表名")])],1),e._v(" "),o("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择表名，支持多选",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("全选")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              以后如果需要添加新的 CRUD 代码，可以在菜单"),o("br"),o("b",[e._v("【Public】 -> 【生成 service+handler CRUD 代码】")]),o("br"),e._v("中生成代码，然后移动到项目代码中。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-server 🡆 your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module 名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod 文件的 module 名称。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果名称包括大写字母，会转换为小写，并用中划线分隔，"),o("br"),e._v("\n              示例：yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker 镜像仓库"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              docker 镜像仓库地址，默认值是"),o("b",[e._v("image-repo-host")]),e._v("，这个参数"),o("br"),e._v("\n              用在构建 docker 镜像、k8s 的部署脚本上，如果使用 docker 官方"),o("br"),e._v("\n              镜像仓库，只需填写注册 docker 仓库的用户名。如果使用私有仓"),o("br"),e._v("\n              库地址，需要填写完整仓库地址。\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"嵌入 Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model 结构体字段对应表的 id、created_at、"),o("br"),e._v("\n              updated_at、deleted_at 这 4 个列名，支持软删除。"),o("br"),e._v("\n              如果表包含这些列名，请开启嵌入 Model，"),o("br"),e._v("\n              如果表不包含这些列名，请关闭嵌入 Model。\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API 扩展"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，生成5个常用的 CRUD API 代码。"),o("br"),e._v("\n              如果开启，在5个常用的 CRUD API 基础上，额外增加了4个API，"),o("br"),e._v("\n              分别是 DeleteByIDs, GetByCondition, ListByIDs, ListByLastID。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("或"),o("b",[e._v("微服务多"),o("br"),e._v("\n                仓库(multi-repo)")]),e._v("类型的服务代码，即使把多个服务代码放在一个"),o("br"),e._v("\n              git 仓库下，不同服务代码之间不可复用。"),o("br"),e._v("点击查看"),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("目录结构示例")]),e._v("。"),o("br"),o("br"),e._v("\n              如果开启，表示生成适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),e._v("类型的服务"),o("br"),e._v("\n              代码，多个服务代码放在一个 git 仓库下，不同服务之间的代码可以"),o("br"),e._v("\n              复用。如果后面在页面生成的模块代码移动到此服务，也需要开启"),o("br"),e._v("这个选项。"),o("br"),e._v("\n              点击查看"),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("目录结构示例")]),e._v("。\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1)])],1)},staticRenderFns:[]};var re=o("VU/8")(te,oe,!1,function(e){o("lOVm")},"data-v-3dacf3e0",null).exports,ie={name:"MicroGRPCHTTPPb",data:function(){return{title:"",path:"micro-grpc-http-pb",helpInfo:'\n      <p><b>基于 protobuf 创建 gRPC+HTTP 服务</b> 生成了通用的 gRPC+HTTP 服务代码，更多开发细节，请参考 <a href="https://go-sponge.com/zh/guide/grpc-http/based-on-protobuf.html" target="_blank">开发指南</a>。</p>\n      <br />\n      <p>1. 解压文件。</p>\n      <p>2. 打开终端，执行命令生成代码:  <b style="color: green">make proto</b></p>\n      <p>3. 打开文件 <span style="color: chocolate">internal/service/xxx.go</span>, 根据模板代码示例填充代码替换 <span style="color: chocolate">panic("implement me")</span></p>\n      <p>4. 编译和运行服务:  <b style="color: green">make run</b></p>\n      <p>5. 测试或压测 api:<br />\n        &emsp;○ 使用 <b>Goland</b> 或 <b>VSCode</b> 打开文件 <span style="color: chocolate">internal/service/xxx_client_test.go</span>，测试或性能压测 gRPC api。<br />\n        &emsp;○ 在浏览器访问 <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a>，测试 http api。</p>\n      <br />\n      <p>技术栈：<b>Go、Gin、gRPC、Protobuf、Zap、Prometheus、OpenTracing</b> 等。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"请输入 go module 名称",trigger:"blur"}],serverName:[{required:!0,message:"请输入服务名称",trigger:"blur"}],projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],protobufFile:[{required:!0,message:"请选择 proto 文件",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\n// 第一个 user 是 go module 名称，第二个 user 是服务名称，v1是版本号\noption go_package = "user/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // Login 登录注释\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "登录",\n      description: "使用邮箱登录",\n    };\n  }\n\n  // 注意：下面两类 rpc 会被忽略生成 http 相关代码\n  //    1. 在 rpc 没有设置 google.api.http，例如 SayHi\n  //    2. rpc 属于 stream 类型，例如 ClientSteam、ServerSteam、BidiSteam\n\n  rpc SayHi(HelloRequest) returns (HelloReply) {}\n  rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro grpc-http-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("下载代码失败")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},le={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#21A3F1"},attrs:{href:"https://go-sponge.com/zh/guide/grpc-http/based-on-protobuf.html",target:"_blank"}},[e._v("基于 protobuf 创建 gRPC+HTTP 服务")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          —— 生成支持 gRPC 和 HTTP 协议的通用微服务代码")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto 文件",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("查看 protobuf 文件示例")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("选择 proto 文件")]),e._v("，支持多文件。\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-server 🡆 your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module 名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod 文件的 module 名称。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果名称包括大写字母，会转换为小写，并用中划线分隔，"),o("br"),e._v("\n              示例：yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker 镜像仓库"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              docker 镜像仓库地址，默认值是"),o("b",[e._v("image-repo-host")]),e._v("，这个参数"),o("br"),e._v("\n              用在构建 docker 镜像、k8s 的部署脚本上，如果使用 docker 官方"),o("br"),e._v("\n              镜像仓库，只需填写注册 docker 仓库的用户名。如果使用私有仓"),o("br"),e._v("\n              库地址，需要填写完整仓库地址。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("或"),o("b",[e._v("微服务多"),o("br"),e._v("\n                仓库(multi-repo)")]),e._v("类型的服务代码，即使把多个服务代码放在一个"),o("br"),e._v("\n              git 仓库下，不同服务代码之间不可复用。"),o("br"),e._v("点击查看"),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("目录结构示例")]),e._v("。"),o("br"),o("br"),e._v("\n              如果开启，表示生成适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),e._v("类型的服务"),o("br"),e._v("\n              代码，多个服务代码放在一个 git 仓库下，不同服务之间的代码可以"),o("br"),e._v("\n              复用。如果后面在页面生成的模块代码移动到此服务，也需要开启"),o("br"),e._v("这个选项。"),o("br"),e._v("\n              点击查看"),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("目录结构示例")]),e._v("。\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var ae=o("VU/8")(ie,le,!1,function(e){o("dvqj")},"data-v-745b6c2a",null).exports,se={name:"MicroRPCGwPb",data:function(){return{title:"",path:"micro-rpc-gw-pb",helpInfo:'\n      <p><b>基于 protobuf 创建的 gRPC 网关服务</b> 生成了用于把 http 请求转换为 gRPC 请求的服务代码，更多开发细节，请参考 <a href="https://go-sponge.com/zh/guide/grpc-gateway/based-on-protobuf.html" target="_blank">开发指南</a>。</p>\n      <br />\n      <p>1. 解压文件。</p>\n      <p>2. 打开终端，执行命令生成代码：<b style="color: green">make proto</b></p>\n      <p>3. 打开文件 <span style="color: chocolate">internal/service/xxx.go</span>, 根据模板代码示例填充代码替换 <span style="color: chocolate">panic("implement me")</span></p>\n      <p>4. 编译和运行服务：<b style="color: green">make run</b></p>\n      <p>5. 复制 <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> 到浏览器测试 api。</p>\n      <br />\n      <p>技术栈：<b>Go、Gin、Protobuf、Zap、Prometheus、OpenTracing</b> 等。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"请输入 go module 名称",trigger:"blur"}],serverName:[{required:!0,message:"请输入服务名称",trigger:"blur"}],projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],protobufFile:[{required:!0,message:"请选择 proto 文件",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\n// 第一个 user 是 go module 名称，第二个 user 是服务名称，v1是版本号\noption go_package = "user/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // Login 登录注释\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "登录",\n      description: "使用邮箱登录",\n    };\n  }\n\n  // 注意：下面两类 rpc 会被忽略生成 http 相关代码\n  //    1. 在 rpc 没有设置 google.api.http，例如 SayHi\n  //    2. rpc 属于 stream 类型，例如 ClientSteam、ServerSteam、BidiSteam\n\n  //rpc SayHi(HelloRequest) returns (HelloReply) {}\n  //rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  //rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  //rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro rpc-gw-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("下载代码失败")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},ne={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#CF40FF"},attrs:{href:"https://go-sponge.com/zh/guide/grpc-gateway/based-on-protobuf.html",target:"_blank"}},[e._v("基于 protobuf 创建 gRPC 网关服务")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("—— 生成 gRPC 网关服务代码")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto 文件",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("查看 protobuf 文件示例")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("选择 proto 文件")]),e._v("，支持多文件。\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"服务名称",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              如果名称包括中划线"-"，会转换为下划线"_"，'),o("br"),e._v("\n              示例：your-server 🡆 your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module 名称",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod 文件的 module 名称。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果名称包括大写字母，会转换为小写，并用中划线分隔，"),o("br"),e._v("\n              示例：yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker 镜像仓库"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              docker 镜像仓库地址，默认值是"),o("b",[e._v("image-repo-host")]),e._v("，这个参数"),o("br"),e._v("\n              用在构建 docker 镜像、k8s 的部署脚本上，如果使用 docker 官方"),o("br"),e._v("\n              镜像仓库，只需填写注册 docker 仓库的用户名。如果使用私有仓"),o("br"),e._v("\n              库地址，需要填写完整仓库地址。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"大仓库类型"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              默认关闭，表示生成适合"),o("b",[e._v("单体应用单仓库(monolith)")]),e._v("或"),o("b",[e._v("微服务多"),o("br"),e._v("\n                仓库(multi-repo)")]),e._v("类型的服务代码，即使把多个服务代码放在一个"),o("br"),e._v("\n              git 仓库下，不同服务代码之间不可复用。"),o("br"),e._v("点击查看"),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("目录结构示例")]),e._v("。"),o("br"),o("br"),e._v("\n              如果开启，表示生成适合"),o("b",[e._v("微服务单仓库(mono-repo)")]),e._v("类型的服务"),o("br"),e._v("\n              代码，多个服务代码放在一个 git 仓库下，不同服务之间的代码可以"),o("br"),e._v("\n              复用。如果后面在页面生成的模块代码移动到此服务，也需要开启"),o("br"),e._v("这个选项。"),o("br"),e._v("\n              点击查看"),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("目录结构示例")]),e._v("。\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var de=o("VU/8")(se,ne,!1,function(e){o("pRqx")},"data-v-859c173a",null).exports,ce={name:"YamlConfig",data:function(){return{title:"生成 configuration 代码",path:"yaml-config",helpInfo:"\n      <p>把 yaml 配置转为 go struct，并包含读取 yaml 配置的代码。</p>\n      <br />\n      <p>解压文件，将文件夹<b>internal</b>移动到项目代码文件夹下，如果配置文件已经存在，则替换它。</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{yamlFile:""},rules:{yamlFile:[{required:!0,message:"请选择 yaml 文件",trigger:"change"}]}}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){0==t.data.code&&(e.ruleForm.yamlFile="")}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="config --yaml-file="+e.data.data;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("下载代码失败")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.yamlFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("yamlFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.yamlFile="",this.$refs.ruleForm.validateField("yamlFile"))},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},me={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"30%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"yaml 文件",prop:"yamlFile"}},[o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",accept:".yaml,.yml",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("点击选择 yaml 文件")]),e._v("\n              或将文件拖到此处\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var pe=o("VU/8")(ce,me,!1,function(e){o("s0Bq")},"data-v-16a9e22a",null).exports,ue={name:"CustomTplField",data:function(){return{title:"",path:"custom-tpl-field",helpInfo:'\n      <p>基于 json 和自定义模板生成代码，更多开发细节，请参考 <a href="https://go-sponge.com/zh/guide/customize/template-json.html" target="_blank">开发指南</a>。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,isShowingInfo:!1,fileList:[],ruleForm:{templateDir:"",jsonFile:""},rules:{templateDir:[{required:!0,message:"请输入模板代码所在的目录绝对路径",trigger:"blur"}],jsonFile:[{required:!0,message:"请选择 json 文件",trigger:"change"}]},showTplInfoDialogVisible:!1,tplContent:""}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.templateDir=o.data.templateDir,""!==o.data.fields&&(e.ruleForm.jsonFile=o.data.fields,e.fileList.push({name:o.data.fields.split("/").pop(),raw:o.data.fields,status:"fromRecord"})))}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(1!==t.fileList.length||"fromRecord"!==t.fileList[0].status){var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){0==e.data.code?t.downloadZipCode(e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("下载代码失败")})}else t.downloadZipCode(t.fileList[0].raw)})},showTemplateInfo:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(1!==t.fileList.length||"fromRecord"!==t.fileList[0].status){var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){0==e.data.code?t.getTemplateInfo(e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("获取模板信息失败")})}else t.getTemplateInfo(t.fileList[0].raw)})},downloadZipCode:function(e){var t=appConfig.spongeServiceAddr+"/generate",o="template field --tpl-dir="+this.ruleForm.templateDir+" --fields="+e;this.$refs.downloadCode.execution(t,this.path,o,this.helpInfo)},getTemplateInfo:function(e){var t=this;this.updateIsShowingInfo(!0);var o=appConfig.spongeServiceAddr+"/getTemplateInfo",r="template field --tpl-dir="+this.ruleForm.templateDir+" --fields="+e+" --only-print=true",i={path:this.path,arg:r};m.a.post(o,i).then(function(e){t.updateIsShowingInfo(!1),0==e.data.code?(t.tplContent=e.data.data,t.showTplInfoDialogVisible=!0):t.$message.error(e.data.msg)}).catch(function(e){t.updateIsShowingInfo(!1),t.$message.error(e.response.data.msg)})},updateIsDownloading:function(e){this.isDownloading=e},updateIsShowingInfo:function(e){this.isShowingInfo=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.jsonFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("jsonFile"),t.length>1&&(this.fileList=t.slice(-1))},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.jsonFile="",this.$refs.ruleForm.validateField("jsonFile"))},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},ve={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#F25126"},attrs:{href:"https://go-sponge.com/zh/guide/customize/template-json.html",target:"_blank"}},[e._v("基于 json 和自定义模板生成代码")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"自定义模板目录",prop:"templateDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.templateDir,callback:function(t){e.$set(e.ruleForm,"templateDir","string"==typeof t?t.trim():t)},expression:"ruleForm.templateDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              自定义模板代码所在文件夹的绝对路径。"),o("br"),e._v("\n              windows 环境示例：D:\\tmp\\template-dir"),o("br"),e._v("\n              linux 环境示例：/tmp/template-dir\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"自定义字段",prop:"jsonFile"}},[o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",accept:".json",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("选择 json 文件")]),e._v("，仅限一个文件。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{"margin-bottom":"50px"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{size:"default",disabled:e.isShowingInfo,loading:e.isShowingInfo},on:{click:function(t){return e.showTemplateInfo("ruleForm")}}},[e._v("查看模板信息")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"模板信息",visible:e.showTplInfoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showTplInfoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.tplContent,callback:function(t){e.tplContent=t},expression:"tplContent"}})],1)],1)],1)},staticRenderFns:[]};var fe=o("VU/8")(ue,ve,!1,function(e){o("dqU9")},"data-v-3515ea7e",null).exports,he={name:"WebModel",data:function(){return{title:"",path:"custom-tpl-sql",helpInfo:'\n      <p>基于 sql、自定义的模板生成代码，更多开发细节，请参考 <a href="https://go-sponge.com/zh/guide/customize/template-sql.html" target="_blank">开发指南</a>。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,isShowingInfo:!1,fileList:[],ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",templateDir:"",jsonFile:""},rules:{dsnAddr:[{required:!0,message:"请输入数据源 dsn",trigger:"blur"}],tableName:[{required:!0,message:"请选择表名",trigger:"change"}],dbDriver:[{required:!0,message:"请选择数据库类型",trigger:"blur"}],templateDir:[{required:!0,message:"请输入模板代码所在的目录绝对路径",trigger:"blur"}]},showTplInfoDialogVisible:!1,tplContent:"",tplFileNameExample:"{{.TableName}}.go.tmpl",tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.listTables(!1),""!==o.data.fields&&(e.ruleForm.jsonFile=o.data.fields,e.fileList.push({name:o.data.fields.split("/").pop(),raw:o.data.fields,status:"fromRecord"})),e.ruleForm.templateDir=o.data.templateDir)}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(0!==t.fileList.length)if(1!==t.fileList.length||"fromRecord"!==t.fileList[0].status){var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){0==e.data.code?t.downloadZipCode(e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("下载代码失败")})}else t.downloadZipCode(t.fileList[0].raw);else t.downloadZipCode("")})},showTemplateInfo:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(0!==t.fileList.length)if(1!==t.fileList.length||"fromRecord"!==t.fileList[0].status){var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){0==e.data.code?t.getTemplateInfo(e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("获取模板信息失败")})}else t.getTemplateInfo(t.fileList[0].raw);else t.getTemplateInfo("")})},downloadZipCode:function(e){var t=appConfig.spongeServiceAddr+"/generate",o=this.ruleForm.tableName.join(","),r="template sql --db-driver="+this.ruleForm.dbDriver+" --db-dsn="+this.ruleForm.dsnAddr+" --db-table="+o+" --tpl-dir="+this.ruleForm.templateDir+" --fields="+e;this.$refs.downloadCode.execution(t,this.path,r,this.helpInfo)},getTemplateInfo:function(e){var t=this;this.updateIsShowingInfo(!0);var o=appConfig.spongeServiceAddr+"/getTemplateInfo",r=this.ruleForm.tableName.join(","),i="template sql --db-driver="+this.ruleForm.dbDriver+" --db-dsn="+this.ruleForm.dsnAddr+" --db-table="+r+" --tpl-dir="+this.ruleForm.templateDir+" --fields="+e+" --only-print=true",l={path:this.path,arg:i};m.a.post(o,l).then(function(e){t.updateIsShowingInfo(!1),0==e.data.code?(t.tplContent=e.data.data,t.showTplInfoDialogVisible=!0):t.$message.error(e.data.msg)}).catch(function(e){t.updateIsShowingInfo(!1),t.$message.error(e.response.data.msg)})},updateIsDownloading:function(e){this.isDownloading=e},updateIsShowingInfo:function(e){this.isShowingInfo=e},clearFormData:function(){this.tableNames=[],this.fileList=[],this.ruleForm={tableName:[]}},handleOnchange:function(e,t){this.ruleForm.jsonFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("jsonFile"),t.length>1&&(this.fileList=t.slice(-1))},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.jsonFile="",this.$refs.ruleForm.validateField("jsonFile"))},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("获取表名成功"):t.$message.error("获取表名失败，"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("获取表名失败，请检查"+t.ruleForm.dbDriver+" dsn 地址是否正确、或者"+t.ruleForm.dbDriver+"服务是否运行。")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate()},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},be={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#00BFFF"},attrs:{href:"https://go-sponge.com/zh/guide/customize/template-sql.html",target:"_blank"}},[e._v("基于 sql 和自定义模板生成代码")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"数据库类型",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择数据库类型",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"数据库 dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果数据库是"),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v("、"),o("b",[e._v("postgresql")]),e._v("，填写\n              dsn 地址，"),o("br"),e._v("\n              dsn 格式："),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              注意：user 和 password 不能包含特殊字符 "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              mongodb 的 dsn 支持 SRV 记录，格式为："),o("br"),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              postgresql 的 dsn 支持指定 schema，在 dsn 后添加参数示例："),o("br"),e._v(" "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              如果数据库是"),o("b",[e._v("sqlite")]),e._v("，填写 sqlite db 文件本地绝对路径，"),o("br"),e._v("\n              示例："),o("b",[e._v("/tmp/test.db")]),e._v(" 或 "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("获取表名")])],1),e._v(" "),o("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择表名，支持多选",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("全选")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"自定义模板目录",prop:"templateDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.templateDir,callback:function(t){e.$set(e.ruleForm,"templateDir","string"==typeof t?t.trim():t)},expression:"ruleForm.templateDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              自定义模板代码所在文件夹的绝对路径。"),o("br"),e._v("\n              windows 环境示例：D:\\tmp\\template-dir"),o("br"),e._v("\n              linux 环境示例：/tmp/template-dir"),o("br"),o("br"),e._v("\n              注意：如果选择了多个表名，目录下的所有"),o("br"),e._v("\n              模板文件名必须使用表名。"),o("br"),e._v("\n              示例："),o("b",[e._v(e._s(e.tplFileNameExample))])])])],1),e._v(" "),o("el-form-item",{attrs:{label:"自定义字段",prop:"jsonFile"}},[o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",accept:".json",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("选择 json 文件")]),e._v("，仅限一个文件。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{"margin-bottom":"50px"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{size:"default",disabled:e.isShowingInfo,loading:e.isShowingInfo},on:{click:function(t){return e.showTemplateInfo("ruleForm")}}},[e._v("查看模板信息")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"模板信息",visible:e.showTplInfoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showTplInfoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.tplContent,callback:function(t){e.tplContent=t},expression:"tplContent"}})],1)],1)],1)},staticRenderFns:[]};var ge=o("VU/8")(he,be,!1,function(e){o("IWyD")},"data-v-0357c859",null).exports,_e={name:"CustomTplProtobuf",data:function(){return{title:"",path:"custom-tpl-protobuf",helpInfo:'\n      <p>根据 protobuf、json、自定义模板生成代码，更多开发细节，请参考 <a href="https://go-sponge.com/zh/guide/customize/template-protobuf.html" target="_blank">开发指南</a>。</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,isShowingInfo:!1,protoFileList:[],fileList:[],ruleForm:{protobufFile:"",depProtoDir:"",templateDir:"",jsonFile:""},rules:{protobufFile:[{required:!0,message:"请选择 proto 文件",trigger:"change"}],templateDir:[{required:!0,message:"请输入模板代码所在的目录绝对路径",trigger:"blur"}]},showTplInfoDialogVisible:!1,tplContent:"",tplFileNameExample:"{{.Proto.FileNamePrefix}}.go.tmpl"}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.protobufFile="",e.ruleForm.depProtoDir=o.data.depProtoDir,e.ruleForm.templateDir=o.data.templateDir,""!==o.data.fields&&(e.ruleForm.jsonFile=o.data.fields,e.fileList.push({name:o.data.fields.split("/").pop(),raw:o.data.fields,status:"fromRecord"})))}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.protoFileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=e.data.data;if(1===t.fileList.length)if("fromRecord"===t.fileList[0].status)t.downloadZipCode(o,t.fileList[0].raw);else{var r=new FormData;t.fileList.forEach(function(e){r.append("files",e.raw)});var i=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(i,r).then(function(e){0==e.data.code?t.downloadZipCode(o,e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("下载代码失败")})}else t.downloadZipCode(o,"")}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("下载代码失败")})})},showTemplateInfo:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.protoFileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=e.data.data;if(1===t.fileList.length)if("fromRecord"===t.fileList[0].status)t.getTemplateInfo(o,t.fileList[0].raw);else{var r=new FormData;t.fileList.forEach(function(e){r.append("files",e.raw)});var i=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(i,r).then(function(e){0==e.data.code?t.getTemplateInfo(o,e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("下载代码失败")})}else t.getTemplateInfo(o,"")}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("下载代码失败")})})},downloadZipCode:function(e,t){var o=appConfig.spongeServiceAddr+"/generate",r="template protobuf --protobuf-file="+e+" --dep-proto-dir="+this.ruleForm.depProtoDir+" --tpl-dir="+this.ruleForm.templateDir+" --fields="+t;this.$refs.downloadCode.execution(o,this.path,r,this.helpInfo)},getTemplateInfo:function(e,t){var o=this;this.updateIsShowingInfo(!0);var r=appConfig.spongeServiceAddr+"/getTemplateInfo",i="template protobuf --protobuf-file="+e+" --dep-proto-dir="+this.ruleForm.depProtoDir+" --tpl-dir="+this.ruleForm.templateDir+" --fields="+t+" --only-print=true",l={path:this.path,arg:i};m.a.post(r,l).then(function(e){o.updateIsShowingInfo(!1),0==e.data.code?(o.tplContent=e.data.data,o.showTplInfoDialogVisible=!0):o.$message.error(e.data.msg)}).catch(function(e){o.updateIsShowingInfo(!1),o.$message.error(e.response.data.msg)})},updateIsDownloading:function(e){this.isDownloading=e},updateIsShowingInfo:function(e){this.isShowingInfo=e},clearFormData:function(){this.protoFileList=[],this.fileList=[],this.ruleForm={}},handleProtoOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.protoFileList=t,0!==this.protoFileList.length&&this.$refs.ruleForm.validateField("protobufFile")},handleProtoOnRemove:function(e,t){this.protoFileList=t,0===this.protoFileList.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},handleOnchange:function(e,t){this.ruleForm.jsonFile=e.name,this.fileList=t,t.length>1&&(this.fileList=t.slice(-1))},handleOnRemove:function(e,t){this.fileList=t,0===this.fileList.length&&(this.ruleForm.jsonFile="")},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},we={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#32CD32"},attrs:{href:"https://go-sponge.com/zh/guide/customize/template-protobuf.html",target:"_blank"}},[e._v("基于 protobuf 和自定义模板生成代码")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"自定义模板目录",prop:"templateDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.templateDir,callback:function(t){e.$set(e.ruleForm,"templateDir","string"==typeof t?t.trim():t)},expression:"ruleForm.templateDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              自定义模板代码所在文件夹的绝对路径。"),o("br"),e._v("\n              windows 环境示例：D:\\tmp\\template-dir"),o("br"),e._v("\n              linux 环境示例：/tmp/template-dir"),o("br"),o("br"),e._v("\n              注意：如果选择了多个 proto 文件，目录下的所有"),o("br"),e._v("\n              模板文件名必须使用 proto 文件名。"),o("br"),e._v("\n              示例："),o("b",[e._v(e._s(e.tplFileNameExample))])])])],1),e._v(" "),o("el-form-item",{attrs:{label:"proto 文件",prop:"protobufFile"}},[o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleProtoOnchange,"on-remove":e.handleProtoOnRemove,"file-list":e.protoFileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("选择 proto 文件")]),e._v("，支持多文件。\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"依赖 proto 文件目录",prop:"depProtoDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.depProtoDir,callback:function(t){e.$set(e.ruleForm,"depProtoDir","string"==typeof t?t.trim():t)},expression:"ruleForm.depProtoDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              依赖的 proto 文件所在文件夹的绝对路径，例如 a.proto"),o("br"),e._v("\n              依赖 b.proto，则把 b.proto 文件放到该文件夹下。"),o("br"),e._v("\n              windows 环境示例：D:\\tmp\\dep-proto-dir"),o("br"),e._v("\n              linux 环境示例：/tmp/dep-proto-dir\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"自定义字段",prop:"jsonFile"}},[o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",accept:".json",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("选择 json 文件")]),e._v("，仅限一个文件。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{"margin-bottom":"50px"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{size:"default",disabled:e.isShowingInfo,loading:e.isShowingInfo},on:{click:function(t){return e.showTemplateInfo("ruleForm")}}},[e._v("查看模板信息")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下载代码")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"模板信息",visible:e.showTplInfoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showTplInfoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.tplContent,callback:function(t){e.tplContent=t},expression:"tplContent"}})],1)],1)],1)},staticRenderFns:[]};var Fe=o("VU/8")(_e,we,!1,function(e){o("PkeA")},"data-v-6a6a44b2",null).exports,ye={name:"AssistantGenerate",data:function(){return{title:"AI 助手基于函数及注释生成代码",path:"assistant-generate",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,showPassword:!1,isShowingInfo:!1,responseContent:"",showResultDialogVisible:!1,isShowResultBtn:!1,ruleForm:{llmType:"",llmModel:"",apiKey:"",goDir:"",goFile:"",isSpecifiedGoFile:!1},rules:{llmType:[{required:!0,message:"请选择大语言类型",trigger:"blur"}],llmModel:[{required:!0,message:"请选择模型",trigger:"blur"}],apiKey:[{required:!0,message:"请输入 API Key",trigger:"blur"}],goDir:[{required:!0,message:"请输入工作目录",trigger:"blur"}],goFile:[{required:!0,message:"请输入 Go 文件路径",trigger:"blur"}]},llmTypeOptions:[{label:"depseek",value:"deepseek"},{label:"hatgpt",value:"chatgpt"},{label:"gemini",value:"gemini"}],llmModelOptions:[],allLLMOptions:{deepseek:[{label:"deepseek-chat",value:"deepseek-chat"},{label:"deepseek-reasoner",value:"deepseek-reasoner"}],chatgpt:[{label:"gpt-4o",value:"gpt-4o"},{label:"gpt-4o-mini",value:"gpt-4o-mini"},{label:"gpt-4-turbo",value:"gpt-4-turbo"},{label:"gpt-4",value:"gpt-4"},{label:"o1-mini",value:"o1-mini"},{label:"o1-preview",value:"o1-preview"}],gemini:[{label:"gemini-2.5-pro-exp-03-25",value:"gemini-2.5-pro-exp-03-25"},{label:"gemini-2.0-flash",value:"gemini-2.0-flash"},{label:"gemini-2.0-flash-thinking-exp",value:"gemini-2.0-flash-thinking-exp"},{label:"gemini-2.0-pro-exp",value:"gemini-2.0-pro-exp"}]}}},created:function(){var e=this;this.adaptiveWindows(),this.listLLM();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.llmType=o.data.llmType,e.ruleForm.llmModel=o.data.llmModel,e.ruleForm.apiKey=o.data.apiKey,e.ruleForm.goDir=o.data.goDir,e.ruleForm.goFile=o.data.goFile,e.ruleForm.isSpecifiedGoFile=o.data.isSpecifiedGoFile,e.selectChangeLLMType(e.ruleForm.llmType))}).catch(function(e){})},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.updateIsShowingInfo(!0);var o=appConfig.spongeServiceAddr+"/assistant",r="";r=t.ruleForm.isSpecifiedGoFile?"assistant generate --type="+t.ruleForm.llmType+" --model="+t.ruleForm.llmModel+" --api-key="+t.ruleForm.apiKey+" --file="+t.ruleForm.goFile:"assistant generate --type="+t.ruleForm.llmType+" --model="+t.ruleForm.llmModel+" --api-key="+t.ruleForm.apiKey+" --dir="+t.ruleForm.goDir;var i={path:t.path,arg:r};m.a.post(o,i).then(function(e){t.updateIsShowingInfo(!1),0==e.data.code?(t.responseContent=e.data.data,t.showResultDialogVisible=!0,t.isShowResultBtn=!0):t.$message.error(e.data.msg)}).catch(function(e){t.updateIsShowingInfo(!1),t.$message.error(e.response.data.msg)})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.ruleForm={}},listLLM:function(){var e=this,t=appConfig.spongeServiceAddr+"/listLLM";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.llmTypeOptions=o.data.llmTypeOptions,e.allLLMOptions=o.data.allLLMOptions)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){this.value=e,this.$forceUpdate()},selectChangeLLMType:function(e){this.value=e,this.llmModelOptions=this.allLLMOptions[e]||[],this.llmModelOptions.length>0&&(this.ruleForm.llmModel=this.llmModelOptions[0].value),this.$forceUpdate()},togglePassword:function(){this.showPassword=!this.showPassword},updateIsShowingInfo:function(e){this.isShowingInfo=e},showResult:function(){this.showResultDialogVisible=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Ce={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#00AEB1"},attrs:{href:"https://go-sponge.com/zh/guide/ai/assistant.html#生成代码",target:"_blank"}},[e._v(e._s(e.title))])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"大语言类型",prop:"llmType"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择大语言类型",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeLLMType},model:{value:e.ruleForm.llmType,callback:function(t){e.$set(e.ruleForm,"llmType",t)},expression:"ruleForm.llmType"}},e._l(e.llmTypeOptions,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              注：国外的大语言类型需要开启网络代理。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"模型",prop:"llmModel"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择模型",filterable:"","allow-create":"",clearable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.llmModel,callback:function(t){e.$set(e.ruleForm,"llmModel",t)},expression:"ruleForm.llmModel"}},e._l(e.llmModelOptions,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              支持手动输入或选择已有模型。\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"api key",prop:"apiKey"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{type:e.showPassword?"text":"password",placeholder:"与大语言类型对应的 api key"},scopedSlots:e._u([{key:"append",fn:function(){return[o("el-button",{attrs:{icon:(e.showPassword,"el-icon-view")},on:{click:e.togglePassword}})]},proxy:!0}]),model:{value:e.ruleForm.apiKey,callback:function(t){e.$set(e.ruleForm,"apiKey","string"==typeof t?t.trim():t)},expression:"ruleForm.apiKey"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              填写大语言类型对应的 API Key，用于调用相应的服务。\n            ")])])],1),e._v(" "),e.ruleForm.isSpecifiedGoFile?e._e():o("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"工作目录",prop:"goDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请输入工作目录"},model:{value:e.ruleForm.goDir,callback:function(t){e.$set(e.ruleForm,"goDir","string"==typeof t?t.trim():t)},expression:"ruleForm.goDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Go 项目代码所在文件夹的绝对路径。"),o("br"),e._v("\n              windows 环境示例：D:\\project\\dir"),o("br"),e._v("\n              linux 环境示例：/project/dir"),o("br")])])],1),e._v(" "),e.ruleForm.isSpecifiedGoFile?o("el-form-item",{attrs:{label:"Go 文件",prop:"goFile"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请输入 Go 文件路径"},model:{value:e.ruleForm.goFile,callback:function(t){e.$set(e.ruleForm,"goFile","string"==typeof t?t.trim():t)},expression:"ruleForm.goFile"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              指定 Go 文件的绝对路径，"),o("br"),e._v("\n              windows 环境示例：D:\\project\\dir\\main.go"),o("br"),e._v("\n              linux 环境示例：/project/dir/main.go"),o("br")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"指定 Go 文件"}},[o("el-switch",{model:{value:e.ruleForm.isSpecifiedGoFile,callback:function(t){e.$set(e.ruleForm,"isSpecifiedGoFile",t)},expression:"ruleForm.isSpecifiedGoFile"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              如果指定了 Go 文件，工作目录将被忽略。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isShowingInfo,loading:e.isShowingInfo},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("生成代码")]),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowResultBtn,expression:"isShowResultBtn"}],attrs:{size:"default"},on:{click:e.showResult}},[e._v("查看结果")])],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"执行结果",visible:e.showResultDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showResultDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.responseContent,callback:function(t){e.responseContent=t},expression:"responseContent"}})],1)],1)],1)},staticRenderFns:[]};var De=o("VU/8")(ye,Ce,!1,function(e){o("nlr7")},"data-v-03a9f8ec",null).exports,Se={name:"AssistantMerge",data:function(){return{title:"把 AI 助手生成的代码合并到对应 Go 代码文件",path:"assistant-merge",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowingInfo:!1,responseContent:"",showResultDialogVisible:!1,isShowResultBtn:!1,ruleForm:{llmType:"",goDir:"",isClean:!0},rules:{llmType:[{required:!0,message:"请选择大语言类型",trigger:"blur"}],goDir:[{required:!0,message:"请输入工作目录",trigger:"blur"}]},llmTypeOptions:[{label:"depseek",value:"deepseek"},{label:"hatgpt",value:"chatgpt"},{label:"gemini",value:"gemini"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listLLM();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.llmType=o.data.llmType,e.ruleForm.goDir=o.data.goDir)}).catch(function(e){})},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.updateIsShowingInfo(!0);var o=appConfig.spongeServiceAddr+"/assistant",r="assistant merge --type="+t.ruleForm.llmType+" --dir="+t.ruleForm.goDir+" --is-clean="+t.ruleForm.isClean,i={path:t.path,arg:r};m.a.post(o,i).then(function(e){t.updateIsShowingInfo(!1),0==e.data.code?(t.responseContent=e.data.data,t.showResultDialogVisible=!0,t.isShowResultBtn=!0):t.$message.error(e.data.msg)}).catch(function(e){t.updateIsShowingInfo(!1),t.$message.error(e.response.data.msg)})})},clearFormData:function(){this.ruleForm={}},listLLM:function(){var e=this,t=appConfig.spongeServiceAddr+"/listLLM";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.llmTypeOptions=o.data.llmTypeOptions,e.allLLMOptions=o.data.allLLMOptions)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){this.value=e,this.$forceUpdate()},selectChangeLLMType:function(e){this.value=e,this.$forceUpdate()},updateIsShowingInfo:function(e){this.isShowingInfo=e},showResult:function(){this.showResultDialogVisible=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},xe={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#4169E1"},attrs:{href:"https://go-sponge.com/zh/guide/ai/assistant.html#合并代码",target:"_blank"}},[e._v(e._s(e.title))])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"大语言类型",prop:"llmType"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"请选择大语言类型",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeLLMType},model:{value:e.ruleForm.llmType,callback:function(t){e.$set(e.ruleForm,"llmType",t)},expression:"ruleForm.llmType"}},e._l(e.llmTypeOptions,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              合并指定大语言类型生成的代码。\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"工作目录",prop:"goDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.goDir,callback:function(t){e.$set(e.ruleForm,"goDir","string"==typeof t?t.trim():t)},expression:"ruleForm.goDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Go 项目代码所在文件夹的绝对路径。"),o("br"),e._v("\n              windows 环境示例：D:\\project\\dir"),o("br"),e._v("\n              linux 环境示例：/project/dir"),o("br")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"清除 AI 代码"}},[o("el-switch",{model:{value:e.ruleForm.isClean,callback:function(t){e.$set(e.ruleForm,"isClean",t)},expression:"ruleForm.isClean"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              合并代码之后，清除 AI 助手生成的代码。\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("重置")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isShowingInfo,loading:e.isShowingInfo},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("合并代码")]),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowResultBtn,expression:"isShowResultBtn"}],attrs:{size:"default"},on:{click:e.showResult}},[e._v("查看结果")])],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"执行结果",visible:e.showResultDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showResultDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.responseContent,callback:function(t){e.responseContent=t},expression:"responseContent"}})],1)],1)],1)},staticRenderFns:[]};var Ne=o("VU/8")(Se,xe,!1,function(e){o("s7/z")},"data-v-7ee4401c",null).exports,ke={name:"Home",data:function(){return{homeImageSrc:o("X4KW"),homeTplImageSrc:o("SOJA"),homeAssistantImageSrc:o("XkHf")}}},Re={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:18,offset:3}},[o("p",{staticStyle:{"margin-bottom":"30px","line-height":"150%"}},[e._v('\n      Sponge is a powerful and easy-to-use Go development framework. Its core\n      philosophy is "Definition is Code". It generates modular Go code by\n      parsing SQL, Protobuf, and JSON files. These code modules can be\n      flexibly combined to build various types of complete backend services.\n      Sponge provides a one-stop project development solution, covering code\n      generation, development, testing, API documentation, and deployment. It\n      helps developers easily build stable and reliable high-performance\n      backend services.\n    ')]),e._v(" "),o("p",[e._v("\n      Github Repository:\n      "),o("a",{attrs:{href:"https://github.com/go-dev-frame/sponge",target:"_blank"}},[e._v("https://github.com/go-dev-frame/sponge")])]),e._v(" "),o("p",[e._v("\n      Development Documentation:\n      "),o("a",{attrs:{href:"https://go-sponge.com",target:"_blank"}},[e._v("https://go-sponge.com")])]),e._v(" "),o("br"),e._v(" "),o("p",[o("b",[e._v("\n        Sponge code generation engine.\n      ")])]),e._v(" "),o("p",[o("b",[e._v("1.")]),e._v(" The code generation framework based on built-in templates, as\n      shown in the following figure:\n    ")]),e._v(" "),o("div",{staticClass:"home-image"},[o("el-image",{attrs:{src:e.homeImageSrc}})],1),e._v(" "),o("br"),e._v(" "),o("p",[o("b",[e._v("2.")]),e._v(" Sponge generates code framework based on custom templates, as\n      shown in the following figure:\n    ")]),e._v(" "),o("div",{staticClass:"framework-image"},[o("el-image",{attrs:{src:e.homeTplImageSrc}})],1),e._v(" "),o("br"),e._v(" "),o("p",[o("b",[e._v("3.")]),e._v(" sponge generates a business logic code framework based on\n      functions and comments, as shown in the following figure:\n    ")]),e._v(" "),o("div",{staticClass:"framework-image"},[o("el-image",{attrs:{src:e.homeAssistantImageSrc}})],1),e._v(" "),o("br"),e._v(" "),o("p")])],1)},staticRenderFns:[]};var Ae=o("VU/8")(ke,Re,!1,function(e){o("Gmoc")},null,null).exports,ze={name:"DownloadCode",data:function(){return{downloadStatusDialogVisible:!1,dialogContent:""}},methods:{execution:function(e,t,o,r){var i=this,l={path:t,arg:o};this.$emit("update-is-downloading",!0),m.a.post(e,l,{responseType:"blob"}).then(function(e){var t=e.data,o=e.headers,l=o["content-disposition"],a=new Blob([t],{type:o["content-type"]}),s=document.createElement("a"),n=window.URL.createObjectURL(a);s.href=n,s.download=decodeURI(l),s.style.display="none",document.body.appendChild(s),s.click(),s.parentNode.removeChild(s),window.URL.revokeObjectURL(n),i.dialogContent=r,i.downloadStatusDialogVisible=!0,i.$emit("update-is-downloading",!1)}).catch(function(e){console.log(e);var t=e.response.headers;""!=t["err-msg"]?i.$message.error(t["err-msg"]):i.$message.error(e.message),i.$emit("update-is-downloading",!1)})}}},$e={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{staticClass:"helper-dialog",attrs:{title:"Downloaded Successfully",visible:e.downloadStatusDialogVisible,width:"60%",center:""},on:{"update:visible":function(t){e.downloadStatusDialogVisible=t}}},[o("h3",{staticStyle:{"margin-left":"30px"}},[e._v("Help for use:")]),e._v(" "),o("div",{staticStyle:{padding:"10px 30px","font-size":"16px"},domProps:{innerHTML:e._s(e.dialogContent)}})])],1)},staticRenderFns:[]};var qe=o("VU/8")(ze,$e,!1,function(e){o("7O3S")},"data-v-73feaec2",null).exports,Te={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{attrs:{title:"monolithic application repository (monolith)\nor microservice multi-repositories (muti-repo) directory structure",width:"75%",top:"7vh",visible:e.isShowMutiDialog},on:{"update:visible":function(t){e.isShowMutiDialog=t}}},[o("pre",[e._v(e._s(e.mutiRepoText))])]),e._v(" "),o("el-dialog",{attrs:{title:"Microservice monolithic repository directory structure (also known as large repository directory structure)",width:"80%",visible:e.isShowMonoDialog},on:{"update:visible":function(t){e.isShowMonoDialog=t}}},[o("pre",[e._v(e._s(e.monoRepoText))])])],1)},staticRenderFns:[]};var Ie=o("VU/8")({name:"ShowRepoDir",computed:{mutiRepoFormattedText:function(){return this.mutiRepoText.replace(/\n/g,"<br>")}},data:function(){return{isShowMutiDialog:!1,isShowMonoDialog:!1,mutiRepoText:" .\n├── api            # Protobuf files and generated * pb.go directory.\n├── assets         # Store various static resources, such as images, markdown files, etc.\n├── cmd            # Program entry directory.\n├── configs        # Directory for configuration files.\n├── deployments    # Bare metal, docker, k8s deployment script directory.\n├── docs           # Directory for API interface Swagger documentation.\n├── internal       # Directory for project internal code.\n│     ├── cache        # Cache directory wrapped around business logic.\n│     ├── config       # Directory for Go structure configuration files.\n│     ├── dao          # Data access directory.\n│     ├── ecode        # Directory for system error codes and custom business error codes.\n│     ├── handler      # Directory for implementing HTTP business functionality.\n│     ├── model        # Database model directory.\n│     ├── routers      # HTTP routing directory.\n│     ├── rpcclient    # Directory for client-side code that connects to gRPC servers.\n│     ├── server       # Directory for creating servers, including HTTP and gRPC servers.\n│     ├── service      # Directory for implementing gRPC business functionality.\n│     └── types        # Directory for defining request and response parameter structures for HTTP.\n├── pkg            # Directory for shared libraries.\n├── scripts        # Directory for scripts.\n├── test           # Directory for scripts required for testing services  and test SQL.\n├── third_party    # Directory for third-party protobuf files or external helper programs.\n├── Makefile       # Develop, test, deploy related command sets.\n├── go.mod         # Go module dependencies and version control file.\n└── go.sum         # Go module dependencies key and checksum file.\n      ",monoRepoText:" .\n├── api\n│    ├── server1       # Protobuf files and generated *pb.go directory for service 1.\n│    ├── server2       # Protobuf files and generated *pb.go directory for service 2.\n│    ├── server3       # Protobuf files and generated *pb.go directory for service 3.\n│    └── ...\n├── server1        # Code directory for Service 1, it has a similar structure to the microservice multi repo directory.\n├── server2        # Code directory for Service 2, it has a similar structure to the microservice multi repo directory.\n├── server3        # Code directory for Service 3, it has a similar structure to the microservice multi repo directory.\n├── ...\n├── third_party    # Third-party protobuf files.\n├── go.mod         # Go module dependencies and version control file.\n└── go.sum         # Go module dependencies' checksums and hash keys.\n\n"}}},Te,!1,function(e){o("SX+c")},"data-v-54394927",null).exports,Pe={name:"WebHTTP",data:function(){return{title:"",path:"web-http",helpInfo:'\n      <p><b>Create web server based on sql</b> generates the complete web server backend code including the CRUD API, for more development details, please refer to the <a href="https://go-sponge.com/guide/web/based-on-sql.html" target="_blank">Development Guide</a>.</p>\n      <br />\n      <p>1. Unzip the file.</p>\n      <p>2. Open a terminal and execute the command to generate the swagger documentation:   <b style="color: green">make docs</b></p>\n      <p>3. Compile and run server:   <b style="color: green">make run</b></p>\n      <p>4. Visit <a href="http://localhost:8080/swagger/index.html" target="_blank">http://localhost:8080/swagger/index.html</a> in your browser and test the <b>CRUD</b> api.</p>\n      <br />\n      <p>Technology stack: <b>Go, Gin, {{.DBDriver}}, go-redis, Zap, Prometheus, OpenTracing</b>, etc.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",projectName:"",repoAddr:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the server",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:qe,ShowRepoDir:Ie},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="web http --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi,l=t.helpInfo;l="mongodb"===t.ruleForm.dbDriver?l.replace("{{.DBDriver}}","Mongo"):l.replace("{{.DBDriver}}","Gorm"),t.$refs.downloadCode.execution(o,t.path,i,l)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Me={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#ff8040"},attrs:{href:"https://go-sponge.com/guide/web/based-on-sql.html",target:"_blank"}},[e._v("Create web server based on sql")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          — generate complete web server backend code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database type",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v(", "),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              The dsn of mongodb supports SRV records, with the format:"),o("br"),e._v(" "),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              The dsn of postgresql supports the specified schema, example of\n              adding"),o("br"),e._v("\n              parameters after dsn\n              "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file. "),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If you need to add new CRUD code in the future,"),o("br"),e._v("\n              after which you can generate code in the menu"),o("br"),e._v(" "),o("b",[e._v("[Public] -> [Generate Handler CRUD Code]")]),e._v(","),o("br"),e._v("\n              and then moved to the project code.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server 🡆 your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generation of\n              server"),o("br"),e._v("\n              code suitable for a\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(", where\n              even if"),o("br"),e._v("\n              multiple server codes are placed in one git repository, the\n              codes"),o("br"),e._v("\n              between different servers are not reusable."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("directory structure example")]),e._v(". "),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generation of server code\n              suitable"),o("br"),e._v("\n              for a "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),e._v(",\n              where"),o("br"),e._v("\n              multiple server codes are placed in one git repository, and\n              the"),o("br"),e._v("\n              codes between different servers can be reused. If modules\n              code"),o("br"),e._v("\n              generated later on the page are moved to this server, this\n              option"),o("br"),e._v("\n              also needs to be enabled."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("directory structure example")]),e._v(".\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1)])],1)},staticRenderFns:[]};var We=o("VU/8")(Pe,Me,!1,function(e){o("kl2U")},"data-v-3fdffbe8",null).exports,Le={name:"WebHandler",data:function(){return{title:"Generate handler CRUD code",path:"web-handler",helpInfo1:'\n      <p>Generate handler code based on sql, contains CRUD API, supporting paging, filtering and sorting queries, caching.</p>\n      <br />\n      <p>1. Unzip the file, move the folder folders <b>internal</b> to a sql based create web server project code folder.</p>\n      <p>2. Open a terminal and execute the command:  <b style="color: green">make docs</b></p>\n      <p>3. Compile and run servers:   <b style="color: green">make run</b></p>\n      <p>4. Visit <a href="http://localhost:8080/swagger/index.html" target="_blank">http://localhost:8080/swagger/index.html</a> in your browser and test the <b>CRUD</b> api.</p>\n      ',helpInfo2:'\n      <p>Generate protobuf and handler code based on sql, contains CRUD API, supporting paging, filtering and sorting queries, caching.</p>\n      <br />\n      <p>1. Unzip the file, move the folders <b>api</b> and <b>internal</b> to a protobuf based create web server project code folder.</p>\n      <p>2. Open a terminal and execute the command:  <b style="color: green">make proto</b></p>\n      <p>3. Compile and run server:  <b style="color: green">make run</b></p>\n      <p>4. Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser and test the <b>CRUD</b> api.</p>\n      ',helpInfo:"",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",embed:!1,isUseInProtobuf:!1,serverName:"",isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:qe},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="";if(t.ruleForm.isUseInProtobuf){if(""==t.ruleForm.serverName)return t.$message.error("server name cannot be empty"),!1;t.helpInfo=t.helpInfo2,i="web handler-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else{if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("server name cannot be empty"),!1;i="web handler --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else i="web handler --module-name="+t.ruleForm.moduleName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.helpInfo=t.helpInfo1}t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,isUseInProtobuf:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Ee={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database type",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              The dsn of mongodb supports SRV records, with the format:"),o("br"),e._v(" "),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              The dsn of postgresql supports the specified schema, example of\n              adding"),o("br"),e._v("\n              parameters after dsn\n              "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),e.ruleForm.isUseInProtobuf||e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"required field"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              server code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server 🡆 your_server\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" server code directory,"),o("br"),e._v("\n              fill in the module name of the go.mod file"),o("br"),e._v("\n              corresponding to the "),o("b",[e._v("user")]),e._v(" server here.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"protobuf type"}},[o("el-switch",{model:{value:e.ruleForm.isUseInProtobuf,callback:function(t){e.$set(e.ruleForm,"isUseInProtobuf",t)},expression:"ruleForm.isUseInProtobuf"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If it is disable, it means that the generated handler CRUD code\n              is only suitable for"),o("br"),e._v('\n              the project code of "Create web server based on sql".'),o("br"),e._v("\n              If it is enable, it means that the generated handler CRUD code\n              is only suitable for"),o("br"),e._v('\n              the project code of "Create web server based on protobuf".\n            ')])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generated module\n              code"),o("br"),e._v("\n              is only suitable for\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(" type\n              projects."),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generated module code is\n              only"),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),o("br"),e._v("\n              type projects.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var je=o("VU/8")(Le,Ee,!1,function(e){o("z34t")},"data-v-0eb9bd6a",null).exports,Ue={name:"WebCache",data:function(){return{title:"Generate cache code",path:"web-cache",helpInfo:'\n      <p>Generate Key-Value cache (redis) code, for more development details, please refer to the <a href="https://go-sponge.com/guide/module-code/gen-cache.html" target="_blank">Development Guide</a>.</p>\n      <br />\n      <p>Move the folder <b>internal</b> to your project code folder.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{moduleName:"",serverName:"",cacheName:"",prefixKey:"",keyName:"",keyType:"",valueName:"",valueType:"",suitedMonoRepo:!1,isNeedCustomKeyPrefix:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],cacheName:[{required:!0,message:"please type the cache name",trigger:"blur"}],keyName:[{required:!0,message:"please type the key name",trigger:"blur"}],keyType:[{required:!0,message:"please select the go type of key",trigger:"blur"}],valueName:[{required:!0,message:"please type the value name",trigger:"blur"}],valueType:[{required:!0,message:"please select the go type of value",trigger:"blur"}]},keyTypes:[{label:"uint64",value:"uint64"},{label:"string",value:"string"},{label:"int",value:"int"},{label:"int64",value:"int64"}],valueTypes:[{label:"uint64",value:"uint64"},{label:"string",value:"string"},{label:"int",value:"int"},{label:"int64",value:"int64"}]}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName)}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r="";if(""==t.ruleForm.keyType)return t.$message.error("Go type of the key cannot be empty"),!1;if(""==t.ruleForm.valueType)return t.$message.error("Go type of the value cannot be empty"),!1;if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("server name cannot be empty"),!1;r="web cache --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --cache-name="+t.ruleForm.cacheName+" --prefix-key="+t.ruleForm.prefixKey+" --key-name="+t.ruleForm.keyName+" --key-type="+t.ruleForm.keyType+" --value-name="+t.ruleForm.valueName+" --value-type="+t.ruleForm.valueType+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo}else r="web cache --module-name="+t.ruleForm.moduleName+" --cache-name="+t.ruleForm.cacheName+" --prefix-key="+t.ruleForm.prefixKey+" --key-name="+t.ruleForm.keyName+" --key-type="+t.ruleForm.keyType+" --value-name="+t.ruleForm.valueName+" --value-type="+t.ruleForm.valueType+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.ruleForm={}},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){this.value=e,this.$forceUpdate()},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Be={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please type the name of the module"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" server code directory,"),o("br"),e._v("\n              fill in the module name of the go.mod file"),o("br"),e._v("\n              corresponding to the "),o("b",[e._v("user")]),e._v(" server here.\n            ")])])],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"required field"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              server code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server 🡆 your_server\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"cache name",prop:"cacheName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"e.g. userToken"},model:{value:e.ruleForm.cacheName,callback:function(t){e.$set(e.ruleForm,"cacheName","string"==typeof t?t.trim():t)},expression:"ruleForm.cacheName"}})],1),e._v(" "),e.ruleForm.isNeedCustomKeyPrefix?o("el-form-item",{attrs:{label:"cache key prefix",prop:"prefixKey"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"e.g. user:token"},model:{value:e.ruleForm.prefixKey,callback:function(t){e.$set(e.ruleForm,"prefixKey","string"==typeof t?t.trim():t)},expression:"ruleForm.prefixKey"}})],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"key name",prop:"keyName"}},[o("el-input",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"e.g. id"},model:{value:e.ruleForm.keyName,callback:function(t){e.$set(e.ruleForm,"keyName","string"==typeof t?t.trim():t)},expression:"ruleForm.keyName"}}),e._v(" "),o("el-select",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"Go type of key",filterable:"","allow-create":"",clearable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.keyType,callback:function(t){e.$set(e.ruleForm,"keyType",t)},expression:"ruleForm.keyType"}},e._l(e.keyTypes,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"value name",prop:"valueName"}},[o("el-input",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"e.g. token"},model:{value:e.ruleForm.valueName,callback:function(t){e.$set(e.ruleForm,"valueName","string"==typeof t?t.trim():t)},expression:"ruleForm.valueName"}}),e._v(" "),o("el-select",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"Go type of value",filterable:"","allow-create":"",clearable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.valueType,callback:function(t){e.$set(e.ruleForm,"valueType",t)},expression:"ruleForm.valueType"}},e._l(e.valueTypes,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:" custom cache key prefix "}},[o("el-switch",{model:{value:e.ruleForm.isNeedCustomKeyPrefix,callback:function(t){e.$set(e.ruleForm,"isNeedCustomKeyPrefix",t)},expression:"ruleForm.isNeedCustomKeyPrefix"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The default key name stored in the cache service is\n              "),o("b",[e._v("cache name: key value")]),o("br"),o("br"),e._v("\n              If this option is enabled, setting a custom cache key prefix\n              will change the"),o("br"),e._v("key name to\n              "),o("b",[e._v("custom cache key prefix: key value")]),e._v(".\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generated module\n              code"),o("br"),e._v("\n              is only suitable for\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(" type\n              projects."),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generated module code is\n              only"),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),o("br"),e._v("\n              type projects.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var Ge=o("VU/8")(Ue,Be,!1,function(e){o("MenH")},"data-v-131a2647",null).exports,He={name:"WebDao",data:function(){return{title:"Generate DAO CRUD code",path:"web-dao",helpInfo:'\n      <p>Generate DAO code based on table sql, contains CRUD API, arbitrary condition paging query, caching, for more development details, please refer to the <a href="https://go-sponge.com/guide/module-code/gen-dao-crud.html" target="_blank">Development Guide</a>.</p>\n      <br />\n      <p>1. Move the folder <b>internal</b> to your project code folder.</p>\n      <p>2. Invoke DAO code in handler or service.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",includeInitDB:!1,embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.includeInitDB=!1,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:qe},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="";if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("server name cannot be empty"),!1;i="web dao --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --include-init-db="+t.ruleForm.includeInitDB+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else i="web dao --module-name="+t.ruleForm.moduleName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --include-init-db="+t.ruleForm.includeInitDB+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Ve={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database type",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              The dsn of mongodb supports SRV records, with the format:"),o("br"),e._v(" "),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              The dsn of postgresql supports the specified schema, example of\n              adding"),o("br"),e._v("\n              parameters after dsn\n              "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"required field"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              server code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server 🡆 your_server\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" server code directory,"),o("br"),e._v("\n              fill in the module name of the go.mod file"),o("br"),e._v("\n              corresponding to the "),o("b",[e._v("user")]),e._v(" server here.\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generated module\n              code"),o("br"),e._v("\n              is only suitable for\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(" type\n              projects."),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generated module code is\n              only"),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),o("br"),e._v("\n              type projects.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var Oe=o("VU/8")(He,Ve,!1,function(e){o("RbiT")},"data-v-0add3dc4",null).exports,Ke={name:"WebModel",data:function(){return{title:"Generate model code",path:"web-model",helpInfo:"\n      <p>Generate the corresponding go structure based on the table sql.</p>\n      <br />\n      <p>Move the folder <b>internal</b> to your project code folder.</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",embed:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:qe},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="web model --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Ze={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database type",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              The dsn of mongodb supports SRV records, with the format:"),o("br"),e._v(" "),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              The dsn of postgresql supports the specified schema, example of\n              adding"),o("br"),e._v("\n              parameters after dsn\n              "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e()],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var Xe=o("VU/8")(Ke,Ze,!1,function(e){o("gNwP")},"data-v-25df5190",null).exports,Je={name:"MicroRPC",data:function(){return{title:"",path:"micro-rpc",helpInfo:'\n      <p><b>Create gRPC server based on sql</b> generates a complete microservice code including CRUD API, for more development details, please refer to the <a href="https://go-sponge.com/guide/grpc/based-on-sql.html" target="_blank">Development Guide</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open a terminal and execute the command to generate code:  <b style="color: green">make proto</b></p>\n      <p>3. Compile and run server:   <b style="color: green">make run</b></p>\n      <p>4. Open the file using <b>Goland</b> or <b>VSCode</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span>, test or performance test the api.</p>\n      <br />\n      <p>Technology stack: <b>Go, gRPC, {{.DBDriver}}, go-redis, Protobuf, Zap, Prometheus, OpenTracing</b>, etc.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",projectName:"",repoAddr:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the server",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:qe,ShowRepoDir:Ie},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro rpc --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi,l=t.helpInfo;l="mongodb"===t.ruleForm.dbDriver?l.replace("{{.DBDriver}}","Mongo"):l.replace("{{.DBDriver}}","Gorm"),t.$refs.downloadCode.execution(o,t.path,i,l)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Ye={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#99c400"},attrs:{href:"https://go-sponge.com/guide/grpc/based-on-sql.html",target:"_blank"}},[e._v("Create gRPC server based on sql")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          — generate complete microservice code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database type",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v(", "),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              The dsn of mongodb supports SRV records, with the format:"),o("br"),e._v(" "),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              The dsn of postgresql supports the specified schema, example of\n              adding"),o("br"),e._v("\n              parameters after dsn\n              "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If you need to add new CRUD code in the future,"),o("br"),e._v("\n              after which you can generate code in the menu"),o("br"),e._v(" "),o("b",[e._v("[Public] -> [Generate Service CRUD Code]")]),e._v(","),o("br"),e._v("\n              and then moved to the project code.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server 🡆 your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generation of\n              server"),o("br"),e._v("\n              code suitable for a\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(", where\n              even if"),o("br"),e._v("\n              multiple server codes are placed in one git repository, the\n              codes"),o("br"),e._v("\n              between different servers are not reusable."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("directory structure example")]),e._v(". "),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generation of server code\n              suitable"),o("br"),e._v("\n              for a "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),e._v(",\n              where"),o("br"),e._v("\n              multiple server codes are placed in one git repository, and\n              the"),o("br"),e._v("\n              codes between different servers can be reused. If modules\n              code"),o("br"),e._v("\n              generated later on the page are moved to this server, this\n              option"),o("br"),e._v("\n              also needs to be enabled."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("directory structure example")]),e._v(".\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1)])],1)},staticRenderFns:[]};var Qe=o("VU/8")(Je,Ye,!1,function(e){o("bENc")},"data-v-984579d0",null).exports,et={name:"MicroRPCConn",data:function(){return{title:"Generate gRPC connection code",path:"micro-rpc-conn",helpInfo:"\n      <p>The gRPC server connection code includes common service governance features such as service discovery, load balancing, flow limiting, melting, link tracing, etc.</p>\n      <br />\n      <p>Unzip the file and move the folder <b>internal</b> to your project code folder.</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{moduleName:"",serverName:"",rpcServerNames:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],rpcServerNames:[{required:!0,message:"please type the name of the gRPC server",trigger:"blur"}]}}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.rpcServerNames=o.data.rpcServerNames)}).catch(function(e){})},components:{DownloadCode:qe},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r="";if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("server name cannot be empty"),!1;r="micro rpc-conn --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --rpc-server-name="+t.ruleForm.rpcServerNames+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo}else r="micro rpc-conn --module-name="+t.ruleForm.moduleName+" --rpc-server-name="+t.ruleForm.rpcServerNames+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.ruleForm={}},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},tt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please type the name of the module"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" server code directory,"),o("br"),e._v("\n              fill in the module name of the go.mod file"),o("br"),e._v("\n              corresponding to the "),o("b",[e._v("user")]),e._v(" server here.\n            ")])])],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"required field"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              server code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server 🡆 your_server\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"gRPC server name",prop:"rpcServerNames"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multiple gRPC servers support"},model:{value:e.ruleForm.rpcServerNames,callback:function(t){e.$set(e.ruleForm,"rpcServerNames","string"==typeof t?t.trim():t)},expression:"ruleForm.rpcServerNames"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If you want to generate code to connect multiple gRPC\n              servers,"),o("br"),e._v("\n              gRPC server names are separated by commas."),o("br"),e._v("\n              example: service1,service2,service3\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generated module\n              code"),o("br"),e._v("\n              is only suitable for\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(" type\n              projects."),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generated module code is\n              only"),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),o("br"),e._v("\n              type projects.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var ot=o("VU/8")(et,tt,!1,function(e){o("lZNn")},"data-v-010677e0",null).exports,rt={name:"MicroService",data:function(){return{title:"Generate service CRUD code",path:"micro-service",helpInfo:'\n      <p>Generate service code based on table sql, including gRPC CRUD API and test code, supporting paging, filtering and sorting queries, caching.</p>\n      <br />\n      <p>1. Unzip the code file</p>\n      <p>2. Move the folders <b>api</b> and <b>internal</b> to your gRPC server code folder.</p>\n      <p>3. Open a terminal and execute the command:  <b style="color: green">make proto</b></p>\n      <p>4. Compile and run server:   <b style="color: green">make run</b></p>\n      <p>5. Open the file using <b>Goland</b> or <b>VSCode</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span>, and test the CRUD API.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the server",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:qe},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro service --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},it={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database type",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              The dsn of mongodb supports SRV records, with the format:"),o("br"),e._v(" "),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              The dsn of postgresql supports the specified schema, example of\n              adding"),o("br"),e._v("\n              parameters after dsn\n              "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              server code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server 🡆 your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" server code directory,"),o("br"),e._v("\n              fill in the module name of the go.mod file"),o("br"),e._v("\n              corresponding to the "),o("b",[e._v("user")]),e._v(" server here.\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generated module\n              code"),o("br"),e._v("\n              is only suitable for\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(" type\n              projects."),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generated module code is\n              only"),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),o("br"),e._v("\n              type projects.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var lt=o("VU/8")(rt,it,!1,function(e){o("fYi4")},"data-v-4fe2cf0a",null).exports,at={name:"MicroService",data:function(){return{title:"Generate service+handler CRUD code",path:"micro-service-handler",helpInfo:'\n      <p>Generate service+handler code based on table sql, the code contains gRPC+HTTP CRUD API related code.</p>\n      <br />\n      <p>1. Unzip the code file, move the folders <b>api</b> and <b>internal</b> to the project code folder "create gRPC+HTTP servers based on protobuf" </p>\n      <p>2. Open a terminal and execute the command:  <b style="color: green">make proto</b></p>\n      <p>3. Compile and run server:   <b style="color: green">make run</b></p>\n      <p>4. Test or performance test api:<br />\n        &emsp;○ Open the file using <b>Goland</b> or <b>VSCode</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span> and test or performance test gRPC api.<br />\n        &emsp;○ Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser and test http api.</p>\n        ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the server",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:qe},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro service-handler --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},st={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database type",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              The dsn of mongodb supports SRV records, with the format:"),o("br"),e._v(" "),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              The dsn of postgresql supports the specified schema, example of\n              adding"),o("br"),e._v("\n              parameters after dsn\n              "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              server code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server 🡆 your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" server code directory,"),o("br"),e._v("\n              fill in the module name of the go.mod file"),o("br"),e._v("\n              corresponding to the "),o("b",[e._v("user")]),e._v(" server here.\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generated module\n              code"),o("br"),e._v("\n              is only suitable for\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(" type\n              projects."),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generated module code is\n              only"),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),o("br"),e._v("\n              type projects.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var nt=o("VU/8")(at,st,!1,function(e){o("H8MM")},"data-v-ea6b7c9a",null).exports,dt={name:"MicroProtobuf",data:function(){var e;return e={title:"Generate protobuf CRUD description information",path:"micro-protobuf",helpInfo:'\n      <p>Converting table sql to protobuf description information, mainly contains CRUD API.</p>\n      <br />\n      <p>Move the folder <b>api</b> to your project code folder, the proto file is also used for the following purposes.: </p>\n      <p style="text-indent:2em;">● generate swagger documents.\n      <p style="text-indent:2em;">● generate the required code as a custom plug-in for protoc.\n      <p style="text-indent:2em;">● create web servers.\n      <p style="text-indent:2em;">● create gRPC servers.\n      <p style="text-indent:2em;">● create gRPC+HTTP servers.\n      <p style="text-indent:2em;">● create gRPC gateway servers.\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",isWebProto:!1,isExtendedApi:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the server",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1},h()(e,"isSelectedAllTable",!1),h()(e,"dbDriverNames",[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]),e},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.isWebProto=!1,e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:qe},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro protobuf --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --web-type="+t.ruleForm.isWebProto+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,i,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[]}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table names success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},ct={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database type",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",clearable:"",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              The dsn of mongodb supports SRV records, with the format:"),o("br"),e._v(" "),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              The dsn of postgresql supports the specified schema, example of\n              adding"),o("br"),e._v("\n              parameters after dsn\n              "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server 🡆 your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"include route and swagger"}},[o("el-switch",{model:{value:e.ruleForm.isWebProto,callback:function(t){e.$set(e.ruleForm,"isWebProto",t)},expression:"ruleForm.isWebProto"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If enabled, the generated proto file include the route and\n              "),o("br"),e._v("\n              swagger description information."),o("br"),e._v("\n              if disable, route and swagger description information are not\n              include.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var mt=o("VU/8")(dt,ct,!1,function(e){o("kKNs")},"data-v-54d6eac4",null).exports,pt={name:"WebHTTPPb",data:function(){return{title:"",path:"web-http-pb",helpInfo:'\n      <p><b>Create web server based on protobuf</b> generates generic web server backend code, for more development details, please refer to the <a href="https://go-sponge.com/guide/web/based-on-protobuf.html" target="_blank">Development Guide</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open a terminal and execute the command to generate code: <b style="color: green">make proto</b></p>\n      <p>3. Open file <span style="color: chocolate">internal/handler/xxx.go</span>, replace <span style="color: chocolate">panic("implement me")</span> according to template code example.</p>\n      <p>4. Compile and run server:   <b style="color: green">make run</b></p>\n      <p>5. Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser and test api.</p>\n      <br />\n      <p>Technology stack: <b>Go, Gin, Protobuf, Zap, Prometheus, OpenTracing</b>, etc.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the server",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}],protobufFile:[{required:!0,message:"please select a proto file",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\n// The first user is the go module name, the second user is the server name, and v1 is the version number.\noption go_package = "user/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // Login comments\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "login",\n      description: "login with email",\n    };\n  }\n\n  // Note: The following two types of rpc will be ignored to generate http related code\n  //    1. Google.api.http is not set in rpc, e.g. SayHi\n  //    2. rpc is of stream type, such as ClientSteam, ServerSteam, BidiSteam\n\n  //rpc SayHi(HelloRequest) returns (HelloReply) {}\n  //rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  //rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  //rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:qe,ShowRepoDir:Ie},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="web http-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+"--server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to download code")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},ut={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#e403a4"},attrs:{href:"https://go-sponge.com/guide/web/based-on-protobuf.html",target:"_blank"}},[e._v("Create web server based on protobuf")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          — generate generic web server backend code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto file",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("View an example of a protobuf file")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("select proto file")]),e._v(", multi-file support.\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server 🡆 your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generation of\n              server"),o("br"),e._v("\n              code suitable for a\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(", where\n              even if"),o("br"),e._v("\n              multiple server codes are placed in one git repository, the\n              codes"),o("br"),e._v("\n              between different servers are not reusable."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("directory structure example")]),e._v(". "),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generation of server code\n              suitable"),o("br"),e._v("\n              for a "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),e._v(",\n              where"),o("br"),e._v("\n              multiple server codes are placed in one git repository, and\n              the"),o("br"),e._v("\n              codes between different servers can be reused. If modules\n              code"),o("br"),e._v("\n              generated later on the page are moved to this server, this\n              option"),o("br"),e._v("\n              also needs to be enabled."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("directory structure example")]),e._v(".\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var vt=o("VU/8")(pt,ut,!1,function(e){o("pqT2")},"data-v-04b2976d",null).exports,ft={name:"MicroRPCPb",data:function(){return{title:"",path:"micro-rpc-pb",helpInfo:'\n      <p><b>Create gRPC server based on protobuf</b> generates generic gRPC server code, for more development details, please refer to the <a href="https://go-sponge.com/guide/grpc/based-on-protobuf.html" target="_blank">Development Guide</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open a terminal and execute the command to generate code:   <b style="color: green">make proto</b></p>\n      <p>3. Open file <span style="color: chocolate">internal/service/xxx.go</span>, replace <span style="color: chocolate">panic("implement me")</span> according to template code example.</p>\n      <p>4. Compile and run server:   <b style="color: green">make run</b></p>\n      <p>5. Open the file using <b>Goland</b> or <b>VSCode</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span>, and test api.</p>\n      <br />\n      <p>Technology stack: <b>Go, gRPC, Protobuf, Zap, Prometheus, OpenTracing</b>, etc.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the server",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}],protobufFile:[{required:!0,message:"please select a proto file",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\n// The first user is the go module name, the second user is the server name, and v1 is the version number.\noption go_package = "user/api/user/v1;v1";\n\nservice user {\n  // Login comments\n  rpc Login(LoginRequest) returns (LoginReply) {}\n\n  rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:qe,ShowRepoDir:Ie},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro rpc-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to download code")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},ht={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#2ba207"},attrs:{href:"https://go-sponge.com/guide/grpc/based-on-protobuf.html",target:"_blank"}},[e._v("Create gRPC server based on protobuf")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          — generate generic microservice code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto file",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("View an example of a protobuf file")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("select proto file")]),e._v(", multi-file support.\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server 🡆 your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generation of\n              server"),o("br"),e._v("\n              code suitable for a\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(", where\n              even if"),o("br"),e._v("\n              multiple server codes are placed in one git repository, the\n              codes"),o("br"),e._v("\n              between different servers are not reusable."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("directory structure example")]),e._v(". "),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generation of server code\n              suitable"),o("br"),e._v("\n              for a "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),e._v(",\n              where"),o("br"),e._v("\n              multiple server codes are placed in one git repository, and\n              the"),o("br"),e._v("\n              codes between different servers can be reused. If modules\n              code"),o("br"),e._v("\n              generated later on the page are moved to this server, this\n              option"),o("br"),e._v("\n              also needs to be enabled."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("directory structure example")]),e._v(".\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var bt=o("VU/8")(ft,ht,!1,function(e){o("IH7g")},"data-v-74adb6d2",null).exports,gt={name:"MicroRPC",data:function(){return{title:"",path:"micro-rpc",helpInfo:'\n      <p><b>Create gRPC+HTTP servers based on sql</b> generates a complete microservice code including CRUD API, for more development details, please refer to the <a href="https://go-sponge.com/guide/grpc-http/based-on-sql.html" target="_blank">Development Guide</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open a terminal and execute the command to generate code:  <b style="color: green">make proto</b></p>\n      <p>3. Compile and run server:   <b style="color: green">make run</b></p>\n      <p>4. Test or performance test api:<br />\n        &emsp;○ Open the file using <b>Goland</b> or <b>VSCode</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span> and test or performance test gRPC api.<br />\n        &emsp;○ Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser and test http api.</p>\n      <br />\n      <p>Technology stack: <b>Go, gRPC, {{.DBDriver}}, go-redis, Protobuf, Zap, Prometheus, OpenTracing</b>, etc.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",projectName:"",repoAddr:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the server",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:qe,ShowRepoDir:Ie},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),i="micro grpc-http --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi,l=t.helpInfo;l="mongodb"===t.ruleForm.dbDriver?l.replace("{{.DBDriver}}","Mongo"):l.replace("{{.DBDriver}}","Gorm"),t.$refs.downloadCode.execution(o,t.path,i,l)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},_t={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#00CED1"},attrs:{href:"https://go-sponge.com/guide/grpc-http/based-on-sql.html",target:"_blank"}},[e._v("Create gRPC+HTTP servers based on sql")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          — generate complete microservice code that supports gRPC and\n          HTTP protocols")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database type",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v(", "),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              The dsn of mongodb supports SRV records, with the format:"),o("br"),e._v(" "),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              The dsn of postgresql supports the specified schema, example of\n              adding"),o("br"),e._v("\n              parameters after dsn\n              "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If you need to add new CRUD code in the future,"),o("br"),e._v("\n              after which you can generate code in the menu"),o("br"),e._v(" "),o("b",[e._v("[Public] -> [Generate Service+Handler CRUD Code]")]),e._v(","),o("br"),e._v("\n              and then moved to the project code.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server 🡆 your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generation of\n              server"),o("br"),e._v("\n              code suitable for a\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(", where\n              even if"),o("br"),e._v("\n              multiple server codes are placed in one git repository, the\n              codes"),o("br"),e._v("\n              between different servers are not reusable."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("directory structure example")]),e._v(". "),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generation of server code\n              suitable"),o("br"),e._v("\n              for a "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),e._v(",\n              where"),o("br"),e._v("\n              multiple server codes are placed in one git repository, and\n              the"),o("br"),e._v("\n              codes between different servers can be reused. If modules\n              code"),o("br"),e._v("\n              generated later on the page are moved to this server, this\n              option"),o("br"),e._v("\n              also needs to be enabled."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("directory structure example")]),e._v(".\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1)])],1)},staticRenderFns:[]};var wt=o("VU/8")(gt,_t,!1,function(e){o("k8Re")},"data-v-1e22f744",null).exports,Ft={name:"MicroGRPCHTTPPb",data:function(){return{title:"",path:"micro-grpc-http-pb",helpInfo:'\n      <p><b>Create gRPC+HTTP servers based on protobuf</b> generates generic gRPC and HTTP hibrid servers code, for more development details, please refer to the <a href="https://go-sponge.com/guide/grpc-http/based-on-protobuf.html" target="_blank">Development Guide</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open the terminal and execute the command to generate code:   <b style="color: green">make proto</b></p>\n      <p>3. Open file <span style="color: chocolate">internal/service/xxx.go</span>, replace <span style="color: chocolate">panic("implement me")</span> according to template code example.</p>\n      <p>4. Compile and run server:   <b style="color: green">make run</b></p>\n      <p>5. Test or performance test api:<br />\n        &emsp;○ Open the file using <b>Goland</b> or <b>VSCode</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span> and test or performance test gRPC api.<br />\n        &emsp;○ Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser and test http api.</p>\n      <br />\n      <p>Technology stack: <b>Go, Gin, gRPC, Protobuf, Zap, Prometheus, OpenTracing</b>, etc.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the server",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}],protobufFile:[{required:!0,message:"please select a proto file",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\n// The first user is the go module name, the second user is the server name, and v1 is the version number.\noption go_package = "user/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // Login comments\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "login",\n      description: "log in with email",\n    };\n  }\n\n  // Note: The following two types of rpc will be ignored to generate http related code\n  //    1. Google.api.http is not set in rpc, e.g. SayHi\n  //    2. rpc is of stream type, such as ClientSteam, ServerSteam, BidiSteam\n\n  rpc SayHi(HelloRequest) returns (HelloReply) {}\n  rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:qe,ShowRepoDir:Ie},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro grpc-http-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to download code")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},yt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#21A3F1"},attrs:{href:"https://go-sponge.com/guide/grpc-http/based-on-protobuf.html",target:"_blank"}},[e._v("Create gRPC+HTTP servers based on protobuf")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          — Generate generic microservice code that supports gRPC and\n          HTTP protocols")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto file",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("View an example of a protobuf file")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("select proto file")]),e._v(", multi-file support.\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server 🡆 your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generation of\n              server"),o("br"),e._v("\n              code suitable for a\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(", where\n              even if"),o("br"),e._v("\n              multiple server codes are placed in one git repository, the\n              codes"),o("br"),e._v("\n              between different servers are not reusable."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("directory structure example")]),e._v(". "),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generation of server code\n              suitable"),o("br"),e._v("\n              for a "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),e._v(",\n              where"),o("br"),e._v("\n              multiple server codes are placed in one git repository, and\n              the"),o("br"),e._v("\n              codes between different servers can be reused. If modules\n              code"),o("br"),e._v("\n              generated later on the page are moved to this server, this\n              option"),o("br"),e._v("\n              also needs to be enabled."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("directory structure example")]),e._v(".\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var Ct=o("VU/8")(Ft,yt,!1,function(e){o("wYtl")},"data-v-88e08182",null).exports,Dt={name:"MicroRPCGwPb",data:function(){return{title:"",path:"micro-rpc-gw-pb",helpInfo:'\n      <p><b>Create gRPC gateway server based on protobuf</b> generates server code for converting http requests to gRPC requests, for more development details, please refer to the <a href="https://go-sponge.com/guide/grpc-gateway/based-on-protobuf.html" target="_blank">Development Guide</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open a terminal and execute the command to generate code: <b style="color: green">make proto</b></p>\n      <p>3. Open <span style="color: chocolate">internal/service/xxx.go</span> file, replace <span style="color: chocolate">panic("implement me")</span> according to template code example. </p>\n      <p>4. Compile and run server.<b style="color: green">make run</b></p>\n      <p>5. Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser, and test api.</p>\n      <br />\n      <p>Technology stack: <b>Go, Gin, Protobuf, Zap, Prometheus, OpenTracing</b>, etc.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the server",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}],protobufFile:[{required:!0,message:"please select a proto file",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\n// The first user is the go module name, the second user is the server name, and v1 is the version number.\noption go_package = "user/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // Login comments\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "login",\n      description: "login with email",\n    };\n  }\n\n  // Note: The following two types of rpc will be ignored to generate http related code\n  //    1. Google.api.http is not set in rpc, e.g. SayHi\n  //    2. rpc is of stream type, such as ClientSteam, ServerSteam, BidiSteam\n\n  //rpc SayHi(HelloRequest) returns (HelloReply) {}\n  //rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  //rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  //rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:qe,ShowRepoDir:Ie},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro rpc-gw-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to download code")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},St={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#CF40FF"},attrs:{href:"https://go-sponge.com/guide/grpc-gateway/based-on-protobuf.html",target:"_blank"}},[e._v("Create gRPC gateway server based on protobuf")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          — generate gRPC gateway server project code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto file",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("View an example of a protobuf file")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("select proto file")]),e._v(", multi-file support.\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server 🡆 your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject 🡆 your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generation of\n              server"),o("br"),e._v("\n              code suitable for a\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(", where\n              even if"),o("br"),e._v("\n              multiple server codes are placed in one git repository, the\n              codes"),o("br"),e._v("\n              between different servers are not reusable."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("directory structure example")]),e._v(". "),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generation of server code\n              suitable"),o("br"),e._v("\n              for a "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),e._v(",\n              where"),o("br"),e._v("\n              multiple server codes are placed in one git repository, and\n              the"),o("br"),e._v("\n              codes between different servers can be reused. If modules\n              code"),o("br"),e._v("\n              generated later on the page are moved to this server, this\n              option"),o("br"),e._v("\n              also needs to be enabled."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("directory structure example")]),e._v(".\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var xt=o("VU/8")(Dt,St,!1,function(e){o("+m+9")},"data-v-fb8898c4",null).exports,Nt={name:"YamlConfig",data:function(){return{title:"Generate configuration code",path:"yaml-config",helpInfo:"\n      <p>Converts a yaml configuration to a go struct and includes code to read the yaml configuration.</p>\n      <br />\n      <p>Move the folder <b>internal</b> to your project code folder, if the configuration code already exists, replace it.</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{yamlFile:""},rules:{yamlFile:[{required:!0,message:"please select a yaml file",trigger:"change"}]}}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){0==t.data.code&&(e.ruleForm.yamlFile="")}).catch(function(e){})},components:{DownloadCode:qe},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="config --yaml-file="+e.data.data;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to download code")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.yamlFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("yamlFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.yamlFile="",this.$refs.ruleForm.validateField("yamlFile"))},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},kt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"30%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"yaml file",prop:"yamlFile"}},[o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",accept:".yaml,.yml",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("Click to select a yaml file")]),o("br"),e._v("\n              or drag and drop the file here\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var Rt=o("VU/8")(Nt,kt,!1,function(e){o("XOSJ")},"data-v-677d71dc",null).exports,At={name:"CustomTplField",data:function(){return{title:"",path:"custom-tpl-field",helpInfo:'\n      <p>Generate code based on json and custom templates, for more development details, please refer to the <a href="https://go-sponge.com/guide/customize/template-json.html" target="_blank">Development Guide</a>.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,isShowingInfo:!1,fileList:[],ruleForm:{templateDir:"",jsonFile:""},rules:{templateDir:[{required:!0,message:"please enter the absolute path of the directory where the template code is located",trigger:"blur"}],jsonFile:[{required:!0,message:"please select json file",trigger:"change"}]},showTplInfoDialogVisible:!1,tplContent:""}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(""!==o.data.fields&&(e.ruleForm.jsonFile=o.data.fields,e.fileList.push({name:o.data.fields.split("/").pop(),raw:o.data.fields,status:"fromRecord"})),e.ruleForm.templateDir=o.data.templateDir)}).catch(function(e){})},components:{DownloadCode:qe,ShowRepoDir:Ie},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(1!==t.fileList.length||"fromRecord"!==t.fileList[0].status){var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){0==e.data.code?t.downloadZipCode(e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("download code failed")})}else t.downloadZipCode(t.fileList[0].raw)})},showTemplateInfo:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(1!==t.fileList.length||"fromRecord"!==t.fileList[0].status){var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){0==e.data.code?t.getTemplateInfo(e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to obtain template information")})}else t.getTemplateInfo(t.fileList[0].raw)})},downloadZipCode:function(e){var t=appConfig.spongeServiceAddr+"/generate",o="template field --tpl-dir="+this.ruleForm.templateDir+" --fields="+e;this.$refs.downloadCode.execution(t,this.path,o,this.helpInfo)},getTemplateInfo:function(e){var t=this;this.updateIsShowingInfo(!0);var o=appConfig.spongeServiceAddr+"/getTemplateInfo",r="template field --tpl-dir="+this.ruleForm.templateDir+" --fields="+e+" --only-print=true",i={path:this.path,arg:r};m.a.post(o,i).then(function(e){t.updateIsShowingInfo(!1),0==e.data.code?(t.tplContent=e.data.data,t.showTplInfoDialogVisible=!0):t.$message.error(e.data.msg)}).catch(function(e){t.updateIsShowingInfo(!1),t.$message.error(e.response.data.msg)})},updateIsDownloading:function(e){this.isDownloading=e},updateIsShowingInfo:function(e){this.isShowingInfo=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.jsonFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("jsonFile"),t.length>1&&(this.fileList=t.slice(-1))},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.jsonFile="",this.$refs.ruleForm.validateField("jsonFile"))},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},zt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#F25126"},attrs:{href:"https://go-sponge.com/guide/customize/template-json.html",target:"_blank"}},[e._v("\n          Generate code based on json and custom templates\n        ")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"template dir",prop:"templateDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.templateDir,callback:function(t){e.$set(e.ruleForm,"templateDir","string"==typeof t?t.trim():t)},expression:"ruleForm.templateDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The absolute path to the directory where the custom"),o("br"),e._v("\n              template code is located. "),o("br"),e._v("\n              Windows environment example: D:\\tmp\\template-dir"),o("br"),e._v("\n              Linux environment example: /tmp/template-dir\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"fields",prop:"jsonFile"}},[o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",accept:".json",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("Select json file")]),e._v(", only one file is allowed.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{"margin-bottom":"50px"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{size:"default",disabled:e.isShowingInfo,loading:e.isShowingInfo},on:{click:function(t){return e.showTemplateInfo("ruleForm")}}},[e._v("Show info")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"Template Information",visible:e.showTplInfoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showTplInfoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.tplContent,callback:function(t){e.tplContent=t},expression:"tplContent"}})],1)],1)],1)},staticRenderFns:[]};var $t=o("VU/8")(At,zt,!1,function(e){o("wvnU")},"data-v-f1de9012",null).exports,qt={name:"WebModel",data:function(){return{title:"",path:"custom-tpl-sql",helpInfo:'\n      <p>Generate code based on sql, json and custom templates, for more development details, please refer to the <a href="https://go-sponge.com/guide/customize/template-sql.html" target="_blank">Development Guide</a>.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,isShowingInfo:!1,fileList:[],ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",templateDir:"",jsonFile:""},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"blur"}],templateDir:[{required:!0,message:"please enter the absolute path of the directory where the template code is located",trigger:"blur"}]},showTplInfoDialogVisible:!1,tplContent:"",tplFileNameExample:"{{.TableName}}.go.tmpl",tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.listTables(!1),""!==o.data.fields&&(e.ruleForm.jsonFile=o.data.fields,e.fileList.push({name:o.data.fields.split("/").pop(),raw:o.data.fields,status:"fromRecord"})),e.ruleForm.templateDir=o.data.templateDir)}).catch(function(e){})},components:{DownloadCode:qe,ShowRepoDir:Ie},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(0!==t.fileList.length)if(1!==t.fileList.length||"fromRecord"!==t.fileList[0].status){var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){0==e.data.code?t.downloadZipCode(e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("download code failed")})}else t.downloadZipCode(t.fileList[0].raw);else t.downloadZipCode("")})},showTemplateInfo:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(0!==t.fileList.length)if(1!==t.fileList.length||"fromRecord"!==t.fileList[0].status){var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){0==e.data.code?t.getTemplateInfo(e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to obtain template information")})}else t.getTemplateInfo(t.fileList[0].raw);else t.getTemplateInfo("")})},downloadZipCode:function(e){var t=appConfig.spongeServiceAddr+"/generate",o=this.ruleForm.tableName.join(","),r="template sql --db-driver="+this.ruleForm.dbDriver+" --db-dsn="+this.ruleForm.dsnAddr+" --db-table="+o+" --tpl-dir="+this.ruleForm.templateDir+" --fields="+e;this.$refs.downloadCode.execution(t,this.path,r,this.helpInfo)},getTemplateInfo:function(e){var t=this;this.updateIsShowingInfo(!0);var o=appConfig.spongeServiceAddr+"/getTemplateInfo",r=this.ruleForm.tableName.join(","),i="template sql --db-driver="+this.ruleForm.dbDriver+" --db-dsn="+this.ruleForm.dsnAddr+" --db-table="+r+" --tpl-dir="+this.ruleForm.templateDir+" --fields="+e+" --only-print=true",l={path:this.path,arg:i};m.a.post(o,l).then(function(e){t.updateIsShowingInfo(!1),0==e.data.code?(t.tplContent=e.data.data,t.showTplInfoDialogVisible=!0):t.$message.error(e.data.msg)}).catch(function(e){t.updateIsShowingInfo(!1),t.$message.error(e.response.data.msg)})},updateIsDownloading:function(e){this.isDownloading=e},updateIsShowingInfo:function(e){this.isShowingInfo=e},clearFormData:function(){this.tableNames=[],this.fileList=[],this.ruleForm={tableName:[]}},handleOnchange:function(e,t){this.ruleForm.jsonFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("jsonFile"),t.length>1&&(this.fileList=t.slice(-1))},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.jsonFile="",this.$refs.ruleForm.validateField("jsonFile"))},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name, "+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate()},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Tt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#00BFFF"},attrs:{href:"https://go-sponge.com/guide/customize/template-sql.html",target:"_blank"}},[e._v("Generate code based on sql and custom template")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database type",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("、"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              The dsn of mongodb supports SRV records, with the format:"),o("br"),e._v(" "),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              The dsn of postgresql supports the specified schema, example of\n              adding"),o("br"),e._v("\n              parameters after dsn\n              "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multi-selection support",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"template dir",prop:"templateDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.templateDir,callback:function(t){e.$set(e.ruleForm,"templateDir","string"==typeof t?t.trim():t)},expression:"ruleForm.templateDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The absolute path to the directory where the custom"),o("br"),e._v("\n              template code is located. "),o("br"),e._v("\n              Windows environment example: D:\\tmp\\template-dir"),o("br"),e._v("\n              Linux environment example: /tmp/template-dir"),o("br"),o("br"),e._v("\n              Note: If multiple table names are selected, all template"),o("br"),e._v("\n              file names in the directory must use the table names."),o("br"),e._v("\n              example: "),o("b",[e._v(e._s(e.tplFileNameExample))])])])],1),e._v(" "),o("el-form-item",{attrs:{label:"fields",prop:"jsonFile"}},[o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",accept:".json",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("Select json file")]),e._v(", only one file is allowed.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{"margin-bottom":"50px"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{size:"default",disabled:e.isShowingInfo,loading:e.isShowingInfo},on:{click:function(t){return e.showTemplateInfo("ruleForm")}}},[e._v("Show info")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"Template Information",visible:e.showTplInfoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showTplInfoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.tplContent,callback:function(t){e.tplContent=t},expression:"tplContent"}})],1)],1)],1)},staticRenderFns:[]};var It=o("VU/8")(qt,Tt,!1,function(e){o("B+Oq")},"data-v-ee9c9236",null).exports,Pt={name:"CustomTplProtobuf",data:function(){return{title:"",path:"custom-tpl-protobuf",helpInfo:'\n      <p>Generate code based on protobuf, json and custom templates, for more development details, please refer to the <a href="https://go-sponge.com/guide/customize/template-protobuf.html" target="_blank">Development Guide</a>.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,isShowingInfo:!1,protoFileList:[],fileList:[],ruleForm:{protobufFile:"",depProtoDir:"",templateDir:"",jsonFile:""},rules:{protobufFile:[{required:!0,message:"please select a proto file",trigger:"change"}],templateDir:[{required:!0,message:"please enter the absolute path of the directory where the template code is located",trigger:"blur"}]},showTplInfoDialogVisible:!1,tplContent:"",tplFileNameExample:"{{.Proto.FileNamePrefix}}.go.tmpl"}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.protobufFile="",e.ruleForm.depProtoDir=o.data.depProtoDir,e.ruleForm.templateDir=o.data.templateDir,""!==o.data.fields&&(e.ruleForm.jsonFile=o.data.fields,e.fileList.push({name:o.data.fields.split("/").pop(),raw:o.data.fields,status:"fromRecord"})))}).catch(function(e){})},components:{DownloadCode:qe,ShowRepoDir:Ie},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.protoFileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=e.data.data;if(1===t.fileList.length)if("fromRecord"===t.fileList[0].status)t.downloadZipCode(o,t.fileList[0].raw);else{var r=new FormData;t.fileList.forEach(function(e){r.append("files",e.raw)});var i=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(i,r).then(function(e){0==e.data.code?t.downloadZipCode(o,e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("download code failed")})}else t.downloadZipCode(o,"")}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("download code failed")})})},showTemplateInfo:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.protoFileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=e.data.data;if(1===t.fileList.length)if("fromRecord"===t.fileList[0].status)t.getTemplateInfo(o,t.fileList[0].raw);else{var r=new FormData;t.fileList.forEach(function(e){r.append("files",e.raw)});var i=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(i,r).then(function(e){0==e.data.code?t.getTemplateInfo(o,e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("download code failed")})}else t.getTemplateInfo(o,"")}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("download code failed")})})},downloadZipCode:function(e,t){var o=appConfig.spongeServiceAddr+"/generate",r="template protobuf --protobuf-file="+e+" --dep-proto-dir="+this.ruleForm.depProtoDir+" --tpl-dir="+this.ruleForm.templateDir+" --fields="+t;this.$refs.downloadCode.execution(o,this.path,r,this.helpInfo)},getTemplateInfo:function(e,t){var o=this;this.updateIsShowingInfo(!0);var r=appConfig.spongeServiceAddr+"/getTemplateInfo",i="template protobuf --protobuf-file="+e+" --dep-proto-dir="+this.ruleForm.depProtoDir+" --tpl-dir="+this.ruleForm.templateDir+" --fields="+t+" --only-print=true",l={path:this.path,arg:i};m.a.post(r,l).then(function(e){o.updateIsShowingInfo(!1),0==e.data.code?(o.tplContent=e.data.data,o.showTplInfoDialogVisible=!0):o.$message.error(e.data.msg)}).catch(function(e){o.updateIsShowingInfo(!1),o.$message.error(e.response.data.msg)})},updateIsDownloading:function(e){this.isDownloading=e},updateIsShowingInfo:function(e){this.isShowingInfo=e},clearFormData:function(){this.protoFileList=[],this.fileList=[],this.ruleForm={}},handleProtoOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.protoFileList=t,0!==this.protoFileList.length&&this.$refs.ruleForm.validateField("protobufFile")},handleProtoOnRemove:function(e,t){this.protoFileList=t,0===this.protoFileList.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},handleOnchange:function(e,t){this.ruleForm.jsonFile=e.name,this.fileList=t,t.length>1&&(this.fileList=t.slice(-1))},handleOnRemove:function(e,t){this.fileList=t,0===this.fileList.length&&(this.ruleForm.jsonFile="")},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Mt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#32CD32"},attrs:{href:"https://go-sponge.com/guide/customize/template-protobuf.html",target:"_blank"}},[e._v("Generate code based on protobuf and custom templates")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"template dir",prop:"templateDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.templateDir,callback:function(t){e.$set(e.ruleForm,"templateDir","string"==typeof t?t.trim():t)},expression:"ruleForm.templateDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The absolute path to the directory where the custom"),o("br"),e._v("\n              template code is located. "),o("br"),e._v("\n              Windows environment example: D:\\tmp\\template-dir"),o("br"),e._v("\n              Linux environment example: /tmp/template-dir"),o("br"),o("br"),e._v("\n              Note: If multiple proto files are selected, all template"),o("br"),e._v("\n              file names in the directory must use the proto file name."),o("br"),e._v("\n              example: "),o("b",[e._v(e._s(e.tplFileNameExample))])])])],1),e._v(" "),o("el-form-item",{attrs:{label:"proto file",prop:"protobufFile"}},[o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleProtoOnchange,"on-remove":e.handleProtoOnRemove,"file-list":e.protoFileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("Select proto file")]),e._v(", multi-file support.\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"dep-proto-dir",prop:"depProtoDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.depProtoDir,callback:function(t){e.$set(e.ruleForm,"depProtoDir","string"==typeof t?t.trim():t)},expression:"ruleForm.depProtoDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The absolute path of the directory where the dependent proto"),o("br"),e._v("\n              files are located. For example, if a.proto depends on\n              b.proto,"),o("br"),e._v("\n              place the b.proto file in this directory."),o("br"),e._v("\n              Windows environment example: D:\\tmp\\dep-proto-dir"),o("br"),e._v("\n              Linux environment example: /tmp/dep-proto-dir\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"fields",prop:"jsonFile"}},[o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",accept:".json",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("Select json file")]),e._v(", only one file is allowed.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{"margin-bottom":"50px"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{size:"default",disabled:e.isShowingInfo,loading:e.isShowingInfo},on:{click:function(t){return e.showTemplateInfo("ruleForm")}}},[e._v("Show info")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"Template Information",visible:e.showTplInfoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showTplInfoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.tplContent,callback:function(t){e.tplContent=t},expression:"tplContent"}})],1)],1)],1)},staticRenderFns:[]};var Wt=o("VU/8")(Pt,Mt,!1,function(e){o("g8oR")},"data-v-38a3de12",null).exports,Lt={name:"AssistantGenerate",data:function(){return{title:"AI assistant generates code based on function comments",path:"assistant-generate",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,showPassword:!1,isShowingInfo:!1,responseContent:"",showResultDialogVisible:!1,isShowResultBtn:!1,ruleForm:{llmType:"",llmModel:"",apiKey:"",goDir:"",goFile:"",isSpecifiedGoFile:!1},rules:{llmType:[{required:!0,message:"please select LLM type",trigger:"blur"}],llmModel:[{required:!0,message:"please select a model",trigger:"blur"}],apiKey:[{required:!0,message:"please input api key",trigger:"blur"}],goDir:[{required:!0,message:"please input work directory",trigger:"blur"}],goFile:[{required:!0,message:"please enter the Go file path",trigger:"blur"}]},llmTypeOptions:[{label:"depseek",value:"deepseek"},{label:"hatgpt",value:"chatgpt"},{label:"gemini",value:"gemini"}],llmModelOptions:[],allLLMOptions:{deepseek:[{label:"deepseek-chat",value:"deepseek-chat"},{label:"deepseek-reasoner",value:"deepseek-reasoner"}],chatgpt:[{label:"gpt-4o",value:"gpt-4o"},{label:"gpt-4o-mini",value:"gpt-4o-mini"},{label:"gpt-4-turbo",value:"gpt-4-turbo"},{label:"gpt-4",value:"gpt-4"},{label:"o1-mini",value:"o1-mini"},{label:"o1-preview",value:"o1-preview"}],gemini:[{label:"gemini-2.5-pro-exp-03-25",value:"gemini-2.5-pro-exp-03-25"},{label:"gemini-2.0-flash",value:"gemini-2.0-flash"},{label:"gemini-2.0-flash-thinking-exp",value:"gemini-2.0-flash-thinking-exp"},{label:"gemini-2.0-pro-exp",value:"gemini-2.0-pro-exp"}]}}},created:function(){var e=this;this.adaptiveWindows(),this.listLLM();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.llmType=o.data.llmType,e.ruleForm.llmModel=o.data.llmModel,e.ruleForm.apiKey=o.data.apiKey,e.ruleForm.goDir=o.data.goDir,e.selectChangeLLMType(e.ruleForm.llmType))}).catch(function(e){})},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.updateIsShowingInfo(!0);var o=appConfig.spongeServiceAddr+"/assistant",r="";r=t.ruleForm.isSpecifiedGoFile?"assistant generate --type="+t.ruleForm.llmType+" --model="+t.ruleForm.llmModel+" --api-key="+t.ruleForm.apiKey+" --file="+t.ruleForm.goFile:"assistant generate --type="+t.ruleForm.llmType+" --model="+t.ruleForm.llmModel+" --api-key="+t.ruleForm.apiKey+" --dir="+t.ruleForm.goDir;var i={path:t.path,arg:r};m.a.post(o,i).then(function(e){t.updateIsShowingInfo(!1),0==e.data.code?(t.responseContent=e.data.data,t.showResultDialogVisible=!0,t.isShowResultBtn=!0):t.$message.error(e.data.msg)}).catch(function(e){t.updateIsShowingInfo(!1),t.$message.error(e.response.data.msg)})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.ruleForm={}},listLLM:function(){var e=this,t=appConfig.spongeServiceAddr+"/listLLM";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.llmTypeOptions=o.data.llmTypeOptions,e.allLLMOptions=o.data.allLLMOptions)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){this.value=e,this.$forceUpdate()},selectChangeLLMType:function(e){this.value=e,this.llmModelOptions=this.allLLMOptions[e]||[],this.llmModelOptions.length>0&&(this.ruleForm.llmModel=this.llmModelOptions[0].value),this.$forceUpdate()},togglePassword:function(){this.showPassword=!this.showPassword},updateIsShowingInfo:function(e){this.isShowingInfo=e},showResult:function(){this.showResultDialogVisible=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Et={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#00AEB1"},attrs:{href:"https://go-sponge.com/guide/ai/assistant.html#generate-code",target:"_blank"}},[e._v(e._s(e.title))])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"LLM Type",prop:"llmType"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select LLM type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeLLMType},model:{value:e.ruleForm.llmType,callback:function(t){e.$set(e.ruleForm,"llmType",t)},expression:"ruleForm.llmType"}},e._l(e.llmTypeOptions,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"Model",prop:"llmModel"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select model",filterable:"","allow-create":"",clearable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.llmModel,callback:function(t){e.$set(e.ruleForm,"llmModel",t)},expression:"ruleForm.llmModel"}},e._l(e.llmModelOptions,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Support manual input or selection of existing models.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"Api key",prop:"apiKey"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{type:e.showPassword?"text":"password",placeholder:"please input api key"},scopedSlots:e._u([{key:"append",fn:function(){return[o("el-button",{attrs:{icon:(e.showPassword,"el-icon-view")},on:{click:e.togglePassword}})]},proxy:!0}]),model:{value:e.ruleForm.apiKey,callback:function(t){e.$set(e.ruleForm,"apiKey","string"==typeof t?t.trim():t)},expression:"ruleForm.apiKey"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Fill in the api key corresponding to the large language type,"),o("br"),e._v("\n              which is used to invoke the corresponding service.\n            ")])])],1),e._v(" "),e.ruleForm.isSpecifiedGoFile?e._e():o("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"Work directory",prop:"goDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.goDir,callback:function(t){e.$set(e.ruleForm,"goDir","string"==typeof t?t.trim():t)},expression:"ruleForm.goDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The absolute path to the directory where the project code is\n              located."),o("br"),e._v("\n              windows environment example: D:\\project\\dir"),o("br"),e._v("\n              linux environment example: /project/dir\n            ")])])],1),e._v(" "),e.ruleForm.isSpecifiedGoFile?o("el-form-item",{attrs:{label:"Go file",prop:"goFile"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please enter the Go file path"},model:{value:e.ruleForm.goFile,callback:function(t){e.$set(e.ruleForm,"goFile","string"==typeof t?t.trim():t)},expression:"ruleForm.goFile"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Specify the absolute path to the Go file,"),o("br"),e._v("\n              windows environment example: D:\\project\\dir\\main.go"),o("br"),e._v("\n              linux environment example: /project/dir/main.go"),o("br")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"Specified Go file"}},[o("el-switch",{model:{value:e.ruleForm.isSpecifiedGoFile,callback:function(t){e.$set(e.ruleForm,"isSpecifiedGoFile",t)},expression:"ruleForm.isSpecifiedGoFile"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If Go file is specified, the work directory is ignored.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isShowingInfo,loading:e.isShowingInfo},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Generate Coed")]),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowResultBtn,expression:"isShowResultBtn"}],attrs:{size:"default"},on:{click:e.showResult}},[e._v("View Results")])],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"Results of execution",visible:e.showResultDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showResultDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.responseContent,callback:function(t){e.responseContent=t},expression:"responseContent"}})],1)],1)],1)},staticRenderFns:[]};var jt=o("VU/8")(Lt,Et,!1,function(e){o("BXTp")},"data-v-6d850cb9",null).exports,Ut={name:"AssistantMerge",data:function(){return{title:"Merge code generated by AI assistant into corresponding Go code file",path:"assistant-merge",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowingInfo:!1,responseContent:"",showResultDialogVisible:!1,isShowResultBtn:!1,ruleForm:{llmType:"",goDir:"",isClean:!0},rules:{llmModel:[{required:!0,message:"please select a model",trigger:"blur"}],goDir:[{required:!0,message:"please input work directory",trigger:"blur"}]},llmTypeOptions:[{label:"depseek",value:"deepseek"},{label:"hatgpt",value:"chatgpt"},{label:"gemini",value:"gemini"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listLLM();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.llmType=o.data.llmType,e.ruleForm.goDir=o.data.goDir)}).catch(function(e){})},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.updateIsShowingInfo(!0);var o=appConfig.spongeServiceAddr+"/assistant",r="assistant merge --type="+t.ruleForm.llmType+" --dir="+t.ruleForm.goDir+" --is-clean="+t.ruleForm.isClean,i={path:t.path,arg:r};m.a.post(o,i).then(function(e){t.updateIsShowingInfo(!1),0==e.data.code?(t.responseContent=e.data.data,t.showResultDialogVisible=!0,t.isShowResultBtn=!0):t.$message.error(e.data.msg)}).catch(function(e){t.updateIsShowingInfo(!1),t.$message.error(e.response.data.msg)})})},clearFormData:function(){this.ruleForm={}},listLLM:function(){var e=this,t=appConfig.spongeServiceAddr+"/listLLM";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.llmTypeOptions=o.data.llmTypeOptions,e.allLLMOptions=o.data.allLLMOptions)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(其他)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){this.value=e,this.$forceUpdate()},selectChangeLLMType:function(e){this.value=e,this.$forceUpdate()},updateIsShowingInfo:function(e){this.isShowingInfo=e},showResult:function(){this.showResultDialogVisible=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Bt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#4169E1"},attrs:{href:"https://go-sponge.com/guide/ai/assistant.html#merge-code",target:"_blank"}},[e._v(e._s(e.title))])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"LLM type",prop:"llmType"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select LLM type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeLLMType},model:{value:e.ruleForm.llmType,callback:function(t){e.$set(e.ruleForm,"llmType",t)},expression:"ruleForm.llmType"}},e._l(e.llmTypeOptions,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Merges code generated by specifying LLM type.\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"Work directory",prop:"goDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.goDir,callback:function(t){e.$set(e.ruleForm,"goDir","string"==typeof t?t.trim():t)},expression:"ruleForm.goDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The absolute path to the directory where the project code is\n              located."),o("br"),e._v("\n              windows environment example: D:\\project\\dir"),o("br"),e._v("\n              linux environment example: /project/dir\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"Clear AI code"}},[o("el-switch",{model:{value:e.ruleForm.isClean,callback:function(t){e.$set(e.ruleForm,"isClean",t)},expression:"ruleForm.isClean"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After merging the code, clear the code"),o("br"),e._v("\n              generated by the AI assistant.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isShowingInfo,loading:e.isShowingInfo},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Merge Code")]),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowResultBtn,expression:"isShowResultBtn"}],attrs:{size:"default"},on:{click:e.showResult}},[e._v("View Result")])],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"Results of execution",visible:e.showResultDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showResultDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.responseContent,callback:function(t){e.responseContent=t},expression:"responseContent"}})],1)],1)],1)},staticRenderFns:[]};var Gt=o("VU/8")(Ut,Bt,!1,function(e){o("VwMw")},"data-v-716f11ff",null).exports;r.default.use(s.a);var Ht=new s.a({mode:"history",routes:[{path:"*",redirect:"/ui"},{path:"/ui",component:c},{path:"/ui/web-http",component:F},{path:"/ui/web-handler",component:D},{path:"/ui/web-cache",component:N},{path:"/ui/web-dao",component:A},{path:"/ui/web-model",component:q},{path:"/ui/micro-rpc",component:P},{path:"/ui/micro-rpc-conn",component:L},{path:"/ui/micro-rpc-pb",component:ee},{path:"/ui/micro-grpc-http",component:re},{path:"/ui/micro-grpc-http-pb",component:ae},{path:"/ui/micro-rpc-gw-pb",component:de},{path:"/ui/micro-service",component:U},{path:"/ui/micro-service-handler",component:H},{path:"/ui/micro-protobuf",component:K},{path:"/ui/web-http-pb",component:J},{path:"/ui/yaml-config",component:pe},{path:"/ui/custom-tpl-field",component:fe},{path:"/ui/custom-tpl-sql",component:ge},{path:"/ui/custom-tpl-protobuf",component:Fe},{path:"/ui/assistant-generate",component:De},{path:"/ui/assistant-merge",component:Ne},{path:"/ui/download",component:v},{path:"/en/ui",component:Ae},{path:"/en/ui/web-http",component:We},{path:"/en/ui/web-handler",component:je},{path:"/en/ui/web-cache",component:Ge},{path:"/en/ui/web-dao",component:Oe},{path:"/en/ui/web-model",component:Xe},{path:"/en/ui/micro-rpc",component:Qe},{path:"/en/ui/micro-rpc-conn",component:ot},{path:"/en/ui/micro-rpc-pb",component:bt},{path:"/en/ui/micro-grpc-http",component:wt},{path:"/en/ui/micro-grpc-http-pb",component:Ct},{path:"/en/ui/micro-rpc-gw-pb",component:xt},{path:"/en/ui/micro-service",component:lt},{path:"/en/ui/micro-service-handler",component:nt},{path:"/en/ui/micro-protobuf",component:mt},{path:"/en/ui/web-http-pb",component:vt},{path:"/en/ui/yaml-config",component:Rt},{path:"/en/ui/custom-tpl-field",component:$t},{path:"/en/ui/custom-tpl-sql",component:It},{path:"/en/ui/custom-tpl-protobuf",component:Wt},{path:"/en/ui/assistant-generate",component:jt},{path:"/en/ui/assistant-merge",component:Gt},{path:"/en/ui/download",component:qe}]}),Vt=(o("tvR6"),o("zL8q")),Ot=o.n(Vt),Kt=o("Dd8w"),Zt=o.n(Kt),Xt=o("TXmL"),Jt=o("wUZ8"),Yt=o.n(Jt),Qt=o("Vi3T"),eo=o.n(Qt);r.default.use(Xt.a);var to={en:Zt()({},Yt.a,{navMenu:{webType:"Web",webHttp:"Create Web Server",microRpc:"Create gRPC Server",microType:"Microservice",webHttpPb:"Create Web Server",microRpcGwPb:"Create gRPC Gateway Server",microrpcPb:"Create gRPC Server",microGRPCHTTP:"Create gRPC+HTTP Servers",microGRPCHTTPPb:"Create gRPC+HTTP Servers",microServiceHandler:"Generate Service+Handler CRUD Code",microService:"Generate Service CRUD Code",wehHandler:"Generate Handler CRUD Code",webDao:"Generate DAO CRUD Code",webModel:"Generate Model Code",microProtobuf:"Generate Protobuf CRUD Code",yamlConfig:"Generate Configuration Code",microRpcConn:"Generate gRPC Connection Code",webCache:"Generate Cache Code",customType:"Generate Custom Code",customTplField:"JSON",customTplSql:"SQL",customTplProtobuf:"Protobuf",assistant:"AI Assistant Generate Code",assistantGenerate:"Generate Go Code",assistantMerge:"Merge Go Code"},footer:{text1:"If it helps you, give it a ",text2:"",text3:""}}),cn:Zt()({},eo.a,{navMenu:{webType:"Web",webHttp:"创建 web 服务",wehHandler:"生成 handler CRUD 代码",microType:"微服务",microRpc:"创建 gRPC 服务",microService:"生成 service CRUD 代码",webHttpPb:"创建 web 服务",microRpcGwPb:"创建 gRPC 网关服务",microrpcPb:"创建 gRPC 服务",microGRPCHTTP:"创建 gRPC+HTTP 服务",microGRPCHTTPPb:"创建 gRPC+HTTP 服务",microServiceHandler:"生成 service+handler CRUD 代码",webDao:"生成 DAO CRUD 代码",webModel:"生成 model 代码",microProtobuf:"生成 protobuf CRUD 代码",yamlConfig:"生成 configuration 代码",microRpcConn:"生成 gRPC 服务连接代码",webCache:"生成 cache 代码",customType:"生成自定义代码",customTplField:"JSON",customTplSql:"SQL",customTplProtobuf:"Protobuf",assistant:"AI 助手生成代码",assistantGenerate:"生成 Go 代码",assistantMerge:"合并 Go 代码"},footer:{text1:"如果对您有帮助给个",text2:" ，欢迎加入",text3:"go sponge微信交流群。"}})},oo=new Xt.a({locale:"cn",messages:to});r.default.use(Ot.a,{i18n:function(e,t){return oo.t(e,t)}}),r.default.config.productionTip=!1,new r.default({el:"#app",i18n:oo,router:Ht,components:{App:a},template:"<App/>"})},Pigd:function(e,t){},PkeA:function(e,t){},RbiT:function(e,t){},SOJA:function(e,t,o){e.exports=o.p+"static/img/template-framework.e7e3cc8.png"},"SX+c":function(e,t){},VwMw:function(e,t){},X4KW:function(e,t,o){e.exports=o.p+"static/img/sponge-framework.46868cb.png"},XOSJ:function(e,t){},XkHf:function(e,t,o){e.exports=o.p+"static/img/ai-assistant-framework.762e956.png"},XoEw:function(e,t){},ZmZt:function(e,t){},bENc:function(e,t){},cuTw:function(e,t){},dqU9:function(e,t){},dvqj:function(e,t){},ebUW:function(e,t,o){e.exports=o.p+"static/img/wechat.4ce8c69.jpg"},fYi4:function(e,t){},g8oR:function(e,t){},gNwP:function(e,t){},hIB5:function(e,t,o){e.exports=o.p+"static/img/go-sponge-logo.6d5d978.png"},iV68:function(e,t){},k8Re:function(e,t){},kKNs:function(e,t){},kl2U:function(e,t){},lOVm:function(e,t){},lZNn:function(e,t){},mKPG:function(e,t){},nlr7:function(e,t){},pRqx:function(e,t){},pqT2:function(e,t){},s0Bq:function(e,t){},"s7/z":function(e,t){},tvR6:function(e,t){},wYtl:function(e,t){},wdk2:function(e,t){},wvnU:function(e,t){},z34t:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.abed82fc254ec468ebb1.js.map