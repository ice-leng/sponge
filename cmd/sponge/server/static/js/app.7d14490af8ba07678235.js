webpackJsonp([1],{"+m+9":function(e,t){},"39bD":function(e,t){},"3CNT":function(e,t){},"7O3S":function(e,t){},"9fbn":function(e,t){},ASZ4:function(e,t){},Ao6i:function(e,t){},C3O1:function(e,t){},C642:function(e,t){},DX42:function(e,t){},Gmoc:function(e,t){},IH7g:function(e,t){},IWyD:function(e,t){},"LF/H":function(e,t){},MenH:function(e,t){},"N3/h":function(e,t){},NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("7+uW"),l={name:"App",data:function(){return{isCollapse:!1,collapseSize:"320px",toggle:!1,block:!0,collapsebgcolor:"",dialogTableVisible:!1,logoImageSrc:o("hIB5"),logoImagePosition:"18%",wechatImageSrc:o("ebUW"),currentMenu:"/ui",languageOptions:[{value:"ğŸ‡ºğŸ‡¸ English",label:"ğŸ‡ºğŸ‡¸ English"},{value:"ğŸ‡¨ğŸ‡³ ä¸­æ–‡",label:"ğŸ‡¨ğŸ‡³ ä¸­æ–‡"}],languageValue:"ğŸ‡¨ğŸ‡³ ä¸­æ–‡",homeRoute:"/ui",webHttpRoute:"/ui/web-http",webHandlerRoute:"/ui/web-handler",webCacheRoute:"/ui/web-cache",webDaoRoute:"/ui/web-dao",webModelRoute:"/ui/web-model",microRPCRoute:"/ui/micro-rpc",microServiceRoute:"/ui/micro-service",microServiceHandlerRoute:"/ui/micro-service-handler",microRPCConnRoute:"/ui/micro-rpc-conn",microRPCPbRoute:"/ui/micro-rpc-pb",microGRPCHTTPRoute:"/ui/micro-grpc-http",microGRPCHTTPPbRoute:"/ui/micro-grpc-http-pb",microRPCGwPbRoute:"/ui/micro-rpc-gw-pb",microProtobufRoute:"/ui/micro-protobuf",webHTTPPbRoute:"/ui/web-http-pb",yamlConfigRoute:"/ui/yaml-config",performanceTestRoute:"/ui/performance-test",customTplFieldRoute:"/ui/custom-tpl-field",customTplSqlRoute:"/ui/custom-tpl-sql",customTplProtobufRoute:"/ui/custom-tpl-protobuf",assistantGenerate:"/ui/assistant-generate",assistantMerge:"/ui/assistant-merge",downloadCodeRoute:"/ui/download"}},watch:{$route:function(e){this.currentMenu=e.path}},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},created:function(){"en"==localStorage.getItem("localeLanguage")?(this.$i18n.locale="en",this.languageValue="ğŸ‡ºğŸ‡¸ English"):(this.$i18n.locale="cn",this.languageValue="ğŸ‡¨ğŸ‡³ ä¸­æ–‡"),this.adaptedRouteByLanguage(),this.currentMenu=this.$route.path,"en"==this.$i18n.locale&&"/ui"==this.currentMenu&&this.$router.push(this.homeRoute),window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(e){this.fullWidth=document.documentElement.clientWidth},handleSelect:function(e,t){},handleOpen:function(e,t){},handleClose:function(e,t){},clickHandle:function(e){},collapseStatus:function(){this.toggle=!this.toggle,this.block=!this.block,this.isCollapse=!this.isCollapse,this.isCollapse?(this.collapseSize="0px",this.logoImagePosition="0%"):(this.collapseSize="320px",this.logoImagePosition="18%")},changebgcolor:function(){this.collapsebgcolor="#66B1FF"},clearcolor:function(){this.collapsebgcolor=""},changeLanguage:function(e){this.languageValue=e,"ğŸ‡¨ğŸ‡³ ä¸­æ–‡"===e?(this.$i18n.locale="cn",localStorage.setItem("localeLanguage","cn")):(this.$i18n.locale="en",localStorage.setItem("localeLanguage","en")),this.adaptedRouteByLanguage(),this.$router.push(this.homeRoute),window.location.reload()},adaptedRouteByLanguage:function(){var e="";"en"==this.$i18n.locale&&(e="/en"),this.homeRoute=e+this.homeRoute.replace("/en",""),this.webHttpRoute=e+this.webHttpRoute.replace("/en",""),this.webHandlerRoute=e+this.webHandlerRoute.replace("/en",""),this.webCacheRoute=e+this.webCacheRoute.replace("/en",""),this.webDaoRoute=e+this.webDaoRoute.replace("/en",""),this.webModelRoute=e+this.webModelRoute.replace("/en",""),this.microRPCRoute=e+this.microRPCRoute.replace("/en",""),this.microRPCConnRoute=e+this.microRPCConnRoute.replace("/en",""),this.microRPCPbRoute=e+this.microRPCPbRoute.replace("/en",""),this.microGRPCHTTPRoute=e+this.microGRPCHTTPRoute.replace("/en",""),this.microGRPCHTTPPbRoute=e+this.microGRPCHTTPPbRoute.replace("/en",""),this.microRPCGwPbRoute=e+this.microRPCGwPbRoute.replace("/en",""),this.microServiceRoute=e+this.microServiceRoute.replace("/en",""),this.microServiceHandlerRoute=e+this.microServiceHandlerRoute.replace("/en",""),this.microProtobufRoute=e+this.microProtobufRoute.replace("/en",""),this.webHTTPPbRoute=e+this.webHTTPPbRoute.replace("/en",""),this.yamlConfigRoute=e+this.yamlConfigRoute.replace("/en",""),this.performanceTestRoute=e+this.performanceTestRoute.replace("/en",""),this.customTplFieldRoute=e+this.customTplFieldRoute.replace("/en",""),this.customTplSqlRoute=e+this.customTplSqlRoute.replace("/en",""),this.customTplProtobufRoute=e+this.customTplProtobufRoute.replace("/en",""),this.assistantGenerate=e+this.assistantGenerate.replace("/en",""),this.assistantMerge=e+this.assistantMerge.replace("/en",""),this.downloadCodeRoute=e+this.downloadCodeRoute.replace("/en","")},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0,this.logoImagePosition="0%"):(this.spanSize=16,this.offsetSize=4,this.logoImagePosition="18%")}}},i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("div",[o("el-container",[o("el-header",{staticStyle:{height:"100px","border-bottom":"2px solid #eee"}},[o("div",{staticClass:"header-image",style:{"padding-left":e.logoImagePosition}},[o("el-image",{staticStyle:{height:"50px"},attrs:{src:e.logoImageSrc}})],1),e._v(" "),o("div",{staticClass:"menuControl",style:{"background-color":e.collapsebgcolor},on:{mouseenter:e.changebgcolor,mouseleave:e.clearcolor,click:e.collapseStatus}},[o("div",{staticStyle:{"text-align":"center","padding-top":"5px"}},[o("i",{directives:[{name:"show",rawName:"v-show",value:e.block,expression:"block"}],staticClass:"el-icon-s-fold"}),e._v(" "),o("i",{directives:[{name:"show",rawName:"v-show",value:e.toggle,expression:"toggle"}],staticClass:"el-icon-s-unfold"})])]),e._v(" "),o("div",{staticStyle:{float:"right","margin-top":"-20px"}},[o("el-select",{staticClass:"languageClass",on:{change:e.changeLanguage},model:{value:e.languageValue,callback:function(t){e.languageValue=t},expression:"languageValue"}},e._l(e.languageOptions,function(e){return o("el-option",{key:e.value,staticStyle:{"font-size":"medium"},attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),o("el-container",[o("el-aside",{staticClass:"aside-menu",attrs:{width:e.collapseSize}},[o("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:"","default-active":"$router.currentRoute.path","default-active":e.currentMenu,collapse:e.isCollapse},on:{select:e.handleSelect,open:e.handleOpen,close:e.handleClose}},[o("el-menu-item",{attrs:{index:e.homeRoute}},[o("i",{staticClass:"el-icon-s-home"}),e._v(" "),o("span",{staticClass:"home-class",attrs:{slot:"title"},slot:"title"},[e._v("Home")])]),e._v(" "),o("el-submenu",{attrs:{index:"1"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-coin"}),e._v(" "),o("span",{staticClass:"el-menu-span1",attrs:{slot:"title"},slot:"title"},[e._v("SQL")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webHttpRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.webHttp"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microRPCRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microRpc"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microGRPCHTTPRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microGRPCHTTP"))+"\n                ")])])],2),e._v(" "),o("el-submenu",{attrs:{index:"2"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-tickets"}),e._v(" "),o("span",{staticClass:"el-menu-span1",attrs:{slot:"title"},slot:"title"},[e._v("Protobuf")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webHTTPPbRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.webHttpPb"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microRPCPbRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microrpcPb"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microGRPCHTTPPbRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microGRPCHTTPPb"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microRPCGwPbRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microRpcGwPb"))+"\n                ")])])],2),e._v(" "),o("el-submenu",{attrs:{index:"3"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-suitcase"}),e._v(" "),o("span",{staticClass:"el-menu-span1",attrs:{slot:"title"},slot:"title"},[e._v("Public")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webHandlerRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.wehHandler"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microServiceRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microService"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microServiceHandlerRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microServiceHandler"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webDaoRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.webDao"))+" ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microProtobufRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microProtobuf"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webModelRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.webModel"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.yamlConfigRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.yamlConfig"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.microRPCConnRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.microRpcConn"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.webCacheRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.webCache"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.performanceTestRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.performanceTest"))+"\n                ")])])],2),e._v(" "),o("el-submenu",{attrs:{index:"4"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-edit-outline"}),e._v(" "),o("span",{staticClass:"el-menu-span1",attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.$t("navMenu.customType")))])]),e._v(" "),o("el-menu-item",{attrs:{index:e.customTplFieldRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.customTplField"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.customTplSqlRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.customTplSql"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.customTplProtobufRoute}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.customTplProtobuf"))+"\n                ")])])],2),e._v(" "),o("el-submenu",{attrs:{index:"5"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-document"}),e._v(" "),o("span",{staticClass:"el-menu-span1",attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.$t("navMenu.assistant")))])]),e._v(" "),o("el-menu-item",{attrs:{index:e.assistantGenerate}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.assistantGenerate"))+"\n                ")])]),e._v(" "),o("el-menu-item",{attrs:{index:e.assistantMerge}},[o("span",{staticClass:"el-menu-span3"},[e._v(e._s(e.$t("navMenu.assistantMerge"))+"\n                ")])])],2)],1)],1),e._v(" "),o("el-container",[o("el-main",[o("router-view")],1),e._v(" "),o("el-footer",[o("div",{staticStyle:{"text-align":"center",position:"relative"}},[o("p",{staticStyle:{"font-style":"italic","font-size":"medium",color:"#666"}},[e._v("\n                "+e._s(e.$t("footer.text1"))+"\n                "),o("a",{attrs:{href:"https://github.com/go-dev-frame/sponge",target:"_blank"}},[e._v("\n                  starâ­")]),e._v("\n                "+e._s(e.$t("footer.text2"))+"\n                "),o("el-button",{staticStyle:{"font-size":"medium"},attrs:{type:"text"},on:{click:function(t){e.dialogTableVisible=!0}}},[e._v(e._s(e.$t("footer.text3")))])],1),e._v(" "),o("el-dialog",{attrs:{title:"åŠ å¾®ä¿¡è¿›ç¾¤(æ ‡æ³¨sponge)",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[o("el-image",{staticStyle:{height:"320px"},attrs:{src:e.wechatImageSrc}})],1)],1)])],1)],1)],1)],1)])},staticRenderFns:[]};var s=o("VU/8")(l,i,!1,function(e){o("39bD")},"data-v-58f61260",null).exports,a=o("/ocq"),n={name:"Home",data:function(){return{homeImageSrc:o("X4KW"),homeTplImageSrc:o("SOJA"),homeAssistantImageSrc:o("XkHf")}}},c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:18,offset:3}},[o("p",{staticStyle:{"margin-bottom":"30px","line-height":"150%"}},[e._v('\n      sponge æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”æ˜“ç”¨çš„ Go å¼€å‘æ¡†æ¶ï¼Œå…¶æ ¸å¿ƒç†å¿µæ˜¯å®šä¹‰å³ä»£ç (Definition is Code)ï¼Œé€šè¿‡è§£æ SQLã€Protobufã€JSON æ–‡ä»¶ç”Ÿæˆæ¨¡å—åŒ–çš„ Go ä»£ç ï¼Œè¿™äº›æ¨¡å—ä»£ç å¯çµæ´»ç»„åˆæˆå¤šç§ç±»å‹çš„å®Œæ•´åç«¯æœåŠ¡ã€‚sponge æä¾›ä¸€ç«™å¼é¡¹ç›®å¼€å‘è§£å†³æ–¹æ¡ˆï¼Œæ¶µç›–ä»£ç ç”Ÿæˆã€å¼€å‘ã€æµ‹è¯•ã€API æ–‡æ¡£å’Œéƒ¨ç½²ç­‰ï¼Œä»¥"ä½ä»£ç "æ–¹å¼è½»æ¾æ„å»ºç¨³å®šå¯é çš„é«˜æ€§èƒ½åç«¯æœåŠ¡ã€‚\n    ')]),e._v(" "),o("p",[e._v("\n      github åœ°å€ï¼š"),o("a",{attrs:{href:"https://github.com/go-dev-frame/sponge",target:"_blank"}},[e._v("https://github.com/go-dev-frame/sponge")])]),e._v(" "),o("p",[e._v("\n      å¼€å‘æ–‡æ¡£ï¼š"),o("a",{attrs:{href:"https://go-sponge.com/zh/",target:"_blank"}},[e._v("https://go-sponge.com/zh/")])]),e._v(" "),o("br"),e._v(" "),o("p",[o("b",[e._v("\n        sponge ä»£ç ç”Ÿæˆå¼•æ“ã€‚\n      ")])]),e._v(" "),o("p",[o("b",[e._v("1.")]),e._v(" sponge åŸºäºè‡ªå¸¦æ¨¡æ¿ç”Ÿæˆä»£ç æ¡†æ¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š")]),e._v(" "),o("div",{staticClass:"home-image"},[o("el-image",{attrs:{src:e.homeImageSrc}})],1),e._v(" "),o("br"),e._v(" "),o("p",[o("b",[e._v("2.")]),e._v(" sponge åŸºäºè‡ªå®šä¹‰æ¨¡æ¿ç”Ÿæˆä»£ç æ¡†æ¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š")]),e._v(" "),o("div",{staticClass:"framework-image"},[o("el-image",{attrs:{src:e.homeTplImageSrc}})],1),e._v(" "),o("br"),e._v(" "),o("p",[o("b",[e._v("3.")]),e._v(" sponge åŸºäºå‡½æ•°åŠæ³¨é‡Šç”Ÿæˆä¸šåŠ¡é€»è¾‘ä»£ç æ¡†æ¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š")]),e._v(" "),o("div",{staticClass:"framework-image"},[o("el-image",{attrs:{src:e.homeAssistantImageSrc}})],1),e._v(" "),o("br"),e._v(" "),o("p")])],1)},staticRenderFns:[]};var d=o("VU/8")(n,c,!1,function(e){o("cuTw")},null,null).exports,m=o("mtWM"),u={name:"DownloadCode",data:function(){return{downloadStatusDialogVisible:!1,dialogContent:""}},methods:{execution:function(e,t,o,r){var l=this,i={path:t,arg:o};this.$emit("update-is-downloading",!0),m.a.post(e,i,{responseType:"blob"}).then(function(e){var t=e.data,o=e.headers,i=o["content-disposition"],s=new Blob([t],{type:o["content-type"]}),a=window.URL.createObjectURL(s),n=document.createElement("a");n.href=a,n.download=decodeURI(i),n.style.display="none",document.body.appendChild(n),n.click(),n.parentNode.removeChild(n),window.URL.revokeObjectURL(a),l.dialogContent=r,l.downloadStatusDialogVisible=!0,l.$emit("update-is-downloading",!1)}).catch(function(e){var t=e.response.headers;""!=t["err-msg"]?l.$message.error(t["err-msg"]):l.$message.error(e.message),l.$emit("update-is-downloading",!1)})}}},p={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{staticClass:"helper-dialog",attrs:{title:"ä¸‹è½½æˆåŠŸ",visible:e.downloadStatusDialogVisible,width:"60%",center:""},on:{"update:visible":function(t){e.downloadStatusDialogVisible=t}}},[o("h3",{staticStyle:{"margin-left":"30px"}},[e._v("ä½¿ç”¨å¸®åŠ©ï¼š")]),e._v(" "),o("div",{staticStyle:{padding:"5px 30px","font-size":"16px"},domProps:{innerHTML:e._s(e.dialogContent)}})])],1)},staticRenderFns:[]};var v=o("VU/8")(u,p,!1,function(e){o("9fbn")},"data-v-3d35e9ca",null).exports,h=o("bOdI"),f=o.n(h),b={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{attrs:{title:"å•ä½“åº”ç”¨å•ä»“åº“(monolith)æˆ–å¾®æœåŠ¡å¤šä»“åº“(multi-repo)ç›®å½•ç»“æ„",top:"7vh",width:"60%",visible:e.isShowMutiDialog},on:{"update:visible":function(t){e.isShowMutiDialog=t}}},[o("pre",[e._v(e._s(e.mutiRepoText))])]),e._v(" "),o("el-dialog",{attrs:{title:"å¾®æœåŠ¡å•ä»“åº“(mono-repo)ç›®å½•ç»“æ„(ä¹Ÿå°±æ˜¯å¤§ä»“åº“ç›®å½•ç»“æ„)",width:"66%",visible:e.isShowMonoDialog},on:{"update:visible":function(t){e.isShowMonoDialog=t}}},[o("pre",[e._v(e._s(e.monoRepoText))])])],1)},staticRenderFns:[]};var g=o("VU/8")({name:"ShowRepoDir",computed:{mutiRepoFormattedText:function(){return this.mutiRepoText.replace(/\n/g,"<br>")}},data:function(){return{isShowMutiDialog:!1,isShowMonoDialog:!1,mutiRepoText:" .\nâ”œâ”€â”€ api            # protobuf æ–‡ä»¶å’Œç”Ÿæˆçš„*pb.go ç›®å½•\nâ”œâ”€â”€ assets         # å…¶ä»–ä¸èµ„æºåº“ä¸€èµ·ä½¿ç”¨çš„èµ„äº§(å›¾ç‰‡ã€logo ç­‰)ç›®å½•\nâ”œâ”€â”€ cmd            # ç¨‹åºå…¥å£ç›®å½•\nâ”œâ”€â”€ configs        # é…ç½®æ–‡ä»¶çš„ç›®å½•\nâ”œâ”€â”€ deployments    # è£¸æœºã€dockerã€k8s éƒ¨ç½²è„šæœ¬ç›®å½•\nâ”œâ”€â”€ docs           # è®¾è®¡æ–‡æ¡£å’Œç•Œé¢æ–‡æ¡£ç›®å½•\nâ”œâ”€â”€ internal       # é¡¹ç›®å†…éƒ¨ä»£ç ç›®å½•\nâ”‚    â”œâ”€â”€ cache        # åŸºäºä¸šåŠ¡åŒ…è£…çš„ç¼“å­˜ç›®å½•\nâ”‚    â”œâ”€â”€ config       # Go ç»“æ„çš„é…ç½®æ–‡ä»¶ç›®å½•\nâ”‚    â”œâ”€â”€ dao          # æ•°æ®è®¿é—®ç›®å½•\nâ”‚    â”œâ”€â”€ ecode        # è‡ªå®šä¹‰ä¸šåŠ¡é”™è¯¯ä»£ç ç›®å½•\nâ”‚    â”œâ”€â”€ handler      # http çš„ä¸šåŠ¡åŠŸèƒ½å®ç°ç›®å½•\nâ”‚    â”œâ”€â”€ model        # æ•°æ®åº“æ¨¡å‹ç›®å½•\nâ”‚    â”œâ”€â”€ routers      # http è·¯ç”±ç›®å½•\nâ”‚    â”œâ”€â”€ rpcclient    # è¿æ¥ gRP æœåŠ¡çš„å®¢æˆ·ç«¯ç›®å½•\nâ”‚    â”œâ”€â”€ server       # æœåŠ¡å…¥å£ï¼ŒåŒ…æ‹¬ httpã€gRPC ç­‰\nâ”‚    â”œâ”€â”€ service      # gRPC çš„ä¸šåŠ¡åŠŸèƒ½å®ç°ç›®å½•\nâ”‚    â””â”€â”€ types        # http çš„è¯·æ±‚å’Œå“åº”ç±»å‹ç›®å½•\nâ”œâ”€â”€ pkg            # å¤–éƒ¨åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨çš„åº“ç›®å½•\nâ”œâ”€â”€ scripts        # æ‰§è¡Œè„šæœ¬ç›®å½•\nâ”œâ”€â”€ test           # é¢å¤–çš„å¤–éƒ¨æµ‹è¯•ç¨‹åºå’Œæµ‹è¯•æ•°æ®\nâ”œâ”€â”€ third_party    # ä¾èµ–ç¬¬ä¸‰æ–¹ protobuf æ–‡ä»¶æˆ–å…¶ä»–å·¥å…·çš„ç›®å½•\nâ”œâ”€â”€ Makefile       # å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²ç›¸å…³çš„å‘½ä»¤é›†åˆ\nâ”œâ”€â”€ go.mod         # go æ¨¡å—ä¾èµ–å…³ç³»å’Œç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶\nâ””â”€â”€ go.sum         # go æ¨¡å—ä¾èµ–é¡¹çš„å¯†é’¥å’Œæ ¡éªŒæ–‡ä»¶\n      ",monoRepoText:" .\nâ”œâ”€â”€ api\nâ”‚    â”œâ”€â”€ server1       # æœåŠ¡1çš„ protobuf æ–‡ä»¶å’Œç”Ÿæˆçš„*pb.go ç›®å½•\nâ”‚    â”œâ”€â”€ server2       # æœåŠ¡2çš„ protobuf æ–‡ä»¶å’Œç”Ÿæˆçš„*pb.go ç›®å½•\nâ”‚    â”œâ”€â”€ server3       # æœåŠ¡3çš„ protobuf æ–‡ä»¶å’Œç”Ÿæˆçš„*pb.go ç›®å½•\nâ”‚    â””â”€â”€ ...\nâ”œâ”€â”€ server1        # æœåŠ¡1çš„ä»£ç ç›®å½•ï¼Œä¸å¾®æœåŠ¡å¤šä»“åº“(multi-repo)ç›®å½•ç»“æ„åŸºæœ¬ä¸€æ ·\nâ”œâ”€â”€ server2        # æœåŠ¡2çš„ä»£ç ç›®å½•ï¼Œä¸å¾®æœåŠ¡å¤šä»“åº“(multi-repo)ç›®å½•ç»“æ„åŸºæœ¬ä¸€æ ·\nâ”œâ”€â”€ server3        # æœåŠ¡3çš„ä»£ç ç›®å½•ï¼Œä¸å¾®æœåŠ¡å¤šä»“åº“(multi-repo)ç›®å½•ç»“æ„åŸºæœ¬ä¸€æ ·\nâ”œâ”€â”€ ...\nâ”œâ”€â”€ third_party    # ä¾èµ–çš„ç¬¬ä¸‰æ–¹ protobuf æ–‡ä»¶\nâ”œâ”€â”€ go.mod         # go æ¨¡å—ä¾èµ–å…³ç³»å’Œç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶\nâ””â”€â”€ go.sum         # go æ¨¡å—ä¾èµ–é¡¹çš„å¯†é’¥å’Œæ ¡éªŒå’Œæ–‡ä»¶\n\n"}}},b,!1,function(e){o("Pigd")},"data-v-6f357494",null).exports,_={name:"WebHTTP",data:function(){var e;return{title:"",path:"web-http",helpInfo:'\n      <p><b>åŸºäº sql åˆ›å»º web æœåŠ¡</b> ç”ŸæˆåŒ…æ‹¬ CRUD API çš„å®Œæ•´ web æœåŠ¡åç«¯ä»£ç ï¼Œæ›´å¤šå¼€å‘ç»†èŠ‚ï¼Œè¯·å‚è€ƒ <a href="https://go-sponge.com/zh/guide/web/based-on-sql.html" target="_blank">å¼€å‘æŒ‡å—</a>ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ã€‚</p>\n      <p>2. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ç”Ÿæˆ swagger æ–‡æ¡£:  <b style="color: green">make docs</b></p>\n      <p>3. ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡:  <b style="color: green">make run</b></p>\n      <p>4. åœ¨æµè§ˆå™¨è®¿é—® <a href="http://localhost:8080/swagger/index.html" target="_blank">http://localhost:8080/swagger/index.html</a>ï¼Œæµ‹è¯• CRUD APIã€‚</p>\n      <br />\n      <p>æŠ€æœ¯æ ˆï¼š<b>Goã€Ginã€{{.DBDriver}}ã€go-redisã€Zapã€Prometheusã€OpenTracing</b> ç­‰ã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:(e={dsnAddr:"",dbDriver:"",tableName:[]},f()(e,"dbDriver",""),f()(e,"moduleName",""),f()(e,"serverName",""),f()(e,"projectName",""),f()(e,"repoAddr",""),f()(e,"embed",!1),f()(e,"suitedMonoRepo",!1),f()(e,"isExtendedApi",!1),e),rules:{dsnAddr:[{required:!0,message:"è¯·è¾“å…¥æ•°æ®æº dsn",trigger:"blur"}],tableName:[{required:!0,message:"è¯·é€‰æ‹©è¡¨å",trigger:"change"}],dbDriver:[{required:!0,message:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",trigger:"blur"}],moduleName:[{required:!0,message:"è¯·è¾“å…¥ go module åç§°",trigger:"blur"}],serverName:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡åç§°",trigger:"blur"}],projectName:[{required:!0,message:"è¯·è¾“å…¥é¡¹ç›®åç§°",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),l="web http --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi,i=t.helpInfo;i="mongodb"===t.ruleForm.dbDriver?i.replace("{{.DBDriver}}","Mongo"):i.replace("{{.DBDriver}}","Gorm"),t.$refs.downloadCode.execution(o,t.path,l,i)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("è·å–è¡¨åæˆåŠŸ"):t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œ"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œè¯·æ£€æŸ¥"+t.ruleForm.dbDriver+" dsn åœ°å€æ˜¯å¦æ­£ç¡®ã€æˆ–è€…"+t.ruleForm.dbDriver+"æœåŠ¡æ˜¯å¦è¿è¡Œã€‚")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},F={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#ff8040"},attrs:{href:"https://go-sponge.com/zh/guide/web/based-on-sql.html",target:"_blank"}},[e._v("åŸºäº sql åˆ›å»º web æœåŠ¡")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          â€”â€” ç”Ÿæˆå®Œæ•´çš„ web æœåŠ¡åç«¯ä»£ç ")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"æ•°æ®åº“ç±»å‹",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é€‰æ‹©æ•°æ®åº“ç±»å‹ä¹‹åï¼Œç”Ÿæˆçš„ä»£ç ä¼šè‡ªåŠ¨åŒ¹é…è¯¥æ•°æ®åº“ç±»å‹ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æ•°æ®åº“ dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v("ã€"),o("b",[e._v("postgresql")]),e._v("ï¼Œå¡«å†™\n              dsn åœ°å€ï¼Œ"),o("br"),e._v("\n              dsn æ ¼å¼ï¼š"),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              æ³¨æ„ï¼šuser å’Œ password ä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              mongodb çš„ dsn æ”¯æŒ SRV è®°å½•ï¼Œæ ¼å¼ä¸ºï¼š"),o("br"),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              postgresql çš„ dsn æ”¯æŒæŒ‡å®š schemaï¼Œåœ¨ dsn åæ·»åŠ å‚æ•°ç¤ºä¾‹ï¼š"),o("br"),e._v(" "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("sqlite")]),e._v("ï¼Œå¡«å†™ sqlite db æ–‡ä»¶æœ¬åœ°ç»å¯¹è·¯å¾„ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼š"),o("b",[e._v("/tmp/test.db")]),e._v(" æˆ– "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("è·å–è¡¨å")])],1),e._v(" "),o("el-form-item",{attrs:{label:"è¡¨å",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©è¡¨åï¼Œæ”¯æŒå¤šé€‰",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("å…¨é€‰")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              è¡¨åéœ€é‡‡ç”¨å•æ•°å½¢å¼ï¼Œä¾‹å¦‚åº”ä½¿ç”¨"role"ï¼Œè€Œé"roles"ã€‚'),o("br"),e._v("\n              å¦‚éœ€æ–°å¢æ•°æ®è¡¨ï¼Œè¯·é€šè¿‡"),o("br"),e._v(" "),o("b",[e._v("ã€Publicã€‘â†’ã€ç”Ÿæˆ Service CRUD ä»£ç ã€‘")]),o("br"),e._v("\n              èœå•ç”Ÿæˆä»£ç ï¼Œä¹‹åå°†å…¶ç§»åŠ¨åˆ°é¡¹ç›®ç›¸åº”ä½ç½®å³å¯ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-server ğŸ¡† your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module åç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod æ–‡ä»¶çš„ module åç§°ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"é¡¹ç›®åç§°",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœåç§°åŒ…æ‹¬å¤§å†™å­—æ¯ï¼Œä¼šè½¬æ¢ä¸ºå°å†™ï¼Œå¹¶ç”¨ä¸­åˆ’çº¿åˆ†éš”ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker é•œåƒä»“åº“"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              docker é•œåƒä»“åº“åœ°å€ï¼Œé»˜è®¤å€¼æ˜¯"),o("b",[e._v("image-repo-host")]),e._v("ï¼Œè¿™ä¸ªå‚æ•°"),o("br"),e._v("\n              ç”¨åœ¨æ„å»º docker é•œåƒã€k8s çš„éƒ¨ç½²è„šæœ¬ä¸Šï¼Œå¦‚æœä½¿ç”¨ docker å®˜æ–¹"),o("br"),e._v("\n              é•œåƒä»“åº“ï¼Œåªéœ€å¡«å†™æ³¨å†Œ docker ä»“åº“çš„ç”¨æˆ·åã€‚å¦‚æœä½¿ç”¨ç§æœ‰ä»“"),o("br"),e._v("\n              åº“åœ°å€ï¼Œéœ€è¦å¡«å†™å®Œæ•´ä»“åº“åœ°å€ã€‚\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"åµŒå…¥ Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model ç»“æ„ä½“å­—æ®µå¯¹åº”è¡¨çš„ idã€created_atã€"),o("br"),e._v("\n              updated_atã€deleted_at è¿™ 4 ä¸ªåˆ—åï¼Œæ”¯æŒè½¯åˆ é™¤ã€‚"),o("br"),e._v("\n              å¦‚æœè¡¨åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å¼€å¯åµŒå…¥ Modelï¼Œ"),o("br"),e._v("\n              å¦‚æœè¡¨ä¸åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å…³é—­åµŒå…¥ Modelã€‚\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API æ‰©å±•"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œç”Ÿæˆ5ä¸ªå¸¸ç”¨çš„ CRUD API ä»£ç ã€‚"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œåœ¨5ä¸ªå¸¸ç”¨çš„ CRUD API åŸºç¡€ä¸Šï¼Œé¢å¤–å¢åŠ äº†4ä¸ªAPIï¼Œ"),o("br"),e._v("\n              åˆ†åˆ«æ˜¯ DeleteByIDs, GetByCondition, ListByIDs, ListByLastIDã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("b",[e._v("å¾®æœåŠ¡å¤š"),o("br"),e._v("\n                ä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„æœåŠ¡ä»£ç ï¼Œå³ä½¿æŠŠå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ª"),o("br"),e._v("\n              git ä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä»£ç ä¹‹é—´ä¸å¯å¤ç”¨ã€‚"),o("br"),e._v("ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),e._v("ç±»å‹çš„æœåŠ¡"),o("br"),e._v("\n              ä»£ç ï¼Œå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ª git ä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä¹‹é—´çš„ä»£ç å¯ä»¥"),o("br"),e._v("\n              å¤ç”¨ã€‚å¦‚æœåé¢åœ¨é¡µé¢ç”Ÿæˆçš„æ¨¡å—ä»£ç ç§»åŠ¨åˆ°æ­¤æœåŠ¡ï¼Œä¹Ÿéœ€è¦å¼€å¯"),o("br"),e._v("è¿™ä¸ªé€‰é¡¹ã€‚"),o("br"),e._v("\n              ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1)])],1)},staticRenderFns:[]};var w=o("VU/8")(_,F,!1,function(e){o("t84Y")},"data-v-6fdc1210",null).exports,y={name:"WebHandler",data:function(){return{title:"ç”Ÿæˆ handler CRUD ä»£ç ",path:"web-handler",helpInfo1:'\n      <p>åŸºäº sql ç”Ÿæˆçš„ handler ä»£ç ï¼ŒåŒ…å«äº† http api çš„ CRUDã€è‡ªå®šä¹‰æ¡ä»¶æŸ¥è¯¢ã€ç¼“å­˜ç­‰ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ï¼Œå°†æ–‡ä»¶å¤¹<b>internal</b>ç§»åŠ¨åˆ°ä¸€ä¸ª<b>åŸºäº sql åˆ›å»ºçš„ web æœåŠ¡</b>é¡¹ç›®ä»£ç æ–‡ä»¶å¤¹ä¸‹ã€‚</p>\n      <p>2. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤:  <b style="color: green">make docs</b></p>\n      <p>3. ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡:  <b style="color: green">make run</b></p>\n      <p>4. åœ¨æµè§ˆå™¨è®¿é—® <a href="http://localhost:8080/swagger/index.html" target="_blank">http://localhost:8080/swagger/index.html</a>ï¼Œæµ‹è¯• CRUD APIã€‚</p>\n      ',helpInfo2:'\n      <p>åŸºäº sql ç”Ÿæˆçš„ protobuf å’Œ handler ä»£ç ï¼ŒåŒ…å«äº† http api çš„ CRUDã€åˆ†é¡µæŸ¥è¯¢ã€è‡ªå®šä¹‰æ¡ä»¶æŸ¥è¯¢ã€ç¼“å­˜ç­‰ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ï¼Œå°†æ–‡ä»¶å¤¹<b>api</b>å’Œ<b>internal</b>ç§»åŠ¨åˆ°ä¸€ä¸ª<b>åŸºäº protobuf åˆ›å»ºçš„ web æœåŠ¡</b>é¡¹ç›®ä»£ç æ–‡ä»¶å¤¹ä¸‹ã€‚</p>\n      <p>2. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤:  <b style="color: green">make proto</b></p>\n      <p>3. ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡:  <b style="color: green">make run</b></p>\n      <p>4. åœ¨æµè§ˆå™¨è®¿é—® <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a>ï¼Œæµ‹è¯• CRUDapiã€‚</p>\n      ',helpInfo:"",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",embed:!1,isUseInProtobuf:!1,serverName:"",isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"è¯·è¾“å…¥æ•°æ®æº dsn",trigger:"blur"}],tableName:[{required:!0,message:"è¯·é€‰æ‹©è¡¨å",trigger:"change"}],dbDriver:[{required:!0,message:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",trigger:"blur"}],moduleName:[{required:!0,message:"è¯·è¾“å…¥ go module åç§°",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),l="";if(t.ruleForm.isUseInProtobuf){if(""==t.ruleForm.serverName)return t.$message.error("æœåŠ¡åç§°ä¸èƒ½ä¸ºç©º"),!1;t.helpInfo=t.helpInfo2,l="web handler-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else{if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("æœåŠ¡åç§°ä¸èƒ½ä¸ºç©º"),!1;l="web handler --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else l="web handler --module-name="+t.ruleForm.moduleName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.helpInfo=t.helpInfo1}t.$refs.downloadCode.execution(o,t.path,l,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,isUseInProtobuf:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("è·å–è¡¨åæˆåŠŸ"):t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œ"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œè¯·æ£€æŸ¥"+t.ruleForm.dbDriver+" dsn åœ°å€æ˜¯å¦æ­£ç¡®ã€æˆ–è€…"+t.ruleForm.dbDriver+"æœåŠ¡æ˜¯å¦è¿è¡Œã€‚")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},C={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"æ•°æ®åº“ç±»å‹",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é€‰æ‹©æ•°æ®åº“ç±»å‹ä¹‹åï¼Œç”Ÿæˆçš„ä»£ç ä¼šè‡ªåŠ¨åŒ¹é…è¯¥æ•°æ®åº“ç±»å‹ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æ•°æ®åº“ dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v("ã€"),o("b",[e._v("postgresql")]),e._v("ï¼Œå¡«å†™\n              dsn åœ°å€ï¼Œ"),o("br"),e._v("\n              dsn æ ¼å¼ï¼š"),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              æ³¨æ„ï¼šuser å’Œ password ä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              mongodb çš„ dsn æ”¯æŒ SRV è®°å½•ï¼Œæ ¼å¼ä¸ºï¼š"),o("br"),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              postgresql çš„ dsn æ”¯æŒæŒ‡å®š schemaï¼Œåœ¨ dsn åæ·»åŠ å‚æ•°ç¤ºä¾‹ï¼š"),o("br"),e._v(" "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("sqlite")]),e._v("ï¼Œå¡«å†™ sqlite db æ–‡ä»¶æœ¬åœ°ç»å¯¹è·¯å¾„ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼š"),o("b",[e._v("/tmp/test.db")]),e._v(" æˆ– "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"medium"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("è·å–è¡¨å")])],1),e._v(" "),o("el-form-item",{attrs:{label:"è¡¨å",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©è¡¨åï¼Œæ”¯æŒå¤šé€‰",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("å…¨é€‰")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              è¡¨åéœ€é‡‡ç”¨å•æ•°å½¢å¼ï¼Œä¾‹å¦‚åº”ä½¿ç”¨"role"ï¼Œè€Œé"roles"ã€‚\n            ')])])],1),e._v(" "),e.ruleForm.isUseInProtobuf||e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"å¿…å¡«å­—æ®µ"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œåˆ™è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("ã€‚"),o("br"),e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-server ğŸ¡† your_server\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"module åç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œ"),o("br"),e._v("\n              è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("æœåŠ¡å¯¹åº” go.mod æ–‡ä»¶çš„ module åç§°ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"protobuf ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.isUseInProtobuf,callback:function(t){e.$set(e.ruleForm,"isUseInProtobuf",t)},expression:"ruleForm.isUseInProtobuf"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              å¦‚æœå…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆçš„ handler CRUD ä»£ç åªé€‚åˆ"'),o("b",[e._v("åŸºäº sql åˆ›å»ºçš„ web æœåŠ¡")]),e._v('"çš„é¡¹ç›®ä»£ç ï¼Œ'),o("br"),e._v('\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆçš„ handler CRUD ä»£ç åªé€‚åˆ"'),o("b",[e._v("åŸºäº protobuf åˆ›å»ºçš„ web æœåŠ¡")]),e._v('"çš„é¡¹ç›®ä»£ç ã€‚\n            ')])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"åµŒå…¥ Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model ç»“æ„ä½“å­—æ®µå¯¹åº”è¡¨çš„ idã€created_atã€"),o("br"),e._v("\n              updated_atã€deleted_at è¿™ 4 ä¸ªåˆ—åï¼Œæ”¯æŒè½¯åˆ é™¤ã€‚"),o("br"),e._v("\n              å¦‚æœè¡¨åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å¼€å¯åµŒå…¥ Modelï¼Œ"),o("br"),e._v("\n              å¦‚æœè¡¨ä¸åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å…³é—­åµŒå…¥ Modelã€‚\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API æ‰©å±•"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œç”Ÿæˆ5ä¸ªå¸¸ç”¨çš„ CRUD API ä»£ç ã€‚"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œåœ¨5ä¸ªå¸¸ç”¨çš„ CRUD API åŸºç¡€ä¸Šï¼Œé¢å¤–å¢åŠ äº†4ä¸ªAPIï¼Œ"),o("br"),e._v("\n              åˆ†åˆ«æ˜¯ DeleteByIDs, GetByCondition, ListByIDs, ListByLastIDã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("br"),e._v(" "),o("b",[e._v("å¾®æœåŠ¡å¤šä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),o("br"),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var S=o("VU/8")(y,C,!1,function(e){o("WMDj")},"data-v-0d2d1951",null).exports,D={name:"WebCache",data:function(){return{title:"ç”Ÿæˆ cache ä»£ç ",path:"web-cache",helpInfo:'\n      <p>ç”Ÿæˆ Key-Value ç¼“å­˜(redis)ä»£ç , æ›´å¤šå¼€å‘ç»†èŠ‚ï¼Œè¯·å‚è€ƒ <a href="https://go-sponge.com/guide/module-code/gen-cache.html" target="_blank">Development Guide</a>ã€‚</p>\n      <br />\n      <p>è§£å‹æ–‡ä»¶ï¼Œå°†æ–‡ä»¶å¤¹<b>internal</b>ç§»åŠ¨åˆ°é¡¹ç›®ä»£ç æ–‡ä»¶å¤¹ä¸‹ã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{moduleName:"",serverName:"",cacheName:"",prefixKey:"",keyName:"",keyType:"",valueName:"",valueType:"",suitedMonoRepo:!1,isNeedCustomKeyPrefix:!1},rules:{moduleName:[{required:!0,message:"è¯·è¾“å…¥ go module åç§°",trigger:"blur"}],cacheName:[{required:!0,message:"è¯·è¾“å…¥ç¼“å­˜åç§°",trigger:"blur"}],keyName:[{required:!0,message:"è¯·è¾“å…¥ key åç§°",trigger:"blur"}],keyType:[{required:!0,message:"è¯·é€‰æ‹© key çš„ go ç±»å‹",trigger:"blur"}],valueName:[{required:!0,message:"è¯·è¾“å…¥ value åç§°",trigger:"blur"}],valueType:[{required:!0,message:"è¯·é€‰æ‹© value çš„ go ç±»å‹",trigger:"blur"}]},keyTypes:[{label:"uint64",value:"uint64"},{label:"string",value:"string"},{label:"int",value:"int"},{label:"int64",value:"int64"}],valueTypes:[{label:"uint64",value:"uint64"},{label:"string",value:"string"},{label:"int",value:"int"},{label:"int64",value:"int64"}]}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName)}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r="";if(""==t.ruleForm.keyType)return t.$message.error("key çš„ go ç±»å‹ä¸èƒ½ä¸ºç©º"),!1;if(""==t.ruleForm.valueType)return t.$message.error("value çš„ go ç±»å‹ä¸èƒ½ä¸ºç©º"),!1;if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("æœåŠ¡åç§°ä¸èƒ½ä¸ºç©º"),!1;r="web cache --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --cache-name="+t.ruleForm.cacheName+" --prefix-key="+t.ruleForm.prefixKey+" --key-name="+t.ruleForm.keyName+" --key-type="+t.ruleForm.keyType+" --value-name="+t.ruleForm.valueName+" --value-type="+t.ruleForm.valueType+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo}else r="web cache --module-name="+t.ruleForm.moduleName+" --cache-name="+t.ruleForm.cacheName+" --prefix-key="+t.ruleForm.prefixKey+" --key-name="+t.ruleForm.keyName+" --key-type="+t.ruleForm.keyType+" --value-name="+t.ruleForm.valueName+" --value-type="+t.ruleForm.valueType+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.ruleForm={}},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){this.value=e,this.$forceUpdate()},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},x={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"module åç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·è¾“å…¥ module åç§°"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œ"),o("br"),e._v("\n              è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("æœåŠ¡å¯¹åº” go.mod æ–‡ä»¶çš„ module åç§°ã€‚\n            ")])])],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"å¿…å¡«å­—æ®µ"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œåˆ™è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("ã€‚"),o("br"),e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-server ğŸ¡† your_server\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"ç¼“å­˜åç§°",prop:"cacheName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"ç¤ºä¾‹ userToken"},model:{value:e.ruleForm.cacheName,callback:function(t){e.$set(e.ruleForm,"cacheName","string"==typeof t?t.trim():t)},expression:"ruleForm.cacheName"}})],1),e._v(" "),e.ruleForm.isNeedCustomKeyPrefix?o("el-form-item",{attrs:{label:"ç¼“å­˜ key å‰ç¼€",prop:"prefixKey"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"ç¤ºä¾‹ user:token"},model:{value:e.ruleForm.prefixKey,callback:function(t){e.$set(e.ruleForm,"prefixKey","string"==typeof t?t.trim():t)},expression:"ruleForm.prefixKey"}})],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"key åç§°",prop:"keyName"}},[o("el-input",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"ç¤ºä¾‹ id"},model:{value:e.ruleForm.keyName,callback:function(t){e.$set(e.ruleForm,"keyName","string"==typeof t?t.trim():t)},expression:"ruleForm.keyName"}}),e._v(" "),o("el-select",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"key çš„ go ç±»å‹",filterable:"","allow-create":"",clearable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.keyType,callback:function(t){e.$set(e.ruleForm,"keyType",t)},expression:"ruleForm.keyType"}},e._l(e.keyTypes,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"value åç§°",prop:"valueName"}},[o("el-input",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"ç¤ºä¾‹ token"},model:{value:e.ruleForm.valueName,callback:function(t){e.$set(e.ruleForm,"valueName","string"==typeof t?t.trim():t)},expression:"ruleForm.valueName"}}),e._v(" "),o("el-select",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"value çš„ go ç±»å‹",filterable:"","allow-create":"",clearable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.valueType,callback:function(t){e.$set(e.ruleForm,"valueType",t)},expression:"ruleForm.valueType"}},e._l(e.valueTypes,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"è‡ªå®šä¹‰ç¼“å­˜ key å‰ç¼€"}},[o("el-switch",{model:{value:e.ruleForm.isNeedCustomKeyPrefix,callback:function(t){e.$set(e.ruleForm,"isNeedCustomKeyPrefix",t)},expression:"ruleForm.isNeedCustomKeyPrefix"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              åœ¨ç¼“å­˜æœåŠ¡ä¸­å­˜å‚¨çš„ key åç§°é»˜è®¤æ˜¯\n              "),o("b",[e._v("ç¼“å­˜åç§°:key å€¼")]),e._v("ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯æ­¤é€‰é¡¹ï¼Œè®¾ç½®è‡ªå®šä¹‰çš„ç¼“å­˜ key å‰ç¼€ï¼Œ"),o("br"),e._v("key åç§°å°†å˜ä¸º\n              "),o("b",[e._v("è‡ªå®šä¹‰ç¼“å­˜ key å‰ç¼€:key å€¼")]),e._v("ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("br"),e._v(" "),o("b",[e._v("å¾®æœåŠ¡å¤šä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),o("br"),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var N=o("VU/8")(D,x,!1,function(e){o("iV68")},"data-v-e818946c",null).exports,k={name:"WebDao",data:function(){return{title:"ç”Ÿæˆ DAO CRUD ä»£ç ",path:"web-dao",helpInfo:'\n      <p>åŸºäºè¡¨ sql ç”Ÿæˆ DAO ä»£ç ï¼ŒåŒ…å«äº†è¡¨çš„ CRUD æ“ä½œã€åˆ†é¡µæŸ¥è¯¢ã€è‡ªå®šä¹‰æ¡ä»¶æŸ¥è¯¢ã€ç¼“å­˜ã€‚æ›´å¤šå¼€å‘ç»†èŠ‚ï¼Œè¯·å‚è€ƒ <a href="https://go-sponge.com/zh/guide/module-code/gen-dao-crud.html" target="_blank">å¼€å‘æŒ‡å—</a>ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ï¼Œå°†æ–‡ä»¶å¤¹<b>internal</b>ç§»åŠ¨åˆ°é¡¹ç›®ä»£ç æ–‡ä»¶å¤¹ä¸‹ã€‚</p>\n      <p>2. åœ¨ handler æˆ– service è°ƒç”¨ dao ä»£ç ã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",includeInitDB:!1,embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"è¯·è¾“å…¥æ•°æ®æº dsn",trigger:"blur"}],tableName:[{required:!0,message:"è¯·é€‰æ‹©è¡¨å",trigger:"change"}],dbDriver:[{required:!0,message:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",trigger:"blur"}],moduleName:[{required:!0,message:"è¯·è¾“å…¥ go module åç§°",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.includeInitDB=!1,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),l="";if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("æœåŠ¡åç§°ä¸èƒ½ä¸ºç©º"),!1;l="web dao --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --include-init-db="+t.ruleForm.includeInitDB+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else l="web dao --module-name="+t.ruleForm.moduleName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --include-init-db="+t.ruleForm.includeInitDB+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,l,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("è·å–è¡¨åæˆåŠŸ"):t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œ"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œè¯·æ£€æŸ¥"+t.ruleForm.dbDriver+" dsn åœ°å€æ˜¯å¦æ­£ç¡®ã€æˆ–è€…"+t.ruleForm.dbDriver+"æœåŠ¡æ˜¯å¦è¿è¡Œã€‚")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},R={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"æ•°æ®åº“ç±»å‹",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é€‰æ‹©æ•°æ®åº“ç±»å‹ä¹‹åï¼Œç”Ÿæˆçš„ä»£ç ä¼šè‡ªåŠ¨åŒ¹é…è¯¥æ•°æ®åº“ç±»å‹ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æ•°æ®åº“ dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v("ã€"),o("b",[e._v("postgresql")]),e._v("ï¼Œå¡«å†™\n              dsn åœ°å€ï¼Œ"),o("br"),e._v("\n              dsn æ ¼å¼ï¼š"),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              æ³¨æ„ï¼šuser å’Œ password ä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              mongodb çš„ dsn æ”¯æŒ SRV è®°å½•ï¼Œæ ¼å¼ä¸ºï¼š"),o("br"),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              postgresql çš„ dsn æ”¯æŒæŒ‡å®š schemaï¼Œåœ¨ dsn åæ·»åŠ å‚æ•°ç¤ºä¾‹ï¼š"),o("br"),e._v(" "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("sqlite")]),e._v("ï¼Œå¡«å†™ sqlite db æ–‡ä»¶æœ¬åœ°ç»å¯¹è·¯å¾„ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼š"),o("b",[e._v("/tmp/test.db")]),e._v(" æˆ– "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("è·å–è¡¨å")])],1),e._v(" "),o("el-form-item",{attrs:{label:"è¡¨å",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©è¡¨åï¼Œæ”¯æŒå¤šé€‰",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("å…¨é€‰")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              è¡¨åéœ€é‡‡ç”¨å•æ•°å½¢å¼ï¼Œä¾‹å¦‚åº”ä½¿ç”¨"role"ï¼Œè€Œé"roles"ã€‚\n            ')])])],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"å¿…å¡«å­—æ®µ"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œåˆ™è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("ã€‚"),o("br"),e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-server ğŸ¡† your_server\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"module åç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œ"),o("br"),e._v("\n              è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("æœåŠ¡å¯¹åº” go.mod æ–‡ä»¶çš„ module åç§°ã€‚\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"åµŒå…¥ Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model ç»“æ„ä½“å­—æ®µå¯¹åº”è¡¨çš„ idã€created_atã€"),o("br"),e._v("\n              updated_atã€deleted_at è¿™ 4 ä¸ªåˆ—åï¼Œæ”¯æŒè½¯åˆ é™¤ã€‚"),o("br"),e._v("\n              å¦‚æœè¡¨åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å¼€å¯åµŒå…¥ Modelï¼Œ"),o("br"),e._v("\n              å¦‚æœè¡¨ä¸åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å…³é—­åµŒå…¥ Modelã€‚\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API æ‰©å±•"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œç”Ÿæˆ5ä¸ªå¸¸ç”¨çš„ CRUD API ä»£ç ã€‚"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œåœ¨5ä¸ªå¸¸ç”¨çš„ CRUD API åŸºç¡€ä¸Šï¼Œé¢å¤–å¢åŠ äº†4ä¸ªAPIï¼Œ"),o("br"),e._v("\n              åˆ†åˆ«æ˜¯ DeleteByIDs, GetByCondition, ListByIDs, ListByLastIDã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("br"),e._v(" "),o("b",[e._v("å¾®æœåŠ¡å¤šä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),o("br"),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var T=o("VU/8")(k,R,!1,function(e){o("tN7h")},"data-v-0dda19ee",null).exports,A={name:"WebModel",data:function(){return{title:"ç”Ÿæˆ model ä»£ç ",path:"web-model",helpInfo:"\n      <p>åŸºäºè¡¨ sql ç”Ÿæˆå¯¹åº” Go çš„ç»“æ„ä½“ã€‚</p>\n      <br />\n      <p>è§£å‹æ–‡ä»¶ï¼Œå°†æ–‡ä»¶å¤¹<b>internal</b>ç§»åŠ¨åˆ°é¡¹ç›®ä»£ç æ–‡ä»¶å¤¹ä¸‹ã€‚</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",embed:!1},rules:{dsnAddr:[{required:!0,message:"è¯·è¾“å…¥æ•°æ®æº dsn",trigger:"blur"}],tableName:[{required:!0,message:"è¯·é€‰æ‹©è¡¨å",trigger:"change"}],dbDriver:[{required:!0,message:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),l="web model --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed;t.$refs.downloadCode.execution(o,t.path,l,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("è·å–è¡¨åæˆåŠŸ"):t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œ"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œè¯·æ£€æŸ¥"+t.ruleForm.dbDriver+" dsn åœ°å€æ˜¯å¦æ­£ç¡®ã€æˆ–è€…"+t.ruleForm.dbDriver+"æœåŠ¡æ˜¯å¦è¿è¡Œã€‚")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},z={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"æ•°æ®åº“ç±»å‹",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é€‰æ‹©æ•°æ®åº“ç±»å‹ä¹‹åï¼Œç”Ÿæˆçš„ä»£ç ä¼šè‡ªåŠ¨åŒ¹é…è¯¥æ•°æ®åº“ç±»å‹ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æ•°æ®åº“ dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v("ã€"),o("b",[e._v("postgresql")]),e._v("ï¼Œå¡«å†™\n              dsn åœ°å€ï¼Œ"),o("br"),e._v("\n              dsn æ ¼å¼ï¼š"),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              æ³¨æ„ï¼šuser å’Œ password ä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              mongodb çš„ dsn æ”¯æŒ SRV è®°å½•ï¼Œæ ¼å¼ä¸ºï¼š"),o("br"),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              postgresql çš„ dsn æ”¯æŒæŒ‡å®š schemaï¼Œåœ¨ dsn åæ·»åŠ å‚æ•°ç¤ºä¾‹ï¼š"),o("br"),e._v(" "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("sqlite")]),e._v("ï¼Œå¡«å†™ sqlite db æ–‡ä»¶æœ¬åœ°ç»å¯¹è·¯å¾„ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼š"),o("b",[e._v("/tmp/test.db")]),e._v(" æˆ– "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("è·å–è¡¨å")])],1),e._v(" "),o("el-form-item",{attrs:{label:"è¡¨å",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©è¡¨åï¼Œæ”¯æŒå¤šé€‰",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("å…¨é€‰")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              è¡¨åéœ€é‡‡ç”¨å•æ•°å½¢å¼ï¼Œä¾‹å¦‚åº”ä½¿ç”¨"role"ï¼Œè€Œé"roles"ã€‚\n            ')])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"åµŒå…¥ Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model ç»“æ„ä½“å­—æ®µå¯¹åº”è¡¨çš„ idã€created_atã€"),o("br"),e._v("\n              updated_atã€deleted_at è¿™ 4 ä¸ªåˆ—åï¼Œæ”¯æŒè½¯åˆ é™¤ã€‚"),o("br"),e._v("\n              å¦‚æœè¡¨åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å¼€å¯åµŒå…¥ Modelï¼Œ"),o("br"),e._v("\n              å¦‚æœè¡¨ä¸åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å…³é—­åµŒå…¥ Modelã€‚\n            ")])])],1):e._e()],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var $=o("VU/8")(A,z,!1,function(e){o("hveK")},"data-v-4008b84a",null).exports,q={name:"MicroRPC",data:function(){return{title:"",path:"micro-rpc",helpInfo:'\n      <p><b>åŸºäº sql åˆ›å»º gRPC æœåŠ¡</b> ç”ŸæˆåŒ…æ‹¬ CRUD API çš„å®Œæ•´å¾®æœåŠ¡ä»£ç ï¼Œæ›´å¤šå¼€å‘ç»†èŠ‚ï¼Œè¯·å‚è€ƒ <a href="https://go-sponge.com/zh/guide/grpc/based-on-sql.html" target="_blank">å¼€å‘æŒ‡å—</a>ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ã€‚</p>\n      <p>2. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ç”Ÿæˆä»£ç :  <b style="color: green">make proto</b></p>\n      <p>3. ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡:  <b style="color: green">make run</b></p>\n      <p>4. ä½¿ç”¨ <b>Goland</b> æˆ– <b>VSCode</b> æ‰“å¼€æ–‡ä»¶ <span style="color: chocolate">internal/service/xxx_client_test.go</span>ï¼Œæµ‹è¯•æˆ–è€…å‹æµ‹ apiã€‚</p>\n      <br />\n      <p>æŠ€æœ¯æ ˆï¼š <b>Goã€gRPCã€{{.DBDriver}}ã€go-redisã€Protobufã€Zapã€Prometheusã€OpenTracing</b> ç­‰ã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",projectName:"",repoAddr:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"è¯·è¾“å…¥æ•°æ®æº dsn",trigger:"blur"}],tableName:[{required:!0,message:"è¯·é€‰æ‹©è¡¨å",trigger:"change"}],dbDriver:[{required:!0,message:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",trigger:"blur"}],moduleName:[{required:!0,message:"è¯·è¾“å…¥ go module åç§°",trigger:"blur"}],serverName:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡åç§°",trigger:"blur"}],projectName:[{required:!0,message:"è¯·è¾“å…¥é¡¹ç›®åç§°",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),l="micro rpc --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi,i=t.helpInfo;i="mongodb"===t.ruleForm.dbDriver?i.replace("{{.DBDriver}}","Mongo"):i.replace("{{.DBDriver}}","Gorm"),t.$refs.downloadCode.execution(o,t.path,l,i)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("è·å–è¡¨åæˆåŠŸ"):t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œ"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œè¯·æ£€æŸ¥"+t.ruleForm.dbDriver+" dsn åœ°å€æ˜¯å¦æ­£ç¡®ã€æˆ–è€…"+t.ruleForm.dbDriver+"æœåŠ¡æ˜¯å¦è¿è¡Œã€‚")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},P={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#99c400"},attrs:{href:"https://go-sponge.com/zh/guide/grpc/based-on-sql.html",target:"_blank"}},[e._v("åŸºäº sql åˆ›å»º gRPC æœåŠ¡")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          â€”â€” ç”Ÿæˆå®Œæ•´çš„å¾®æœåŠ¡ä»£ç ")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"æ•°æ®åº“ç±»å‹",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é€‰æ‹©æ•°æ®åº“ç±»å‹ä¹‹åï¼Œç”Ÿæˆçš„ä»£ç ä¼šè‡ªåŠ¨åŒ¹é…è¯¥æ•°æ®åº“ç±»å‹ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æ•°æ®åº“ dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v("ã€"),o("b",[e._v("postgresql")]),e._v("ï¼Œå¡«å†™\n              dsn åœ°å€ï¼Œ"),o("br"),e._v("\n              dsn æ ¼å¼ï¼š"),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              æ³¨æ„ï¼šuser å’Œ password ä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              mongodb çš„ dsn æ”¯æŒ SRV è®°å½•ï¼Œæ ¼å¼ä¸ºï¼š"),o("br"),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              postgresql çš„ dsn æ”¯æŒæŒ‡å®š schemaï¼Œåœ¨ dsn åæ·»åŠ å‚æ•°ç¤ºä¾‹ï¼š"),o("br"),e._v(" "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("sqlite")]),e._v("ï¼Œå¡«å†™ sqlite db æ–‡ä»¶æœ¬åœ°ç»å¯¹è·¯å¾„ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼š"),o("b",[e._v("/tmp/test.db")]),e._v(" æˆ– "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("è·å–è¡¨å")])],1),e._v(" "),o("el-form-item",{attrs:{label:"è¡¨å",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©è¡¨åï¼Œæ”¯æŒå¤šé€‰",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("å…¨é€‰")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              è¡¨åéœ€é‡‡ç”¨å•æ•°å½¢å¼ï¼Œä¾‹å¦‚åº”ä½¿ç”¨"role"ï¼Œè€Œé"roles"ã€‚'),o("br"),e._v("\n              å¦‚éœ€æ–°å¢æ•°æ®è¡¨ï¼Œè¯·é€šè¿‡"),o("br"),e._v(" "),o("b",[e._v("ã€Publicã€‘â†’ã€ç”Ÿæˆ Service CRUD ä»£ç ã€‘")]),o("br"),e._v("\n              èœå•ç”Ÿæˆä»£ç ï¼Œä¹‹åå°†å…¶ç§»åŠ¨åˆ°é¡¹ç›®ç›¸åº”ä½ç½®å³å¯ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-server ğŸ¡† your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module åç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod æ–‡ä»¶çš„ module åç§°ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"é¡¹ç›®åç§°",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœåç§°åŒ…æ‹¬å¤§å†™å­—æ¯ï¼Œä¼šè½¬æ¢ä¸ºå°å†™ï¼Œå¹¶ç”¨ä¸­åˆ’çº¿åˆ†éš”ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker é•œåƒä»“åº“"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              docker é•œåƒä»“åº“åœ°å€ï¼Œé»˜è®¤å€¼æ˜¯"),o("b",[e._v("image-repo-host")]),e._v("ï¼Œè¿™ä¸ªå‚æ•°"),o("br"),e._v("\n              ç”¨åœ¨æ„å»º docker é•œåƒã€k8s çš„éƒ¨ç½²è„šæœ¬ä¸Šï¼Œå¦‚æœä½¿ç”¨ docker å®˜æ–¹"),o("br"),e._v("\n              é•œåƒä»“åº“ï¼Œåªéœ€å¡«å†™æ³¨å†Œ docker ä»“åº“çš„ç”¨æˆ·åã€‚å¦‚æœä½¿ç”¨ç§æœ‰ä»“"),o("br"),e._v("\n              åº“åœ°å€ï¼Œéœ€è¦å¡«å†™å®Œæ•´ä»“åº“åœ°å€ã€‚\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"åµŒå…¥ Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model ç»“æ„ä½“å­—æ®µå¯¹åº”è¡¨çš„ idã€created_atã€"),o("br"),e._v("\n              updated_atã€deleted_at è¿™ 4 ä¸ªåˆ—åï¼Œæ”¯æŒè½¯åˆ é™¤ã€‚"),o("br"),e._v("\n              å¦‚æœè¡¨åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å¼€å¯åµŒå…¥ Modelï¼Œ"),o("br"),e._v("\n              å¦‚æœè¡¨ä¸åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å…³é—­åµŒå…¥ Modelã€‚\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API æ‰©å±•"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œç”Ÿæˆ5ä¸ªå¸¸ç”¨çš„ CRUD API ä»£ç ã€‚"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œåœ¨5ä¸ªå¸¸ç”¨çš„ CRUD API åŸºç¡€ä¸Šï¼Œé¢å¤–å¢åŠ äº†4ä¸ªAPIï¼Œ"),o("br"),e._v("\n              åˆ†åˆ«æ˜¯ DeleteByIDs, GetByCondition, ListByIDs, ListByLastIDã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("b",[e._v("å¾®æœåŠ¡å¤š"),o("br"),e._v("\n                ä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„æœåŠ¡ä»£ç ï¼Œå³ä½¿æŠŠå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ª"),o("br"),e._v("\n              git ä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä»£ç ä¹‹é—´ä¸å¯å¤ç”¨ã€‚"),o("br"),e._v("ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),e._v("ç±»å‹çš„æœåŠ¡"),o("br"),e._v("\n              ä»£ç ï¼Œå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ª git ä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä¹‹é—´çš„ä»£ç å¯ä»¥"),o("br"),e._v("\n              å¤ç”¨ã€‚å¦‚æœåé¢åœ¨é¡µé¢ç”Ÿæˆçš„æ¨¡å—ä»£ç ç§»åŠ¨åˆ°æ­¤æœåŠ¡ï¼Œä¹Ÿéœ€è¦å¼€å¯"),o("br"),e._v("è¿™ä¸ªé€‰é¡¹ã€‚"),o("br"),e._v("\n              ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1)])],1)},staticRenderFns:[]};var I=o("VU/8")(q,P,!1,function(e){o("iai1")},"data-v-51c473da",null).exports,M={name:"MicroRPCConn",data:function(){return{title:"ç”Ÿæˆ gRPC æœåŠ¡è¿æ¥ä»£ç ",path:"micro-rpc-conn",helpInfo:"\n      <p>gRPC æœåŠ¡è¿æ¥ä»£ç åŒ…æ‹¬å¸¸ç”¨æœåŠ¡æ²»ç†åŠŸèƒ½ï¼Œä¾‹å¦‚æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€é™æµã€ç†”æ–­ã€é“¾è·¯è¿½è¸ªç­‰ã€‚</p>\n      <br />\n      <p>è§£å‹æ–‡ä»¶ï¼Œå°†æ–‡ä»¶å¤¹<b>internal</b>ç§»åŠ¨åˆ°é¡¹ç›®ä»£ç æ–‡ä»¶å¤¹ä¸‹ã€‚</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{moduleName:"",serverName:"",rpcServerNames:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"è¯·è¾“å…¥ go module åç§°",trigger:"blur"}],rpcServerNames:[{required:!0,message:"è¯·è¾“å…¥ gRPC æœåŠ¡åç§°",trigger:"blur"}]}}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.rpcServerNames=o.data.rpcServerNames)}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r="";if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("æœåŠ¡åç§°ä¸èƒ½ä¸ºç©º"),!1;r="micro rpc-conn --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --rpc-server-name="+t.ruleForm.rpcServerNames+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo}else r="micro rpc-conn --module-name="+t.ruleForm.moduleName+" --rpc-server-name="+t.ruleForm.rpcServerNames+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.ruleForm={}},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},W={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"module åç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·è¾“å…¥ module åç§°"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ° user æœåŠ¡ä»£ç ç›®å½•ï¼Œ"),o("br"),e._v("\n              è¿™é‡Œå¡«å†™ user æœåŠ¡å¯¹åº” go.mod æ–‡ä»¶çš„ module åç§°ã€‚\n            ")])])],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"å¿…å¡«å­—æ®µ"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œåˆ™è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("ã€‚"),o("br"),e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-server ğŸ¡† your_server\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"gRPC æœåŠ¡åç§°",prop:"rpcServerNames"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"æ”¯æŒå¡«å†™å¤šä¸ª gRPC æœåŠ¡åç§°"},model:{value:e.ruleForm.rpcServerNames,callback:function(t){e.$set(e.ruleForm,"rpcServerNames","string"==typeof t?t.trim():t)},expression:"ruleForm.rpcServerNames"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœæƒ³ç”Ÿæˆè¿æ¥å¤šä¸ª gRPC æœåŠ¡ä»£ç ï¼Œ"),o("br"),e._v("\n              å¤šä¸ª gRPC æœåŠ¡åç§°ä¹‹é—´ç”¨"),o("b",[e._v("é€—å·")]),e._v("åˆ†éš”ã€‚"),o("br"),e._v("\n              ç¤ºä¾‹ï¼šserver_name1,server_name2\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("br"),e._v(" "),o("b",[e._v("å¾®æœåŠ¡å¤šä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),o("br"),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var L=o("VU/8")(M,W,!1,function(e){o("3CNT")},"data-v-327a2276",null).exports,j={name:"MicroService",data:function(){return{title:"ç”Ÿæˆ service CRUD ä»£ç ",path:"micro-service",helpInfo:'\n      <p>åŸºäºè¡¨ sql ç”Ÿæˆçš„ service ä»£ç ï¼ŒåŒ…å«äº†è¡¨çš„ gRPC API çš„ CRUD å’Œæµ‹è¯•ä»£ç ï¼Œæ”¯æŒåˆ†é¡µã€è¿‡æ»¤ã€æ’åºæŸ¥è¯¢ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ï¼Œå°†æ–‡ä»¶å¤¹<b>api</b>å’Œ<b>internal</b>ç§»åŠ¨åˆ°<b>åŸºäº sql åˆ›å»º gRPC æœåŠ¡</b>æˆ–è€…<b>åŸºäº protobuf åˆ›å»º gRPC æœåŠ¡</b>çš„é¡¹ç›®ä»£ç æ–‡ä»¶å¤¹ä¸‹ã€‚</p>\n      <p>2. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤:  <b style="color: green">make proto</b></p>\n      <p>3. ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡:  <b style="color: green">make run</b></p>\n      <p>4. ä½¿ç”¨ <b>Goland</b> æˆ– <b>VSCode</b> æ‰“å¼€æ–‡ä»¶ <span style="color: chocolate">internal/service/xxx_client_test.go</span>ï¼Œæµ‹è¯• CRUD APIã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"è¯·è¾“å…¥æ•°æ®æº dsn",trigger:"blur"}],tableName:[{required:!0,message:"è¯·é€‰æ‹©è¡¨å",trigger:"change"}],dbDriver:[{required:!0,message:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",trigger:"blur"}],moduleName:[{required:!0,message:"è¯·è¾“å…¥ go module åç§°",trigger:"blur"}],serverName:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡åç§°",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),l="micro service --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,l,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("è·å–è¡¨åæˆåŠŸ"):t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œ"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œè¯·æ£€æŸ¥"+t.ruleForm.dbDriver+" dsn åœ°å€æ˜¯å¦æ­£ç¡®ã€æˆ–è€…"+t.ruleForm.dbDriver+"æœåŠ¡æ˜¯å¦è¿è¡Œã€‚")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},E={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"æ•°æ®åº“ç±»å‹",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é€‰æ‹©æ•°æ®åº“ç±»å‹ä¹‹åï¼Œç”Ÿæˆçš„ä»£ç ä¼šè‡ªåŠ¨åŒ¹é…è¯¥æ•°æ®åº“ç±»å‹ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æ•°æ®åº“ dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v("ã€"),o("b",[e._v("postgresql")]),e._v("ï¼Œå¡«å†™\n              dsn åœ°å€ï¼Œ"),o("br"),e._v("\n              dsn æ ¼å¼ï¼š"),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              æ³¨æ„ï¼šuser å’Œ password ä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              mongodb çš„ dsn æ”¯æŒ SRV è®°å½•ï¼Œæ ¼å¼ä¸ºï¼š"),o("br"),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              postgresql çš„ dsn æ”¯æŒæŒ‡å®š schemaï¼Œåœ¨ dsn åæ·»åŠ å‚æ•°ç¤ºä¾‹ï¼š"),o("br"),e._v(" "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("sqlite")]),e._v("ï¼Œå¡«å†™ sqlite db æ–‡ä»¶æœ¬åœ°ç»å¯¹è·¯å¾„ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼š"),o("b",[e._v("/tmp/test.db")]),e._v(" æˆ– "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("è·å–è¡¨å")])],1),e._v(" "),o("el-form-item",{attrs:{label:"è¡¨å",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©è¡¨åï¼Œæ”¯æŒå¤šé€‰",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("å…¨é€‰")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              è¡¨åéœ€é‡‡ç”¨å•æ•°å½¢å¼ï¼Œä¾‹å¦‚åº”ä½¿ç”¨"role"ï¼Œè€Œé"roles"ã€‚\n            ')])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œåˆ™è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("ã€‚"),o("br"),e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-server ğŸ¡† your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module åç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œ"),o("br"),e._v("\n              è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("æœåŠ¡å¯¹åº” go.mod æ–‡ä»¶çš„ module åç§°ã€‚\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"åµŒå…¥ Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model ç»“æ„ä½“å­—æ®µå¯¹åº”è¡¨çš„ idã€created_atã€"),o("br"),e._v("\n              updated_atã€deleted_at è¿™ 4 ä¸ªåˆ—åï¼Œæ”¯æŒè½¯åˆ é™¤ã€‚"),o("br"),e._v("\n              å¦‚æœè¡¨åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å¼€å¯åµŒå…¥ Modelï¼Œ"),o("br"),e._v("\n              å¦‚æœè¡¨ä¸åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å…³é—­åµŒå…¥ Modelã€‚\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API æ‰©å±•"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œç”Ÿæˆ5ä¸ªå¸¸ç”¨çš„ CRUD API ä»£ç ã€‚"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œåœ¨5ä¸ªå¸¸ç”¨çš„ CRUD API åŸºç¡€ä¸Šï¼Œé¢å¤–å¢åŠ äº†4ä¸ªAPIï¼Œ"),o("br"),e._v("\n              åˆ†åˆ«æ˜¯ DeleteByIDs, GetByCondition, ListByIDs, ListByLastIDã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("br"),e._v(" "),o("b",[e._v("å¾®æœåŠ¡å¤šä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),o("br"),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var U=o("VU/8")(j,E,!1,function(e){o("fFLM")},"data-v-d6bdec92",null).exports,B={name:"MicroService",data:function(){return{title:"ç”Ÿæˆ service+handler CRUD ä»£ç ",path:"micro-service-handler",helpInfo:'\n      <p>åŸºäºè¡¨ sql ç”Ÿæˆçš„ service+handler CRUD ä»£ç ï¼ŒåŒ…å«äº† gRPC+HTTP CRUD API ç›¸å…³ä»£ç ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ï¼ŒæŠŠæ–‡ä»¶å¤¹<b>api</b>å’Œ<b>internal</b>ç§»åŠ¨åˆ°<b>åŸºäº protobuf åˆ›å»º gRPC+HTTP æœåŠ¡</b>çš„é¡¹ç›®ä»£ç æ–‡ä»¶å¤¹ä¸‹ã€‚</p>\n      <p>2. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ç”Ÿæˆ gRPC å’Œ HTTP ç›¸å…³ä»£ç :  <b style="color: green">make proto</b></p>\n      <p>3. ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡:  <b style="color: green">make run</b></p>\n      <p>4. æµ‹è¯•æˆ–å‹æµ‹ api:<br />\n        &emsp;â—‹ ä½¿ç”¨ <b>Goland</b> æˆ– <b>VSCode</b> æ‰“å¼€æ–‡ä»¶ <span style="color: chocolate">internal/service/xxx_client_test.go</span>ï¼Œæµ‹è¯•æˆ–æ€§èƒ½å‹æµ‹ gRPC apiã€‚<br />\n        &emsp;â—‹ åœ¨æµè§ˆå™¨è®¿é—® <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a>ï¼Œæµ‹è¯• http apiã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"è¯·è¾“å…¥æ•°æ®æº dsn",trigger:"blur"}],tableName:[{required:!0,message:"è¯·é€‰æ‹©è¡¨å",trigger:"change"}],dbDriver:[{required:!0,message:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",trigger:"blur"}],moduleName:[{required:!0,message:"è¯·è¾“å…¥ go module åç§°",trigger:"blur"}],serverName:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡åç§°",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),l="micro service-handler --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,l,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("è·å–è¡¨åæˆåŠŸ"):t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œ"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œè¯·æ£€æŸ¥"+t.ruleForm.dbDriver+" dsn åœ°å€æ˜¯å¦æ­£ç¡®ã€æˆ–è€…"+t.ruleForm.dbDriver+"æœåŠ¡æ˜¯å¦è¿è¡Œã€‚")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},G={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"æ•°æ®åº“ç±»å‹",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é€‰æ‹©æ•°æ®åº“ç±»å‹ä¹‹åï¼Œç”Ÿæˆçš„ä»£ç ä¼šè‡ªåŠ¨åŒ¹é…è¯¥æ•°æ®åº“ç±»å‹ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æ•°æ®åº“ dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v("ã€"),o("b",[e._v("postgresql")]),e._v("ï¼Œå¡«å†™\n              dsn åœ°å€ï¼Œ"),o("br"),e._v("\n              dsn æ ¼å¼ï¼š"),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              æ³¨æ„ï¼šuser å’Œ password ä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              mongodb çš„ dsn æ”¯æŒ SRV è®°å½•ï¼Œæ ¼å¼ä¸ºï¼š"),o("br"),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              postgresql çš„ dsn æ”¯æŒæŒ‡å®š schemaï¼Œåœ¨ dsn åæ·»åŠ å‚æ•°ç¤ºä¾‹ï¼š"),o("br"),e._v(" "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("sqlite")]),e._v("ï¼Œå¡«å†™ sqlite db æ–‡ä»¶æœ¬åœ°ç»å¯¹è·¯å¾„ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼š"),o("b",[e._v("/tmp/test.db")]),e._v(" æˆ– "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("è·å–è¡¨å")])],1),e._v(" "),o("el-form-item",{attrs:{label:"è¡¨å",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©è¡¨åï¼Œæ”¯æŒå¤šé€‰",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("å…¨é€‰")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              è¡¨åéœ€é‡‡ç”¨å•æ•°å½¢å¼ï¼Œä¾‹å¦‚åº”ä½¿ç”¨"role"ï¼Œè€Œé"roles"ã€‚\n            ')])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œåˆ™è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("ã€‚"),o("br"),e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-server ğŸ¡† your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module åç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾‹å¦‚ç”Ÿæˆçš„ä»£ç å°†è¦ç§»åŠ¨åˆ°"),o("b",[e._v("user")]),e._v("æœåŠ¡ä»£ç ç›®å½•ï¼Œ"),o("br"),e._v("\n              è¿™é‡Œå¡«å†™"),o("b",[e._v("user")]),e._v("æœåŠ¡å¯¹åº” go.mod æ–‡ä»¶çš„ module åç§°ã€‚\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"åµŒå…¥ Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model ç»“æ„ä½“å­—æ®µå¯¹åº”è¡¨çš„ idã€created_atã€"),o("br"),e._v("\n              updated_atã€deleted_at è¿™ 4 ä¸ªåˆ—åï¼Œæ”¯æŒè½¯åˆ é™¤ã€‚"),o("br"),e._v("\n              å¦‚æœè¡¨åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å¼€å¯åµŒå…¥ Modelï¼Œ"),o("br"),e._v("\n              å¦‚æœè¡¨ä¸åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å…³é—­åµŒå…¥ Modelã€‚\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API æ‰©å±•"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œç”Ÿæˆ5ä¸ªå¸¸ç”¨çš„ CRUD API ä»£ç ã€‚"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œåœ¨5ä¸ªå¸¸ç”¨çš„ CRUD API åŸºç¡€ä¸Šï¼Œé¢å¤–å¢åŠ äº†4ä¸ªAPIï¼Œ"),o("br"),e._v("\n              åˆ†åˆ«æ˜¯ DeleteByIDs, GetByCondition, ListByIDs, ListByLastIDã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("br"),e._v(" "),o("b",[e._v("å¾®æœåŠ¡å¤šä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆçš„æ¨¡å—ä»£ç åªé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),o("br"),e._v("ç±»å‹çš„é¡¹ç›®ä»£ç ã€‚\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var V=o("VU/8")(B,G,!1,function(e){o("qk92")},"data-v-4983e7ca",null).exports,H={name:"MicroProtobuf",data:function(){return{title:"ç”Ÿæˆ protobuf CURD æè¿°ä¿¡æ¯",path:"micro-protobuf",helpInfo:'\n      <p>æŠŠè¡¨ sql è½¬æ¢ä¸º protobuf æè¿°ä¿¡æ¯ï¼Œä¸»è¦åŒ…å« CRUD APIã€‚</p>\n      <br />\n      <p>è§£å‹æ–‡ä»¶ï¼Œå°†æ–‡ä»¶å¤¹<b>api</b>ç§»åŠ¨åˆ°é¡¹ç›®ä»£ç æ–‡ä»¶å¤¹ä¸‹ï¼Œproto æ–‡ä»¶è¿˜æœ‰ä¸‹é¢ç”¨é€”ï¼š</p>\n      <p style="text-indent:2em;">â— ç”Ÿæˆ swagger æ–‡æ¡£ã€‚\n      <p style="text-indent:2em;">â— ä½œä¸º protoc çš„è‡ªå®šä¹‰çš„æ’ä»¶ç”Ÿæˆéœ€è¦çš„ä»£ç ã€‚\n      <p style="text-indent:2em;">â— åˆ›å»º web æœåŠ¡ã€‚\n      <p style="text-indent:2em;">â— åˆ›å»º gRPC æœåŠ¡ã€‚\n      <p style="text-indent:2em;">â— åˆ›å»º gRPC+HTTP æœåŠ¡ã€‚\n      <p style="text-indent:2em;">â— åˆ›å»º gRPC ç½‘å…³æœåŠ¡ã€‚\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",isWebProto:!1,isExtendedApi:!1},rules:{dsnAddr:[{required:!0,message:"è¯·è¾“å…¥æ•°æ®æº dsn",trigger:"blur"}],tableName:[{required:!0,message:"è¯·é€‰æ‹©è¡¨å",trigger:"change"}],dbDriver:[{required:!0,message:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",trigger:"blur"}],moduleName:[{required:!0,message:"è¯·è¾“å…¥ go module åç§°",trigger:"blur"}],serverName:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡åç§°",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.isWebProto=!1,e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),l="micro protobuf --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --web-type="+t.ruleForm.isWebProto+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,l,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[]}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("è·å–è¡¨åæˆåŠŸ"):t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œ"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œè¯·æ£€æŸ¥"+t.ruleForm.dbDriver+" dsn åœ°å€æ˜¯å¦æ­£ç¡®ã€æˆ–è€…"+t.ruleForm.dbDriver+"æœåŠ¡æ˜¯å¦è¿è¡Œã€‚")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},O={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"æ•°æ®åº“ç±»å‹",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é€‰æ‹©æ•°æ®åº“ç±»å‹ä¹‹åï¼Œç”Ÿæˆçš„ä»£ç ä¼šè‡ªåŠ¨åŒ¹é…è¯¥æ•°æ®åº“ç±»å‹ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æ•°æ®åº“ dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v("ã€"),o("b",[e._v("postgresql")]),e._v("ï¼Œå¡«å†™\n              dsn åœ°å€ï¼Œ"),o("br"),e._v("\n              dsn æ ¼å¼ï¼š"),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              æ³¨æ„ï¼šuser å’Œ password ä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              mongodb çš„ dsn æ”¯æŒ SRV è®°å½•ï¼Œæ ¼å¼ä¸ºï¼š"),o("br"),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              postgresql çš„ dsn æ”¯æŒæŒ‡å®š schemaï¼Œåœ¨ dsn åæ·»åŠ å‚æ•°ç¤ºä¾‹ï¼š"),o("br"),e._v(" "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("sqlite")]),e._v("ï¼Œå¡«å†™ sqlite db æ–‡ä»¶æœ¬åœ°ç»å¯¹è·¯å¾„ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼š"),o("b",[e._v("/tmp/test.db")]),e._v(" æˆ– "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("è·å–è¡¨å")])],1),e._v(" "),o("el-form-item",{attrs:{label:"è¡¨å",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©è¡¨åï¼Œæ”¯æŒå¤šé€‰",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("å…¨é€‰")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              è¡¨åéœ€é‡‡ç”¨å•æ•°å½¢å¼ï¼Œä¾‹å¦‚åº”ä½¿ç”¨"role"ï¼Œè€Œé"roles"ã€‚\n            ')])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-server ğŸ¡† your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module åç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod æ–‡ä»¶çš„ module åç§°ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"åŒ…å«è·¯ç”±å’Œ swagger"}},[o("el-switch",{model:{value:e.ruleForm.isWebProto,callback:function(t){e.$set(e.ruleForm,"isWebProto",t)},expression:"ruleForm.isWebProto"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœå¼€å¯ï¼Œç”Ÿæˆçš„ proto æ–‡ä»¶åŒ…å«è·¯ç”±å’Œ swagger æè¿°ä¿¡æ¯ã€‚"),o("br"),e._v("\n              å¦‚æœå…³é—­ï¼Œåˆ™ä¸åŒ…å«è·¯ç”±å’Œ swagger æè¿°ä¿¡æ¯ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API æ‰©å±•"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œç”Ÿæˆ5ä¸ªå¸¸ç”¨çš„ CRUD API ä»£ç ã€‚"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œåœ¨5ä¸ªå¸¸ç”¨çš„ CRUD API åŸºç¡€ä¸Šï¼Œé¢å¤–å¢åŠ äº†4ä¸ªAPIï¼Œ"),o("br"),e._v("\n              åˆ†åˆ«æ˜¯ DeleteByIDs, GetByCondition, ListByIDs, ListByLastIDã€‚\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var K=o("VU/8")(H,O,!1,function(e){o("bAPV")},"data-v-7c3a3161",null).exports,Z={name:"WebHTTPPb",data:function(){return{title:"",path:"web-http-pb",helpInfo:'\n      <p><b>åŸºäº protobuf åˆ›å»º web æœåŠ¡</b> ç”Ÿæˆäº†é€šç”¨çš„ web æœåŠ¡åç«¯ä»£ç ï¼Œæ›´å¤šå¼€å‘ç»†èŠ‚ï¼Œè¯·å‚è€ƒ <a href="https://go-sponge.com/zh/guide/web/based-on-protobuf.html" target="_blank">å¼€å‘æŒ‡å—</a>ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ã€‚</p>\n      <p>2. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ç”Ÿæˆä»£ç :  <b style="color: green">make proto</b></p>\n      <p>3. æ‰“å¼€æ–‡ä»¶ <span style="color: chocolate">internal/handler/xxx.go</span>, æ ¹æ®æ¨¡æ¿ä»£ç ç¤ºä¾‹å¡«å……ä»£ç æ›¿æ¢ <span style="color: chocolate">panic("implement me")</span></p>\n      <p>4. ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡:  <b style="color: green">make run</b></p>\n      <p>5. åœ¨æµè§ˆå™¨è®¿é—® <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a>ï¼Œæµ‹è¯• apiã€‚</p>\n      <br />\n      <p>æŠ€æœ¯æ ˆï¼š<b>Goã€Ginã€Protobufã€Zapã€Prometheusã€OpenTracing</b> ç­‰ã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"è¯·è¾“å…¥ go module åç§°",trigger:"blur"}],serverName:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡åç§°",trigger:"blur"}],projectName:[{required:!0,message:"è¯·è¾“å…¥é¡¹ç›®åç§°",trigger:"blur"}],protobufFile:[{required:!0,message:"è¯·é€‰æ‹© proto æ–‡ä»¶",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\n// ç¬¬ä¸€ä¸ª user æ˜¯ go module åç§°ï¼Œç¬¬äºŒä¸ª user æ˜¯æœåŠ¡åç§°ï¼Œv1æ˜¯ç‰ˆæœ¬å·\noption go_package = "user/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // Login ç™»å½•æ³¨é‡Š\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "ç™»å½•",\n      description: "ä½¿ç”¨é‚®ç®±ç™»å½•",\n    };\n  }\n\n  // æ³¨æ„ï¼šä¸‹é¢ä¸¤ç±» rpc ä¼šè¢«å¿½ç•¥ç”Ÿæˆ http ç›¸å…³ä»£ç \n  //    1. åœ¨ rpc æ²¡æœ‰è®¾ç½® google.api.httpï¼Œä¾‹å¦‚ SayHi\n  //    2. rpc å±äº stream ç±»å‹ï¼Œä¾‹å¦‚ ClientSteamã€ServerSteamã€BidiSteam\n\n  //rpc SayHi(HelloRequest) returns (HelloReply) {}\n  //rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  //rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  //rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="web http-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("ä¸‹è½½ä»£ç å¤±è´¥")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},J={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#e403a4"},attrs:{href:"https://go-sponge.com/zh/guide/web/based-on-protobuf.html",target:"_blank"}},[e._v("åŸºäº protobuf åˆ› å»º web æœåŠ¡")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          â€”â€” ç”Ÿæˆé€šç”¨çš„ web æœåŠ¡åç«¯ä»£ç ")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto æ–‡ä»¶",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("æŸ¥çœ‹ protobuf æ–‡ä»¶ç¤ºä¾‹")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("é€‰æ‹© proto æ–‡ä»¶")]),e._v("ï¼Œæ”¯æŒå¤šæ–‡ä»¶ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-server ğŸ¡† your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module åç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod æ–‡ä»¶çš„ module åç§°ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"é¡¹ç›®åç§°",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœåç§°åŒ…æ‹¬å¤§å†™å­—æ¯ï¼Œä¼šè½¬æ¢ä¸ºå°å†™ï¼Œå¹¶ç”¨ä¸­åˆ’çº¿åˆ†éš”ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker é•œåƒä»“åº“"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              docker é•œåƒä»“åº“åœ°å€ï¼Œé»˜è®¤å€¼æ˜¯"),o("b",[e._v("image-repo-host")]),e._v("ï¼Œè¿™ä¸ªå‚æ•°"),o("br"),e._v("\n              ç”¨åœ¨æ„å»º docker é•œåƒã€k8s çš„éƒ¨ç½²è„šæœ¬ä¸Šï¼Œå¦‚æœä½¿ç”¨ docker å®˜æ–¹"),o("br"),e._v("\n              é•œåƒä»“åº“ï¼Œåªéœ€å¡«å†™æ³¨å†Œ docker ä»“åº“çš„ç”¨æˆ·åã€‚å¦‚æœä½¿ç”¨ç§æœ‰ä»“"),o("br"),e._v("\n              åº“åœ°å€ï¼Œéœ€è¦å¡«å†™å®Œæ•´ä»“åº“åœ°å€ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("b",[e._v("å¾®æœåŠ¡å¤š"),o("br"),e._v("\n                ä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„æœåŠ¡ä»£ç ï¼Œå³ä½¿æŠŠå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ª"),o("br"),e._v("\n              git ä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä»£ç ä¹‹é—´ä¸å¯å¤ç”¨ã€‚"),o("br"),e._v("ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),e._v("ç±»å‹çš„æœåŠ¡"),o("br"),e._v("\n              ä»£ç ï¼Œå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ª git ä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä¹‹é—´çš„ä»£ç å¯ä»¥"),o("br"),e._v("\n              å¤ç”¨ã€‚å¦‚æœåé¢åœ¨é¡µé¢ç”Ÿæˆçš„æ¨¡å—ä»£ç ç§»åŠ¨åˆ°æ­¤æœåŠ¡ï¼Œä¹Ÿéœ€è¦å¼€å¯"),o("br"),e._v("è¿™ä¸ªé€‰é¡¹ã€‚"),o("br"),e._v("\n              ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var X=o("VU/8")(Z,J,!1,function(e){o("C642")},"data-v-4648dc19",null).exports,Q={name:"MicroRPCPb",data:function(){return{title:"",path:"micro-rpc-pb",helpInfo:'\n      <p><b>åŸºäº protobuf åˆ›å»º gRPC æœåŠ¡</b> ç”Ÿæˆäº†é€šç”¨çš„ gRPC æœåŠ¡ä»£ç ï¼Œæ›´å¤šå¼€å‘ç»†èŠ‚ï¼Œè¯·å‚è€ƒ <a href="https://go-sponge.com/zh/guide/grpc/based-on-protobuf.html" target="_blank">å¼€å‘æŒ‡å—</a>ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ã€‚</p>\n      <p>2. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ç”Ÿæˆä»£ç :  <b style="color: green">make proto</b></p>\n      <p>3. æ‰“å¼€æ–‡ä»¶ <span style="color: chocolate">internal/service/xxx.go</span>, æ ¹æ®æ¨¡æ¿ä»£ç ç¤ºä¾‹å¡«å……ä»£ç æ›¿æ¢ <span style="color: chocolate">panic("implement me")</span></p>\n      <p>4. ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡:  <b style="color: green">make run</b></p>\n      <p>5. ä½¿ç”¨ <b>Goland</b> æˆ– <b>VSCode</b> æ‰“å¼€æ–‡ä»¶ <span style="color: chocolate">internal/service/xxx_client_test.go</span>ï¼Œæµ‹è¯• apiã€‚</p>\n      <br />\n      <p>æŠ€æœ¯æ ˆï¼š<b>Goã€gRPCã€Protobufã€Zapã€Prometheusã€OpenTracing</b> ç­‰ã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"è¯·è¾“å…¥ go module åç§°",trigger:"blur"}],serverName:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡åç§°",trigger:"blur"}],projectName:[{required:!0,message:"è¯·è¾“å…¥é¡¹ç›®åç§°",trigger:"blur"}],protobufFile:[{required:!0,message:"è¯·é€‰æ‹© proto æ–‡ä»¶",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\n// ç¬¬ä¸€ä¸ª user æ˜¯ go module åç§°ï¼Œç¬¬äºŒä¸ª user æ˜¯æœåŠ¡åç§°ï¼Œv1æ˜¯ç‰ˆæœ¬å·\noption go_package = "user/api/user/v1;v1";\n\nservice user {\n  // Login ç™»å½•æ³¨é‡Š\n  rpc Login(LoginRequest) returns (LoginReply) {}\n\n  rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro rpc-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("ä¸‹è½½ä»£ç å¤±è´¥")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Y={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#2ba207"},attrs:{href:"https://go-sponge.com/zh/guide/grpc/based-on-protobuf.html",target:"_blank"}},[e._v("åŸºäº protobuf åˆ›å»º gRPC æœåŠ¡")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          â€”â€” ç”Ÿæˆé€šç”¨çš„å¾®æœåŠ¡ä»£ç ")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto æ–‡ä»¶",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("æŸ¥çœ‹ protobuf æ–‡ä»¶ç¤ºä¾‹")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("é€‰æ‹© proto æ–‡ä»¶")]),e._v("ï¼Œæ”¯æŒå¤šæ–‡ä»¶ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-server ğŸ¡† your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module åç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod æ–‡ä»¶çš„ module åç§°ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"é¡¹ç›®åç§°",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœåç§°åŒ…æ‹¬å¤§å†™å­—æ¯ï¼Œä¼šè½¬æ¢ä¸ºå°å†™ï¼Œå¹¶ç”¨ä¸­åˆ’çº¿åˆ†éš”ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker é•œåƒä»“åº“"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              docker é•œåƒä»“åº“åœ°å€ï¼Œé»˜è®¤å€¼æ˜¯"),o("b",[e._v("image-repo-host")]),e._v("ï¼Œè¿™ä¸ªå‚æ•°"),o("br"),e._v("\n              ç”¨åœ¨æ„å»º docker é•œåƒã€k8s çš„éƒ¨ç½²è„šæœ¬ä¸Šï¼Œå¦‚æœä½¿ç”¨ docker å®˜æ–¹"),o("br"),e._v("\n              é•œåƒä»“åº“ï¼Œåªéœ€å¡«å†™æ³¨å†Œ docker ä»“åº“çš„ç”¨æˆ·åã€‚å¦‚æœä½¿ç”¨ç§æœ‰ä»“"),o("br"),e._v("\n              åº“åœ°å€ï¼Œéœ€è¦å¡«å†™å®Œæ•´ä»“åº“åœ°å€ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("b",[e._v("å¾®æœåŠ¡å¤š"),o("br"),e._v("\n                ä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„æœåŠ¡ä»£ç ï¼Œå³ä½¿æŠŠå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ª"),o("br"),e._v("\n              git ä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä»£ç ä¹‹é—´ä¸å¯å¤ç”¨ã€‚"),o("br"),e._v("ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),e._v("ç±»å‹çš„æœåŠ¡"),o("br"),e._v("\n              ä»£ç ï¼Œå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ª git ä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä¹‹é—´çš„ä»£ç å¯ä»¥"),o("br"),e._v("\n              å¤ç”¨ã€‚å¦‚æœåé¢åœ¨é¡µé¢ç”Ÿæˆçš„æ¨¡å—ä»£ç ç§»åŠ¨åˆ°æ­¤æœåŠ¡ï¼Œä¹Ÿéœ€è¦å¼€å¯"),o("br"),e._v("è¿™ä¸ªé€‰é¡¹ã€‚"),o("br"),e._v("\n              ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var ee=o("VU/8")(Q,Y,!1,function(e){o("ZmZt")},"data-v-76a67862",null).exports,te={name:"MicroGRPCHTTP",data:function(){return{title:"",path:"micro-grpc-http",helpInfo:'\n      <p><b>åŸºäº sql åˆ›å»º gRPC+HTTP æœåŠ¡</b> ç”Ÿæˆäº†åŒ…æ‹¬äº† CRUD API çš„å®Œæ•´å¾®æœåŠ¡ä»£ç ï¼Œæ›´å¤šå¼€å‘ç»†èŠ‚ï¼Œè¯·å‚è€ƒ <a href="https://go-sponge.com/zh/guide/grpc-http/based-on-sql.html" target="_blank">å¼€å‘æŒ‡å—</a>ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ã€‚</p>\n      <p>2. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ç”Ÿæˆä»£ç :  <b style="color: green">make proto</b></p>\n      <p>3. ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡:  <b style="color: green">make run</b></p>\n      <p>5. æµ‹è¯•æˆ–å‹æµ‹ api:<br />\n        &emsp;â—‹ ä½¿ç”¨ <b>Goland</b> æˆ– <b>VSCode</b> æ‰“å¼€æ–‡ä»¶ <span style="color: chocolate">internal/service/xxx_client_test.go</span>ï¼Œæµ‹è¯•æˆ–æ€§èƒ½å‹æµ‹ gRPC apiã€‚<br />\n        &emsp;â—‹ åœ¨æµè§ˆå™¨è®¿é—® <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a>ï¼Œæµ‹è¯• http apiã€‚</p>\n      <br />\n      <p>æŠ€æœ¯æ ˆï¼š <b>Goã€gRPCã€{{.DBDriver}}ã€go-redisã€Protobufã€Zapã€Prometheusã€OpenTracing</b> ç­‰ã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",projectName:"",repoAddr:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"è¯·è¾“å…¥æ•°æ®æº dsn",trigger:"blur"}],tableName:[{required:!0,message:"è¯·é€‰æ‹©è¡¨å",trigger:"change"}],dbDriver:[{required:!0,message:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",trigger:"blur"}],moduleName:[{required:!0,message:"è¯·è¾“å…¥ go module åç§°",trigger:"blur"}],serverName:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡åç§°",trigger:"blur"}],projectName:[{required:!0,message:"è¯·è¾“å…¥é¡¹ç›®åç§°",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),l="micro grpc-http --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi,i=t.helpInfo;i="mongodb"===t.ruleForm.dbDriver?i.replace("{{.DBDriver}}","Mongo"):i.replace("{{.DBDriver}}","Gorm"),t.$refs.downloadCode.execution(o,t.path,l,i)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("è·å–è¡¨åæˆåŠŸ"):t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œ"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œè¯·æ£€æŸ¥"+t.ruleForm.dbDriver+" dsn åœ°å€æ˜¯å¦æ­£ç¡®ã€æˆ–è€…"+t.ruleForm.dbDriver+"æœåŠ¡æ˜¯å¦è¿è¡Œã€‚")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},oe={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#00CED1"},attrs:{href:"https://go-sponge.com/zh/guide/grpc-http/based-on-sql.html",target:"_blank"}},[e._v("åŸºäº sql åˆ›å»º gRPC+HTTP æœåŠ¡")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          â€”â€” ç”Ÿæˆæ”¯æŒ gRPC å’Œ HTTP åè®®çš„å®Œæ•´å¾®æœåŠ¡ä»£ç ")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"æ•°æ®åº“ç±»å‹",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é€‰æ‹©æ•°æ®åº“ç±»å‹ä¹‹åï¼Œç”Ÿæˆçš„ä»£ç ä¼šè‡ªåŠ¨åŒ¹é…è¯¥æ•°æ®åº“ç±»å‹ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æ•°æ®åº“ dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v("ã€"),o("b",[e._v("postgresql")]),e._v("ï¼Œå¡«å†™\n              dsn åœ°å€ï¼Œ"),o("br"),e._v("\n              dsn æ ¼å¼ï¼š"),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              æ³¨æ„ï¼šuser å’Œ password ä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              mongodb çš„ dsn æ”¯æŒ SRV è®°å½•ï¼Œæ ¼å¼ä¸ºï¼š"),o("br"),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              postgresql çš„ dsn æ”¯æŒæŒ‡å®š schemaï¼Œåœ¨ dsn åæ·»åŠ å‚æ•°ç¤ºä¾‹ï¼š"),o("br"),e._v(" "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("sqlite")]),e._v("ï¼Œå¡«å†™ sqlite db æ–‡ä»¶æœ¬åœ°ç»å¯¹è·¯å¾„ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼š"),o("b",[e._v("/tmp/test.db")]),e._v(" æˆ– "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("è·å–è¡¨å")])],1),e._v(" "),o("el-form-item",{attrs:{label:"è¡¨å",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©è¡¨åï¼Œæ”¯æŒå¤šé€‰",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("å…¨é€‰")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              è¡¨åéœ€é‡‡ç”¨å•æ•°å½¢å¼ï¼Œä¾‹å¦‚åº”ä½¿ç”¨"role"ï¼Œè€Œé"roles"ã€‚'),o("br"),e._v("\n              å¦‚éœ€æ–°å¢æ•°æ®è¡¨ï¼Œè¯·é€šè¿‡"),o("br"),e._v(" "),o("b",[e._v("ã€Publicã€‘â†’ã€ç”Ÿæˆ Service CRUD ä»£ç ã€‘")]),o("br"),e._v("\n              èœå•ç”Ÿæˆä»£ç ï¼Œä¹‹åå°†å…¶ç§»åŠ¨åˆ°é¡¹ç›®ç›¸åº”ä½ç½®å³å¯ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-server ğŸ¡† your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module åç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod æ–‡ä»¶çš„ module åç§°ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"é¡¹ç›®åç§°",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœåç§°åŒ…æ‹¬å¤§å†™å­—æ¯ï¼Œä¼šè½¬æ¢ä¸ºå°å†™ï¼Œå¹¶ç”¨ä¸­åˆ’çº¿åˆ†éš”ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker é•œåƒä»“åº“"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              docker é•œåƒä»“åº“åœ°å€ï¼Œé»˜è®¤å€¼æ˜¯"),o("b",[e._v("image-repo-host")]),e._v("ï¼Œè¿™ä¸ªå‚æ•°"),o("br"),e._v("\n              ç”¨åœ¨æ„å»º docker é•œåƒã€k8s çš„éƒ¨ç½²è„šæœ¬ä¸Šï¼Œå¦‚æœä½¿ç”¨ docker å®˜æ–¹"),o("br"),e._v("\n              é•œåƒä»“åº“ï¼Œåªéœ€å¡«å†™æ³¨å†Œ docker ä»“åº“çš„ç”¨æˆ·åã€‚å¦‚æœä½¿ç”¨ç§æœ‰ä»“"),o("br"),e._v("\n              åº“åœ°å€ï¼Œéœ€è¦å¡«å†™å®Œæ•´ä»“åº“åœ°å€ã€‚\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"åµŒå…¥ Model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              gorm.Model ç»“æ„ä½“å­—æ®µå¯¹åº”è¡¨çš„ idã€created_atã€"),o("br"),e._v("\n              updated_atã€deleted_at è¿™ 4 ä¸ªåˆ—åï¼Œæ”¯æŒè½¯åˆ é™¤ã€‚"),o("br"),e._v("\n              å¦‚æœè¡¨åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å¼€å¯åµŒå…¥ Modelï¼Œ"),o("br"),e._v("\n              å¦‚æœè¡¨ä¸åŒ…å«è¿™äº›åˆ—åï¼Œè¯·å…³é—­åµŒå…¥ Modelã€‚\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API æ‰©å±•"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œç”Ÿæˆ5ä¸ªå¸¸ç”¨çš„ CRUD API ä»£ç ã€‚"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œåœ¨5ä¸ªå¸¸ç”¨çš„ CRUD API åŸºç¡€ä¸Šï¼Œé¢å¤–å¢åŠ äº†4ä¸ªAPIï¼Œ"),o("br"),e._v("\n              åˆ†åˆ«æ˜¯ DeleteByIDs, GetByCondition, ListByIDs, ListByLastIDã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("b",[e._v("å¾®æœåŠ¡å¤š"),o("br"),e._v("\n                ä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„æœåŠ¡ä»£ç ï¼Œå³ä½¿æŠŠå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ª"),o("br"),e._v("\n              git ä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä»£ç ä¹‹é—´ä¸å¯å¤ç”¨ã€‚"),o("br"),e._v("ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),e._v("ç±»å‹çš„æœåŠ¡"),o("br"),e._v("\n              ä»£ç ï¼Œå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ª git ä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä¹‹é—´çš„ä»£ç å¯ä»¥"),o("br"),e._v("\n              å¤ç”¨ã€‚å¦‚æœåé¢åœ¨é¡µé¢ç”Ÿæˆçš„æ¨¡å—ä»£ç ç§»åŠ¨åˆ°æ­¤æœåŠ¡ï¼Œä¹Ÿéœ€è¦å¼€å¯"),o("br"),e._v("è¿™ä¸ªé€‰é¡¹ã€‚"),o("br"),e._v("\n              ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1)])],1)},staticRenderFns:[]};var re=o("VU/8")(te,oe,!1,function(e){o("VNrH")},"data-v-7987a52b",null).exports,le={name:"MicroGRPCHTTPPb",data:function(){return{title:"",path:"micro-grpc-http-pb",helpInfo:'\n      <p><b>åŸºäº protobuf åˆ›å»º gRPC+HTTP æœåŠ¡</b> ç”Ÿæˆäº†é€šç”¨çš„ gRPC+HTTP æœåŠ¡ä»£ç ï¼Œæ›´å¤šå¼€å‘ç»†èŠ‚ï¼Œè¯·å‚è€ƒ <a href="https://go-sponge.com/zh/guide/grpc-http/based-on-protobuf.html" target="_blank">å¼€å‘æŒ‡å—</a>ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ã€‚</p>\n      <p>2. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ç”Ÿæˆä»£ç :  <b style="color: green">make proto</b></p>\n      <p>3. æ‰“å¼€æ–‡ä»¶ <span style="color: chocolate">internal/service/xxx.go</span>, æ ¹æ®æ¨¡æ¿ä»£ç ç¤ºä¾‹å¡«å……ä»£ç æ›¿æ¢ <span style="color: chocolate">panic("implement me")</span></p>\n      <p>4. ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡:  <b style="color: green">make run</b></p>\n      <p>5. æµ‹è¯•æˆ–å‹æµ‹ api:<br />\n        &emsp;â—‹ ä½¿ç”¨ <b>Goland</b> æˆ– <b>VSCode</b> æ‰“å¼€æ–‡ä»¶ <span style="color: chocolate">internal/service/xxx_client_test.go</span>ï¼Œæµ‹è¯•æˆ–æ€§èƒ½å‹æµ‹ gRPC apiã€‚<br />\n        &emsp;â—‹ åœ¨æµè§ˆå™¨è®¿é—® <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a>ï¼Œæµ‹è¯• http apiã€‚</p>\n      <br />\n      <p>æŠ€æœ¯æ ˆï¼š<b>Goã€Ginã€gRPCã€Protobufã€Zapã€Prometheusã€OpenTracing</b> ç­‰ã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"è¯·è¾“å…¥ go module åç§°",trigger:"blur"}],serverName:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡åç§°",trigger:"blur"}],projectName:[{required:!0,message:"è¯·è¾“å…¥é¡¹ç›®åç§°",trigger:"blur"}],protobufFile:[{required:!0,message:"è¯·é€‰æ‹© proto æ–‡ä»¶",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\n// ç¬¬ä¸€ä¸ª user æ˜¯ go module åç§°ï¼Œç¬¬äºŒä¸ª user æ˜¯æœåŠ¡åç§°ï¼Œv1æ˜¯ç‰ˆæœ¬å·\noption go_package = "user/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // Login ç™»å½•æ³¨é‡Š\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "ç™»å½•",\n      description: "ä½¿ç”¨é‚®ç®±ç™»å½•",\n    };\n  }\n\n  // æ³¨æ„ï¼šä¸‹é¢ä¸¤ç±» rpc ä¼šè¢«å¿½ç•¥ç”Ÿæˆ http ç›¸å…³ä»£ç \n  //    1. åœ¨ rpc æ²¡æœ‰è®¾ç½® google.api.httpï¼Œä¾‹å¦‚ SayHi\n  //    2. rpc å±äº stream ç±»å‹ï¼Œä¾‹å¦‚ ClientSteamã€ServerSteamã€BidiSteam\n\n  rpc SayHi(HelloRequest) returns (HelloReply) {}\n  rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro grpc-http-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("ä¸‹è½½ä»£ç å¤±è´¥")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},ie={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#21A3F1"},attrs:{href:"https://go-sponge.com/zh/guide/grpc-http/based-on-protobuf.html",target:"_blank"}},[e._v("åŸºäº protobuf åˆ›å»º gRPC+HTTP æœåŠ¡")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          â€”â€” ç”Ÿæˆæ”¯æŒ gRPC å’Œ HTTP åè®®çš„é€šç”¨å¾®æœåŠ¡ä»£ç ")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto æ–‡ä»¶",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("æŸ¥çœ‹ protobuf æ–‡ä»¶ç¤ºä¾‹")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("é€‰æ‹© proto æ–‡ä»¶")]),e._v("ï¼Œæ”¯æŒå¤šæ–‡ä»¶ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-server ğŸ¡† your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module åç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod æ–‡ä»¶çš„ module åç§°ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"é¡¹ç›®åç§°",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœåç§°åŒ…æ‹¬å¤§å†™å­—æ¯ï¼Œä¼šè½¬æ¢ä¸ºå°å†™ï¼Œå¹¶ç”¨ä¸­åˆ’çº¿åˆ†éš”ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker é•œåƒä»“åº“"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              docker é•œåƒä»“åº“åœ°å€ï¼Œé»˜è®¤å€¼æ˜¯"),o("b",[e._v("image-repo-host")]),e._v("ï¼Œè¿™ä¸ªå‚æ•°"),o("br"),e._v("\n              ç”¨åœ¨æ„å»º docker é•œåƒã€k8s çš„éƒ¨ç½²è„šæœ¬ä¸Šï¼Œå¦‚æœä½¿ç”¨ docker å®˜æ–¹"),o("br"),e._v("\n              é•œåƒä»“åº“ï¼Œåªéœ€å¡«å†™æ³¨å†Œ docker ä»“åº“çš„ç”¨æˆ·åã€‚å¦‚æœä½¿ç”¨ç§æœ‰ä»“"),o("br"),e._v("\n              åº“åœ°å€ï¼Œéœ€è¦å¡«å†™å®Œæ•´ä»“åº“åœ°å€ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("b",[e._v("å¾®æœåŠ¡å¤š"),o("br"),e._v("\n                ä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„æœåŠ¡ä»£ç ï¼Œå³ä½¿æŠŠå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ª"),o("br"),e._v("\n              git ä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä»£ç ä¹‹é—´ä¸å¯å¤ç”¨ã€‚"),o("br"),e._v("ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),e._v("ç±»å‹çš„æœåŠ¡"),o("br"),e._v("\n              ä»£ç ï¼Œå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ª git ä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä¹‹é—´çš„ä»£ç å¯ä»¥"),o("br"),e._v("\n              å¤ç”¨ã€‚å¦‚æœåé¢åœ¨é¡µé¢ç”Ÿæˆçš„æ¨¡å—ä»£ç ç§»åŠ¨åˆ°æ­¤æœåŠ¡ï¼Œä¹Ÿéœ€è¦å¼€å¯"),o("br"),e._v("è¿™ä¸ªé€‰é¡¹ã€‚"),o("br"),e._v("\n              ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var se=o("VU/8")(le,ie,!1,function(e){o("dvqj")},"data-v-745b6c2a",null).exports,ae={name:"MicroRPCGwPb",data:function(){return{title:"",path:"micro-rpc-gw-pb",helpInfo:'\n      <p><b>åŸºäº protobuf åˆ›å»ºçš„ gRPC ç½‘å…³æœåŠ¡</b> ç”Ÿæˆäº†ç”¨äºæŠŠ http è¯·æ±‚è½¬æ¢ä¸º gRPC è¯·æ±‚çš„æœåŠ¡ä»£ç ï¼Œæ›´å¤šå¼€å‘ç»†èŠ‚ï¼Œè¯·å‚è€ƒ <a href="https://go-sponge.com/zh/guide/grpc-gateway/based-on-protobuf.html" target="_blank">å¼€å‘æŒ‡å—</a>ã€‚</p>\n      <br />\n      <p>1. è§£å‹æ–‡ä»¶ã€‚</p>\n      <p>2. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤ç”Ÿæˆä»£ç ï¼š<b style="color: green">make proto</b></p>\n      <p>3. æ‰“å¼€æ–‡ä»¶ <span style="color: chocolate">internal/service/xxx.go</span>, æ ¹æ®æ¨¡æ¿ä»£ç ç¤ºä¾‹å¡«å……ä»£ç æ›¿æ¢ <span style="color: chocolate">panic("implement me")</span></p>\n      <p>4. ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡ï¼š<b style="color: green">make run</b></p>\n      <p>5. å¤åˆ¶ <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> åˆ°æµè§ˆå™¨æµ‹è¯• apiã€‚</p>\n      <br />\n      <p>æŠ€æœ¯æ ˆï¼š<b>Goã€Ginã€Protobufã€Zapã€Prometheusã€OpenTracing</b> ç­‰ã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"è¯·è¾“å…¥ go module åç§°",trigger:"blur"}],serverName:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡åç§°",trigger:"blur"}],projectName:[{required:!0,message:"è¯·è¾“å…¥é¡¹ç›®åç§°",trigger:"blur"}],protobufFile:[{required:!0,message:"è¯·é€‰æ‹© proto æ–‡ä»¶",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\n// ç¬¬ä¸€ä¸ª user æ˜¯ go module åç§°ï¼Œç¬¬äºŒä¸ª user æ˜¯æœåŠ¡åç§°ï¼Œv1æ˜¯ç‰ˆæœ¬å·\noption go_package = "user/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // Login ç™»å½•æ³¨é‡Š\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "ç™»å½•",\n      description: "ä½¿ç”¨é‚®ç®±ç™»å½•",\n    };\n  }\n\n  // æ³¨æ„ï¼šä¸‹é¢ä¸¤ç±» rpc ä¼šè¢«å¿½ç•¥ç”Ÿæˆ http ç›¸å…³ä»£ç \n  //    1. åœ¨ rpc æ²¡æœ‰è®¾ç½® google.api.httpï¼Œä¾‹å¦‚ SayHi\n  //    2. rpc å±äº stream ç±»å‹ï¼Œä¾‹å¦‚ ClientSteamã€ServerSteamã€BidiSteam\n\n  //rpc SayHi(HelloRequest) returns (HelloReply) {}\n  //rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  //rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  //rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro rpc-gw-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("ä¸‹è½½ä»£ç å¤±è´¥")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},ne={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#CF40FF"},attrs:{href:"https://go-sponge.com/zh/guide/grpc-gateway/based-on-protobuf.html",target:"_blank"}},[e._v("åŸºäº protobuf åˆ›å»º gRPC ç½‘å…³æœåŠ¡")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("â€”â€” ç”Ÿæˆ gRPC ç½‘å…³æœåŠ¡ä»£ç ")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto æ–‡ä»¶",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("æŸ¥çœ‹ protobuf æ–‡ä»¶ç¤ºä¾‹")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("é€‰æ‹© proto æ–‡ä»¶")]),e._v("ï¼Œæ”¯æŒå¤šæ–‡ä»¶ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"æœåŠ¡åç§°",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v('\n              å¦‚æœåç§°åŒ…æ‹¬ä¸­åˆ’çº¿"-"ï¼Œä¼šè½¬æ¢ä¸ºä¸‹åˆ’çº¿"_"ï¼Œ'),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyour-server ğŸ¡† your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module åç§°",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              go.mod æ–‡ä»¶çš„ module åç§°ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"é¡¹ç›®åç§°",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœåç§°åŒ…æ‹¬å¤§å†™å­—æ¯ï¼Œä¼šè½¬æ¢ä¸ºå°å†™ï¼Œå¹¶ç”¨ä¸­åˆ’çº¿åˆ†éš”ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼šyourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker é•œåƒä»“åº“"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              docker é•œåƒä»“åº“åœ°å€ï¼Œé»˜è®¤å€¼æ˜¯"),o("b",[e._v("image-repo-host")]),e._v("ï¼Œè¿™ä¸ªå‚æ•°"),o("br"),e._v("\n              ç”¨åœ¨æ„å»º docker é•œåƒã€k8s çš„éƒ¨ç½²è„šæœ¬ä¸Šï¼Œå¦‚æœä½¿ç”¨ docker å®˜æ–¹"),o("br"),e._v("\n              é•œåƒä»“åº“ï¼Œåªéœ€å¡«å†™æ³¨å†Œ docker ä»“åº“çš„ç”¨æˆ·åã€‚å¦‚æœä½¿ç”¨ç§æœ‰ä»“"),o("br"),e._v("\n              åº“åœ°å€ï¼Œéœ€è¦å¡«å†™å®Œæ•´ä»“åº“åœ°å€ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"å¤§ä»“åº“ç±»å‹"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              é»˜è®¤å…³é—­ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å•ä½“åº”ç”¨å•ä»“åº“(monolith)")]),e._v("æˆ–"),o("b",[e._v("å¾®æœåŠ¡å¤š"),o("br"),e._v("\n                ä»“åº“(multi-repo)")]),e._v("ç±»å‹çš„æœåŠ¡ä»£ç ï¼Œå³ä½¿æŠŠå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ª"),o("br"),e._v("\n              git ä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä»£ç ä¹‹é—´ä¸å¯å¤ç”¨ã€‚"),o("br"),e._v("ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚"),o("br"),o("br"),e._v("\n              å¦‚æœå¼€å¯ï¼Œè¡¨ç¤ºç”Ÿæˆé€‚åˆ"),o("b",[e._v("å¾®æœåŠ¡å•ä»“åº“(mono-repo)")]),e._v("ç±»å‹çš„æœåŠ¡"),o("br"),e._v("\n              ä»£ç ï¼Œå¤šä¸ªæœåŠ¡ä»£ç æ”¾åœ¨ä¸€ä¸ª git ä»“åº“ä¸‹ï¼Œä¸åŒæœåŠ¡ä¹‹é—´çš„ä»£ç å¯ä»¥"),o("br"),e._v("\n              å¤ç”¨ã€‚å¦‚æœåé¢åœ¨é¡µé¢ç”Ÿæˆçš„æ¨¡å—ä»£ç ç§»åŠ¨åˆ°æ­¤æœåŠ¡ï¼Œä¹Ÿéœ€è¦å¼€å¯"),o("br"),e._v("è¿™ä¸ªé€‰é¡¹ã€‚"),o("br"),e._v("\n              ç‚¹å‡»æŸ¥çœ‹"),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("ç›®å½•ç»“æ„ç¤ºä¾‹")]),e._v("ã€‚\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var ce=o("VU/8")(ae,ne,!1,function(e){o("pRqx")},"data-v-859c173a",null).exports,de={name:"YamlConfig",data:function(){return{title:"ç”Ÿæˆ configuration ä»£ç ",path:"yaml-config",helpInfo:"\n      <p>æŠŠ yaml é…ç½®è½¬ä¸º go structï¼Œå¹¶åŒ…å«è¯»å– yaml é…ç½®çš„ä»£ç ã€‚</p>\n      <br />\n      <p>è§£å‹æ–‡ä»¶ï¼Œå°†æ–‡ä»¶å¤¹<b>internal</b>ç§»åŠ¨åˆ°é¡¹ç›®ä»£ç æ–‡ä»¶å¤¹ä¸‹ï¼Œå¦‚æœé…ç½®æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œåˆ™æ›¿æ¢å®ƒã€‚</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{yamlFile:""},rules:{yamlFile:[{required:!0,message:"è¯·é€‰æ‹© yaml æ–‡ä»¶",trigger:"change"}]}}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){0==t.data.code&&(e.ruleForm.yamlFile="")}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="config --yaml-file="+e.data.data;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("ä¸‹è½½ä»£ç å¤±è´¥")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.yamlFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("yamlFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.yamlFile="",this.$refs.ruleForm.validateField("yamlFile"))},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},me={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"30%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"yaml æ–‡ä»¶",prop:"yamlFile"}},[o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",accept:".yaml,.yml",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("ç‚¹å‡»é€‰æ‹© yaml æ–‡ä»¶")]),e._v("\n              æˆ–å°†æ–‡ä»¶æ‹–åˆ°æ­¤å¤„\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var ue=o("VU/8")(de,me,!1,function(e){o("s0Bq")},"data-v-16a9e22a",null).exports,pe=o("7nRM"),ve=o.n(pe),he=o("mvHQ"),fe=o.n(he),be=o("BO1k"),ge=o.n(be),_e={name:"PerformanceTest",data:function(){return{title:"å‹åŠ›æµ‹è¯•å‚æ•°é…ç½®",path:"performanceTest",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,btnRunPerftestShowDisabled:!1,btnRunPerftestLoading:!1,btnStopPerftestShowDisabled:!0,btnStopPerftestLoading:!1,responseContent:"",showResultDialogVisible:!1,isShowResultBtn:!1,customChecked:!1,prometheusChecked:!1,ruleForm:{protocol:"HTTP",url:"",method:"GET",body:"",headers:"",concurrency:"",testType:"",duration:"",totalRequests:"",pushType:"",pushUrl:"",prometheusUrl:"",jobName:""},rules:{protocol:[{required:!0,message:"è¯·é€‰æ‹©åè®®",trigger:"blur"}],url:[{required:!0,message:"è¯·è¾“å…¥ URL",trigger:"blur"},{pattern:/^(http|https):\/\/.+/,message:"è¯·è¾“å…¥æœ‰æ•ˆçš„ URL åœ°å€",trigger:"blur"}],pushUrl:[{required:!0,pattern:/^(http|https):\/\/.+/,message:"è¯·è¾“å…¥æœ‰æ•ˆçš„ URL åœ°å€",trigger:"blur"}],prometheusUrl:[{required:!0,pattern:/^(http|https):\/\/.+/,message:"è¯·è¾“å…¥æœ‰æ•ˆçš„ URL åœ°å€",trigger:"blur"}],jobName:[{required:!0,message:"è¯·è¾“å…¥ job åç§°",trigger:"blur"}]},protocolOptions:["HTTP","HTTP/2","HTTP/3"],methodOptions:["GET","POST","PUT","DELETE","PATCH"]}},created:function(){var e=this;this.adaptiveWindows(),this.responseContent=localStorage.getItem("PerformanceTestReport"),null!==this.responseContent&&this.responseContent.length>0&&(this.isShowResultBtn=!0);var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.protocol=o.data.protocol,e.ruleForm.url=o.data.url,e.ruleForm.method=o.data.method,e.ruleForm.body=o.data.body,e.ruleForm.testType=o.data.testType,e.ruleForm.pushType=o.data.pushType,e.ruleForm.pushUrl=o.data.pushUrl,e.ruleForm.prometheusUrl=o.data.prometheusUrl,e.ruleForm.jobName=o.data.jobName),""===e.ruleForm.protocol?e.ruleForm.protocol="HTTP":e.ruleForm.protocol=e.toUpperProtocol(e.ruleForm.protocol),""===e.ruleForm.method&&(e.ruleForm.method="GET"),null!==o.data.headers&&o.data.headers.length>0&&(e.ruleForm.headers=o.data.headers.join("\n")),o.data.worker>0&&(e.ruleForm.concurrency=o.data.worker),o.data.totalRequests>0&&(e.ruleForm.totalRequests=o.data.totalRequests),""!==o.data.duration&&(e.ruleForm.duration=o.data.duration),"custom"===o.data.pushType?e.customChecked=!0:"prometheus"===o.data.pushType&&(e.prometheusChecked=!0)}).catch(function(e){})},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.setRunPerftestBtnStatus(!1,!0),t.setStopPerftestBtnStatus(!1,!1);var o=appConfig.spongeServiceAddr+"/performanceTest",r="perftest "+t.toLowerProtocol(t.ruleForm.protocol)+" --url="+t.ruleForm.url;if(""===t.ruleForm.method&&(t.ruleForm.method="GET"),r+=" --method="+t.ruleForm.method,t.ruleForm.headers){var l=t.parseHeadersList(),i=!0,s=!1,a=void 0;try{for(var n,c=ge()(l);!(i=(n=c.next()).done);i=!0){var d=n.value;r+=" --header="+d.key+":"+d.value}}catch(e){s=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(s)throw a}}}if("GET"!==t.ruleForm.method&&""!==t.ruleForm.body)if(r.toLowerCase().includes("application/json"))try{var u=JSON.parse(t.ruleForm.body);r+=" --body="+fe()(u).replace(/\n/g,"\\n").replace(/ /g,"%20")}catch(e){return t.$message.error("JSON è§£æå¤±è´¥: "+e.message),t.resetBtnStatus(),!1}else r+=" --body="+t.ruleForm.body;if(""!==t.ruleForm.concurrency&&(r+=" --worker="+t.ruleForm.concurrency),"duration"===t.ruleForm.testType?""!==t.ruleForm.duration?r+=" --duration="+t.ruleForm.duration+"s":r+=" --duration=10s":"requests"===t.ruleForm.testType&&""!==t.ruleForm.totalRequests&&(r+=" --total="+t.ruleForm.totalRequests),t.customChecked)""!==t.ruleForm.pushUrl&&(r+=" --push-url="+t.ruleForm.pushUrl);else if(t.prometheusChecked){if(""===t.ruleForm.prometheusUrl||""===t.ruleForm.jobName)return t.$message.error("è¯·å¡«å†™å®Œæ•´çš„ Prometheus ä¿¡æ¯"),t.resetBtnStatus(),!1;r+=" --push-url="+t.ruleForm.prometheusUrl+" --prometheus-job-name="+t.ruleForm.jobName}var p={path:t.path,arg:r};m.a.post(o,p).then(function(e){t.resetBtnStatus(),0==e.data.code?(t.responseContent=e.data.data,localStorage.setItem("PerformanceTestReport",t.responseContent),t.showResultDialogVisible=!0,t.isShowResultBtn=!0):t.$message.error(e.data.msg)}).catch(function(e){t.resetBtnStatus(!1),t.$message.error(e.response.data.msg)})})},stopPerformanceTest:function(){var e=this,t=appConfig.spongeServiceAddr+"/performanceTest/stop",o="perftest "+this.toLowerProtocol(this.ruleForm.protocol)+" --url="+this.ruleForm.url;""===this.ruleForm.method&&(this.ruleForm.method="GET"),o+=" --method="+this.ruleForm.method,this.setRunPerftestBtnStatus(!0,!1),this.setStopPerftestBtnStatus(!0,!0);var r={path:this.path,arg:o};m.a.post(t,r).then(function(t){e.resetBtnStatus(),0==t.data.code||e.$message.error(t.data.msg)}).catch(function(t){e.resetBtnStatus(),e.$message.error(t.response.data.msg)})},clearFormData:function(){this.customChecked=!1,this.prometheusChecked=!1,this.ruleForm={},this.ruleForm.protocol="HTTP",this.ruleForm.method="GET"},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){this.value=e,this.$forceUpdate()},selectChangeLLMType:function(e){this.value=e,this.llmModelOptions=this.allLLMOptions[e]||[],this.llmModelOptions.length>0&&(this.ruleForm.llmModel=this.llmModelOptions[0].value),this.$forceUpdate()},resetIfZero:function(e){0===this.ruleForm[e]&&(this.ruleForm[e]="")},resetPushTypeChange:function(){this.$refs.ruleForm.clearValidate("pushUrl"),this.$refs.ruleForm.clearValidate("prometheusUrl"),this.$refs.ruleForm.clearValidate("jobName")},handlePushTypeChange:function(e,t){this.resetPushTypeChange(),"custom"===e?(this.customChecked=t,t?(this.prometheusChecked=!1,this.ruleForm.pushType="custom"):this.ruleForm.pushType=""):"prometheus"===e&&(this.prometheusChecked=t,t?(this.customChecked=!1,this.ruleForm.pushType="prometheus"):this.ruleForm.pushType="")},parseHeadersList:function(){var e=[];if(!this.ruleForm.headers)return e;var t=this.ruleForm.headers.split("\n"),o=!0,r=!1,l=void 0;try{for(var i,s=ge()(t);!(o=(i=s.next()).done);o=!0){var a=i.value;if(a=a.trim()){var n=a.split(":"),c=ve()(n),d=c[0],m=c.slice(1);d&&m.length>0&&e.push({key:d.trim(),value:m.join(":").trim()})}}}catch(e){r=!0,l=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw l}}return e},toLowerProtocol:function(e){return{HTTP:"http","HTTP/2":"http2","HTTP/3":"http3"}[e]||e},toUpperProtocol:function(e){return{http:"HTTP",http2:"HTTP/2",http3:"HTTP/3"}[e]||e},setRunPerftestBtnStatus:function(e,t){this.btnRunPerftestShowDisabled=e,this.btnRunPerftestLoading=t},setStopPerftestBtnStatus:function(e,t){this.btnStopPerftestShowDisabled=e,this.btnStopPerftestLoading=t},resetBtnStatus:function(){this.setRunPerftestBtnStatus(!1,!1),this.setStopPerftestBtnStatus(!0,!1)},showResult:function(){this.showResultDialogVisible=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Fe={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[e._v("æ€§èƒ½åŸºå‡†æµ‹è¯•ï¼Œç”Ÿæˆè¯„ä¼°æŠ¥å‘Š")])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"åè®®",prop:"protocol"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©åè®®",filterable:""},model:{value:e.ruleForm.protocol,callback:function(t){e.$set(e.ruleForm,"protocol",t)},expression:"ruleForm.protocol"}},e._l(e.protocolOptions,function(e,t){return o("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"URL",prop:"url"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"ç¤ºä¾‹: http://localhost:8080/user/1"},model:{value:e.ruleForm.url,callback:function(t){e.$set(e.ruleForm,"url","string"==typeof t?t.trim():t)},expression:"ruleForm.url"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"è¯·æ±‚æ–¹æ³•",prop:"method"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©è¯·æ±‚æ–¹æ³•",filterable:""},model:{value:e.ruleForm.method,callback:function(t){e.$set(e.ruleForm,"method",t)},expression:"ruleForm.method"}},e._l(e.methodOptions,function(e,t){return o("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),e._v(" "),"GET"!==e.ruleForm.method?o("el-form-item",{attrs:{label:"è¯·æ±‚ BODY",prop:"body"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{type:"textarea",placeholder:"è¯·è¾“å…¥è¯·æ±‚ä½“å†…å®¹ï¼Œæ”¯æŒ JSON, Form-data, Text",autosize:{minRows:3,maxRows:10}},model:{value:e.ruleForm.body,callback:function(t){e.$set(e.ruleForm,"body",t)},expression:"ruleForm.body"}})],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"è¯·æ±‚å¤´",prop:"headers"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{type:"textarea",placeholder:"æ ¼å¼ï¼š Key : Valueï¼Œå¤šä¸ªè¯·æ±‚å¤´ç”¨æ¢è¡Œåˆ†éš”",autosize:{minRows:1,maxRows:5}},model:{value:e.ruleForm.headers,callback:function(t){e.$set(e.ruleForm,"headers",t)},expression:"ruleForm.headers"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"å¹¶å‘æ•°",prop:"concurrency"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"é»˜è®¤å€¼ CPU æ ¸å¿ƒæ•°*3",type:"number",min:"0"},on:{blur:function(t){return e.resetIfZero("concurrency")}},model:{value:e.ruleForm.concurrency,callback:function(t){e.$set(e.ruleForm,"concurrency",e._n(t))},expression:"ruleForm.concurrency"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"æ‰§è¡Œç­–ç•¥",prop:"testType"}},[o("el-radio-group",{model:{value:e.ruleForm.testType,callback:function(t){e.$set(e.ruleForm,"testType",t)},expression:"ruleForm.testType"}},[o("el-radio",{attrs:{label:"requests"}},[e._v("è¯·æ±‚æ•°é‡")]),e._v(" "),o("el-radio",{attrs:{label:"duration"}},[e._v("æŒç»­æ—¶é—´")])],1)],1),e._v(" "),"duration"===e.ruleForm.testType?o("el-form-item",{attrs:{label:"æŒç»­æ—¶é—´(ç§’)",prop:"duration"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"é»˜è®¤å€¼ 10",type:"number",min:"0"},on:{blur:function(t){return e.resetIfZero("duration")}},model:{value:e.ruleForm.duration,callback:function(t){e.$set(e.ruleForm,"duration",e._n(t))},expression:"ruleForm.duration"}})],1):e._e(),e._v(" "),"requests"===e.ruleForm.testType?o("el-form-item",{attrs:{label:"è¯·æ±‚æ•°é‡",prop:"totalRequests"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"é»˜è®¤å€¼ 5000",type:"number",min:"0"},on:{blur:function(t){return e.resetIfZero("totalRequests")}},model:{value:e.ruleForm.totalRequests,callback:function(t){e.$set(e.ruleForm,"totalRequests",e._n(t))},expression:"ruleForm.totalRequests"}})],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"å®æ—¶æ¨é€ç›®æ ‡",prop:"pushType"}},[o("el-checkbox",{on:{change:function(t){return e.handlePushTypeChange("prometheus",t)}},model:{value:e.prometheusChecked,callback:function(t){e.prometheusChecked=t},expression:"prometheusChecked"}},[e._v("prometheus")]),e._v(" "),o("el-checkbox",{on:{change:function(t){return e.handlePushTypeChange("custom",t)}},model:{value:e.customChecked,callback:function(t){e.customChecked=t},expression:"customChecked"}},[e._v("è‡ªå®šä¹‰")])],1),e._v(" "),"custom"===e.ruleForm.pushType?o("el-form-item",{attrs:{label:"URL",prop:"pushUrl"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·è¾“å…¥æ¨é€åœ°å€ï¼Œç¤ºä¾‹: http://localhost:7070/report"},model:{value:e.ruleForm.pushUrl,callback:function(t){e.$set(e.ruleForm,"pushUrl","string"==typeof t?t.trim():t)},expression:"ruleForm.pushUrl"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n                è¯·æ±‚æ–¹æ³•ï¼š"),o("b",[e._v("POST")]),o("br"),e._v("\n                è¯·æ±‚ body å†…å®¹ä¸º json æ ¼å¼ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š\n                "),o("pre",[e._v('{\n  "perf_test_id": 1756889770355402807,\n  "url": "http://localhost:8080/post",\n  "method": "POST",\n  "body": "{\\"name\\":\\"Alice\\",\\"age\\":25}",\n  "total_requests": 500000,\n  "total_duration": 4.5,\n  "success_count": 500000,\n  "error_count": 0,\n  "errors": [""],\n  "qps": 111285.6,\n  "avg_latency": 0.44,\n  "p25_latency": 0,\n  "p50_latency": 0.51,\n  "p95_latency": 1.23,\n  "min_latency": 0,\n  "max_latency": 26.94,\n  "total_sent": 12500000,\n  "total_received": 24500000,\n  "status_codes": {\n    "200": 500000\n  },\n  "created_at": "2025-08-08T18:56:11.86+08:00"\n}\n\næ³¨ï¼štotal_duration å•ä½ä¸ºç§’ï¼Œxxx_latency å•ä½ä¸ºæ¯«ç§’ã€‚\n')])])])],1):e._e(),e._v(" "),"prometheus"===e.ruleForm.pushType?o("el-form-item",{attrs:{label:"endpoint",prop:"prometheusUrl"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·è¾“å…¥ prometheus åœ°å€ï¼Œç¤ºä¾‹: http://localhost:9090"},model:{value:e.ruleForm.prometheusUrl,callback:function(t){e.$set(e.ruleForm,"prometheusUrl","string"==typeof t?t.trim():t)},expression:"ruleForm.prometheusUrl"}})],1):e._e(),e._v(" "),"prometheus"===e.ruleForm.pushType?o("el-form-item",{attrs:{label:"job åç§°",prop:"jobName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·è¾“å…¥ job åç§°"},model:{value:e.ruleForm.jobName,callback:function(t){e.$set(e.ruleForm,"jobName","string"==typeof t?t.trim():t)},expression:"ruleForm.jobName"}})],1):e._e()],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.btnRunPerftestShowDisabled,loading:e.btnRunPerftestLoading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("è¿è¡Œ")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.btnStopPerftestShowDisabled,loading:e.btnStopPerftestLoading},on:{click:e.stopPerformanceTest}},[e._v("åœæ­¢")]),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowResultBtn,expression:"isShowResultBtn"}],attrs:{size:"default"},on:{click:e.showResult}},[e._v("æŸ¥çœ‹æŠ¥å‘Š")])],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"æ€§èƒ½æµ‹è¯•æŠ¥å‘Š",visible:e.showResultDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showResultDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.responseContent,callback:function(t){e.responseContent=t},expression:"responseContent"}})],1)],1)],1)},staticRenderFns:[]};var we=o("VU/8")(_e,Fe,!1,function(e){o("PLa/")},"data-v-a54301b8",null).exports,ye={name:"CustomTplField",data:function(){return{title:"",path:"custom-tpl-field",helpInfo:'\n      <p>åŸºäº json å’Œè‡ªå®šä¹‰æ¨¡æ¿ç”Ÿæˆä»£ç ï¼Œæ›´å¤šå¼€å‘ç»†èŠ‚ï¼Œè¯·å‚è€ƒ <a href="https://go-sponge.com/zh/guide/customize/template-json.html" target="_blank">å¼€å‘æŒ‡å—</a>ã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,isShowingInfo:!1,fileList:[],ruleForm:{templateDir:"",jsonFile:""},rules:{templateDir:[{required:!0,message:"è¯·è¾“å…¥æ¨¡æ¿ä»£ç æ‰€åœ¨çš„ç›®å½•ç»å¯¹è·¯å¾„",trigger:"blur"}],jsonFile:[{required:!0,message:"è¯·é€‰æ‹© json æ–‡ä»¶",trigger:"change"}]},showTplInfoDialogVisible:!1,tplContent:""}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.templateDir=o.data.templateDir,""!==o.data.fields&&(e.ruleForm.jsonFile=o.data.fields,e.fileList.push({name:o.data.fields.split("/").pop(),raw:o.data.fields,status:"fromRecord"})))}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(1!==t.fileList.length||"fromRecord"!==t.fileList[0].status){var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){0==e.data.code?t.downloadZipCode(e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("ä¸‹è½½ä»£ç å¤±è´¥")})}else t.downloadZipCode(t.fileList[0].raw)})},showTemplateInfo:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(1!==t.fileList.length||"fromRecord"!==t.fileList[0].status){var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){0==e.data.code?t.getTemplateInfo(e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("è·å–æ¨¡æ¿ä¿¡æ¯å¤±è´¥")})}else t.getTemplateInfo(t.fileList[0].raw)})},downloadZipCode:function(e){var t=appConfig.spongeServiceAddr+"/generate",o="template field --tpl-dir="+this.ruleForm.templateDir+" --fields="+e;this.$refs.downloadCode.execution(t,this.path,o,this.helpInfo)},getTemplateInfo:function(e){var t=this;this.updateIsShowingInfo(!0);var o=appConfig.spongeServiceAddr+"/getTemplateInfo",r="template field --tpl-dir="+this.ruleForm.templateDir+" --fields="+e+" --only-print=true",l={path:this.path,arg:r};m.a.post(o,l).then(function(e){t.updateIsShowingInfo(!1),0==e.data.code?(t.tplContent=e.data.data,t.showTplInfoDialogVisible=!0):t.$message.error(e.data.msg)}).catch(function(e){t.updateIsShowingInfo(!1),t.$message.error(e.response.data.msg)})},updateIsDownloading:function(e){this.isDownloading=e},updateIsShowingInfo:function(e){this.isShowingInfo=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.jsonFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("jsonFile"),t.length>1&&(this.fileList=t.slice(-1))},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.jsonFile="",this.$refs.ruleForm.validateField("jsonFile"))},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Ce={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#F25126"},attrs:{href:"https://go-sponge.com/zh/guide/customize/template-json.html",target:"_blank"}},[e._v("åŸºäº json å’Œè‡ªå®šä¹‰æ¨¡æ¿ç”Ÿæˆä»£ç ")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"è‡ªå®šä¹‰æ¨¡æ¿ç›®å½•",prop:"templateDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.templateDir,callback:function(t){e.$set(e.ruleForm,"templateDir","string"==typeof t?t.trim():t)},expression:"ruleForm.templateDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              è‡ªå®šä¹‰æ¨¡æ¿ä»£ç æ‰€åœ¨æ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„ã€‚"),o("br"),e._v("\n              windows ç¯å¢ƒç¤ºä¾‹ï¼šD:\\tmp\\template-dir"),o("br"),e._v("\n              linux ç¯å¢ƒç¤ºä¾‹ï¼š/tmp/template-dir\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"è‡ªå®šä¹‰å­—æ®µ",prop:"jsonFile"}},[o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",accept:".json",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("é€‰æ‹© json æ–‡ä»¶")]),e._v("ï¼Œä»…é™ä¸€ä¸ªæ–‡ä»¶ã€‚\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{"margin-bottom":"50px"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{size:"default",disabled:e.isShowingInfo,loading:e.isShowingInfo},on:{click:function(t){return e.showTemplateInfo("ruleForm")}}},[e._v("æŸ¥çœ‹æ¨¡æ¿ä¿¡æ¯")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"æ¨¡æ¿ä¿¡æ¯",visible:e.showTplInfoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showTplInfoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.tplContent,callback:function(t){e.tplContent=t},expression:"tplContent"}})],1)],1)],1)},staticRenderFns:[]};var Se=o("VU/8")(ye,Ce,!1,function(e){o("dqU9")},"data-v-3515ea7e",null).exports,De={name:"WebModel",data:function(){return{title:"",path:"custom-tpl-sql",helpInfo:'\n      <p>åŸºäº sqlã€è‡ªå®šä¹‰çš„æ¨¡æ¿ç”Ÿæˆä»£ç ï¼Œæ›´å¤šå¼€å‘ç»†èŠ‚ï¼Œè¯·å‚è€ƒ <a href="https://go-sponge.com/zh/guide/customize/template-sql.html" target="_blank">å¼€å‘æŒ‡å—</a>ã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,isShowingInfo:!1,fileList:[],ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",templateDir:"",jsonFile:""},rules:{dsnAddr:[{required:!0,message:"è¯·è¾“å…¥æ•°æ®æº dsn",trigger:"blur"}],tableName:[{required:!0,message:"è¯·é€‰æ‹©è¡¨å",trigger:"change"}],dbDriver:[{required:!0,message:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",trigger:"blur"}],templateDir:[{required:!0,message:"è¯·è¾“å…¥æ¨¡æ¿ä»£ç æ‰€åœ¨çš„ç›®å½•ç»å¯¹è·¯å¾„",trigger:"blur"}]},showTplInfoDialogVisible:!1,tplContent:"",tplFileNameExample:"{{.TableName}}.go.tmpl",tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.listTables(!1),""!==o.data.fields&&(e.ruleForm.jsonFile=o.data.fields,e.fileList.push({name:o.data.fields.split("/").pop(),raw:o.data.fields,status:"fromRecord"})),e.ruleForm.templateDir=o.data.templateDir)}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(0!==t.fileList.length)if(1!==t.fileList.length||"fromRecord"!==t.fileList[0].status){var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){0==e.data.code?t.downloadZipCode(e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("ä¸‹è½½ä»£ç å¤±è´¥")})}else t.downloadZipCode(t.fileList[0].raw);else t.downloadZipCode("")})},showTemplateInfo:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(0!==t.fileList.length)if(1!==t.fileList.length||"fromRecord"!==t.fileList[0].status){var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){0==e.data.code?t.getTemplateInfo(e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("è·å–æ¨¡æ¿ä¿¡æ¯å¤±è´¥")})}else t.getTemplateInfo(t.fileList[0].raw);else t.getTemplateInfo("")})},downloadZipCode:function(e){var t=appConfig.spongeServiceAddr+"/generate",o=this.ruleForm.tableName.join(","),r="template sql --db-driver="+this.ruleForm.dbDriver+" --db-dsn="+this.ruleForm.dsnAddr+" --db-table="+o+" --tpl-dir="+this.ruleForm.templateDir+" --fields="+e;this.$refs.downloadCode.execution(t,this.path,r,this.helpInfo)},getTemplateInfo:function(e){var t=this;this.updateIsShowingInfo(!0);var o=appConfig.spongeServiceAddr+"/getTemplateInfo",r=this.ruleForm.tableName.join(","),l="template sql --db-driver="+this.ruleForm.dbDriver+" --db-dsn="+this.ruleForm.dsnAddr+" --db-table="+r+" --tpl-dir="+this.ruleForm.templateDir+" --fields="+e+" --only-print=true",i={path:this.path,arg:l};m.a.post(o,i).then(function(e){t.updateIsShowingInfo(!1),0==e.data.code?(t.tplContent=e.data.data,t.showTplInfoDialogVisible=!0):t.$message.error(e.data.msg)}).catch(function(e){t.updateIsShowingInfo(!1),t.$message.error(e.response.data.msg)})},updateIsDownloading:function(e){this.isDownloading=e},updateIsShowingInfo:function(e){this.isShowingInfo=e},clearFormData:function(){this.tableNames=[],this.fileList=[],this.ruleForm={tableName:[]}},handleOnchange:function(e,t){this.ruleForm.jsonFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("jsonFile"),t.length>1&&(this.fileList=t.slice(-1))},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.jsonFile="",this.$refs.ruleForm.validateField("jsonFile"))},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("è·å–è¡¨åæˆåŠŸ"):t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œ"+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("è·å–è¡¨åå¤±è´¥ï¼Œè¯·æ£€æŸ¥"+t.ruleForm.dbDriver+" dsn åœ°å€æ˜¯å¦æ­£ç¡®ã€æˆ–è€…"+t.ruleForm.dbDriver+"æœåŠ¡æ˜¯å¦è¿è¡Œã€‚")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate()},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},xe={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#00BFFF"},attrs:{href:"https://go-sponge.com/zh/guide/customize/template-sql.html",target:"_blank"}},[e._v("åŸºäº sql å’Œè‡ªå®šä¹‰æ¨¡æ¿ç”Ÿæˆä»£ç ")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"æ•°æ®åº“ç±»å‹",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"æ•°æ®åº“ dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v("ã€"),o("b",[e._v("postgresql")]),e._v("ï¼Œå¡«å†™\n              dsn åœ°å€ï¼Œ"),o("br"),e._v("\n              dsn æ ¼å¼ï¼š"),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              æ³¨æ„ï¼šuser å’Œ password ä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              mongodb çš„ dsn æ”¯æŒ SRV è®°å½•ï¼Œæ ¼å¼ä¸ºï¼š"),o("br"),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              postgresql çš„ dsn æ”¯æŒæŒ‡å®š schemaï¼Œåœ¨ dsn åæ·»åŠ å‚æ•°ç¤ºä¾‹ï¼š"),o("br"),e._v(" "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              å¦‚æœæ•°æ®åº“æ˜¯"),o("b",[e._v("sqlite")]),e._v("ï¼Œå¡«å†™ sqlite db æ–‡ä»¶æœ¬åœ°ç»å¯¹è·¯å¾„ï¼Œ"),o("br"),e._v("\n              ç¤ºä¾‹ï¼š"),o("b",[e._v("/tmp/test.db")]),e._v(" æˆ– "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("è·å–è¡¨å")])],1),e._v(" "),o("el-form-item",{attrs:{label:"è¡¨å",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©è¡¨åï¼Œæ”¯æŒå¤šé€‰",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("å…¨é€‰")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"è‡ªå®šä¹‰æ¨¡æ¿ç›®å½•",prop:"templateDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.templateDir,callback:function(t){e.$set(e.ruleForm,"templateDir","string"==typeof t?t.trim():t)},expression:"ruleForm.templateDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              è‡ªå®šä¹‰æ¨¡æ¿ä»£ç æ‰€åœ¨æ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„ã€‚"),o("br"),e._v("\n              windows ç¯å¢ƒç¤ºä¾‹ï¼šD:\\tmp\\template-dir"),o("br"),e._v("\n              linux ç¯å¢ƒç¤ºä¾‹ï¼š/tmp/template-dir"),o("br"),o("br"),e._v("\n              æ³¨æ„ï¼šå¦‚æœé€‰æ‹©äº†å¤šä¸ªè¡¨åï¼Œç›®å½•ä¸‹çš„æ‰€æœ‰"),o("br"),e._v("\n              æ¨¡æ¿æ–‡ä»¶åå¿…é¡»ä½¿ç”¨è¡¨åã€‚"),o("br"),e._v("\n              ç¤ºä¾‹ï¼š"),o("b",[e._v(e._s(e.tplFileNameExample))])])])],1),e._v(" "),o("el-form-item",{attrs:{label:"è‡ªå®šä¹‰å­—æ®µ",prop:"jsonFile"}},[o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",accept:".json",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("é€‰æ‹© json æ–‡ä»¶")]),e._v("ï¼Œä»…é™ä¸€ä¸ªæ–‡ä»¶ã€‚\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{"margin-bottom":"50px"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{size:"default",disabled:e.isShowingInfo,loading:e.isShowingInfo},on:{click:function(t){return e.showTemplateInfo("ruleForm")}}},[e._v("æŸ¥çœ‹æ¨¡æ¿ä¿¡æ¯")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"æ¨¡æ¿ä¿¡æ¯",visible:e.showTplInfoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showTplInfoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.tplContent,callback:function(t){e.tplContent=t},expression:"tplContent"}})],1)],1)],1)},staticRenderFns:[]};var Ne=o("VU/8")(De,xe,!1,function(e){o("IWyD")},"data-v-0357c859",null).exports,ke={name:"CustomTplProtobuf",data:function(){return{title:"",path:"custom-tpl-protobuf",helpInfo:'\n      <p>æ ¹æ® protobufã€jsonã€è‡ªå®šä¹‰æ¨¡æ¿ç”Ÿæˆä»£ç ï¼Œæ›´å¤šå¼€å‘ç»†èŠ‚ï¼Œè¯·å‚è€ƒ <a href="https://go-sponge.com/zh/guide/customize/template-protobuf.html" target="_blank">å¼€å‘æŒ‡å—</a>ã€‚</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,isShowingInfo:!1,protoFileList:[],fileList:[],ruleForm:{protobufFile:"",depProtoDir:"",templateDir:"",jsonFile:""},rules:{protobufFile:[{required:!0,message:"è¯·é€‰æ‹© proto æ–‡ä»¶",trigger:"change"}],templateDir:[{required:!0,message:"è¯·è¾“å…¥æ¨¡æ¿ä»£ç æ‰€åœ¨çš„ç›®å½•ç»å¯¹è·¯å¾„",trigger:"blur"}]},showTplInfoDialogVisible:!1,tplContent:"",tplFileNameExample:"{{.Proto.FileNamePrefix}}.go.tmpl"}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.protobufFile="",e.ruleForm.depProtoDir=o.data.depProtoDir,e.ruleForm.templateDir=o.data.templateDir,""!==o.data.fields&&(e.ruleForm.jsonFile=o.data.fields,e.fileList.push({name:o.data.fields.split("/").pop(),raw:o.data.fields,status:"fromRecord"})))}).catch(function(e){})},components:{DownloadCode:v,ShowRepoDir:g},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.protoFileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=e.data.data;if(1===t.fileList.length)if("fromRecord"===t.fileList[0].status)t.downloadZipCode(o,t.fileList[0].raw);else{var r=new FormData;t.fileList.forEach(function(e){r.append("files",e.raw)});var l=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(l,r).then(function(e){0==e.data.code?t.downloadZipCode(o,e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("ä¸‹è½½ä»£ç å¤±è´¥")})}else t.downloadZipCode(o,"")}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("ä¸‹è½½ä»£ç å¤±è´¥")})})},showTemplateInfo:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.protoFileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=e.data.data;if(1===t.fileList.length)if("fromRecord"===t.fileList[0].status)t.getTemplateInfo(o,t.fileList[0].raw);else{var r=new FormData;t.fileList.forEach(function(e){r.append("files",e.raw)});var l=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(l,r).then(function(e){0==e.data.code?t.getTemplateInfo(o,e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("ä¸‹è½½ä»£ç å¤±è´¥")})}else t.getTemplateInfo(o,"")}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("ä¸‹è½½ä»£ç å¤±è´¥")})})},downloadZipCode:function(e,t){var o=appConfig.spongeServiceAddr+"/generate",r="template protobuf --protobuf-file="+e+" --dep-proto-dir="+this.ruleForm.depProtoDir+" --tpl-dir="+this.ruleForm.templateDir+" --fields="+t;this.$refs.downloadCode.execution(o,this.path,r,this.helpInfo)},getTemplateInfo:function(e,t){var o=this;this.updateIsShowingInfo(!0);var r=appConfig.spongeServiceAddr+"/getTemplateInfo",l="template protobuf --protobuf-file="+e+" --dep-proto-dir="+this.ruleForm.depProtoDir+" --tpl-dir="+this.ruleForm.templateDir+" --fields="+t+" --only-print=true",i={path:this.path,arg:l};m.a.post(r,i).then(function(e){o.updateIsShowingInfo(!1),0==e.data.code?(o.tplContent=e.data.data,o.showTplInfoDialogVisible=!0):o.$message.error(e.data.msg)}).catch(function(e){o.updateIsShowingInfo(!1),o.$message.error(e.response.data.msg)})},updateIsDownloading:function(e){this.isDownloading=e},updateIsShowingInfo:function(e){this.isShowingInfo=e},clearFormData:function(){this.protoFileList=[],this.fileList=[],this.ruleForm={}},handleProtoOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.protoFileList=t,0!==this.protoFileList.length&&this.$refs.ruleForm.validateField("protobufFile")},handleProtoOnRemove:function(e,t){this.protoFileList=t,0===this.protoFileList.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},handleOnchange:function(e,t){this.ruleForm.jsonFile=e.name,this.fileList=t,t.length>1&&(this.fileList=t.slice(-1))},handleOnRemove:function(e,t){this.fileList=t,0===this.fileList.length&&(this.ruleForm.jsonFile="")},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Re={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#32CD32"},attrs:{href:"https://go-sponge.com/zh/guide/customize/template-protobuf.html",target:"_blank"}},[e._v("åŸºäº protobuf å’Œè‡ªå®šä¹‰æ¨¡æ¿ç”Ÿæˆä»£ç ")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"è‡ªå®šä¹‰æ¨¡æ¿ç›®å½•",prop:"templateDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.templateDir,callback:function(t){e.$set(e.ruleForm,"templateDir","string"==typeof t?t.trim():t)},expression:"ruleForm.templateDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              è‡ªå®šä¹‰æ¨¡æ¿ä»£ç æ‰€åœ¨æ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„ã€‚"),o("br"),e._v("\n              windows ç¯å¢ƒç¤ºä¾‹ï¼šD:\\tmp\\template-dir"),o("br"),e._v("\n              linux ç¯å¢ƒç¤ºä¾‹ï¼š/tmp/template-dir"),o("br"),o("br"),e._v("\n              æ³¨æ„ï¼šå¦‚æœé€‰æ‹©äº†å¤šä¸ª proto æ–‡ä»¶ï¼Œç›®å½•ä¸‹çš„æ‰€æœ‰"),o("br"),e._v("\n              æ¨¡æ¿æ–‡ä»¶åå¿…é¡»ä½¿ç”¨ proto æ–‡ä»¶åã€‚"),o("br"),e._v("\n              ç¤ºä¾‹ï¼š"),o("b",[e._v(e._s(e.tplFileNameExample))])])])],1),e._v(" "),o("el-form-item",{attrs:{label:"proto æ–‡ä»¶",prop:"protobufFile"}},[o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleProtoOnchange,"on-remove":e.handleProtoOnRemove,"file-list":e.protoFileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("é€‰æ‹© proto æ–‡ä»¶")]),e._v("ï¼Œæ”¯æŒå¤šæ–‡ä»¶ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"ä¾èµ– proto æ–‡ä»¶ç›®å½•",prop:"depProtoDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.depProtoDir,callback:function(t){e.$set(e.ruleForm,"depProtoDir","string"==typeof t?t.trim():t)},expression:"ruleForm.depProtoDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¾èµ–çš„ proto æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„ï¼Œä¾‹å¦‚ a.proto"),o("br"),e._v("\n              ä¾èµ– b.protoï¼Œåˆ™æŠŠ b.proto æ–‡ä»¶æ”¾åˆ°è¯¥æ–‡ä»¶å¤¹ä¸‹ã€‚"),o("br"),e._v("\n              windows ç¯å¢ƒç¤ºä¾‹ï¼šD:\\tmp\\dep-proto-dir"),o("br"),e._v("\n              linux ç¯å¢ƒç¤ºä¾‹ï¼š/tmp/dep-proto-dir\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"è‡ªå®šä¹‰å­—æ®µ",prop:"jsonFile"}},[o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",accept:".json",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("é€‰æ‹© json æ–‡ä»¶")]),e._v("ï¼Œä»…é™ä¸€ä¸ªæ–‡ä»¶ã€‚\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{"margin-bottom":"50px"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{size:"default",disabled:e.isShowingInfo,loading:e.isShowingInfo},on:{click:function(t){return e.showTemplateInfo("ruleForm")}}},[e._v("æŸ¥çœ‹æ¨¡æ¿ä¿¡æ¯")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ä¸‹è½½ä»£ç ")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"æ¨¡æ¿ä¿¡æ¯",visible:e.showTplInfoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showTplInfoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.tplContent,callback:function(t){e.tplContent=t},expression:"tplContent"}})],1)],1)],1)},staticRenderFns:[]};var Te=o("VU/8")(ke,Re,!1,function(e){o("PkeA")},"data-v-6a6a44b2",null).exports,Ae={name:"AssistantGenerate",data:function(){return{title:"AI åŠ©æ‰‹é€šè¿‡ç†è§£é¡¹ç›®ä»£ç çš„ä¸Šä¸‹æ–‡ï¼Œè‡ªåŠ¨ç”Ÿæˆä¸šåŠ¡é€»è¾‘ä»£ç ",path:"assistant-generate",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,showPassword:!1,isShowingInfo:!1,responseContent:"",showResultDialogVisible:!1,isShowResultBtn:!1,ruleForm:{llmType:"",llmModel:"",apiKey:"",targetType:"goDir",goDir:"",goFile:""},rules:{llmType:[{required:!0,message:"è¯·é€‰æ‹© AI åŠ©æ‰‹ç±»å‹",trigger:"blur"}],llmModel:[{required:!0,message:"è¯·é€‰æ‹©æˆ–è¾“å…¥æ¨¡å‹åç§°",trigger:"blur"}],apiKey:[{required:!0,message:"è¯·è¾“å…¥ API Key",trigger:"blur"}],goDir:[{required:!0,message:"è¯·è¾“å…¥ Go é¡¹ç›®è·¯å¾„",trigger:"blur"}],goFile:[{required:!0,message:"è¯·è¾“å…¥ Go æ–‡ä»¶è·¯å¾„",trigger:"blur"}]},llmTypeOptions:[{label:"deepseek",value:"deepseek"},{label:"chatgpt",value:"chatgpt"},{label:"gemini",value:"gemini"}],llmModelOptions:[],allLLMOptions:{deepseek:[{label:"deepseek-chat",value:"deepseek-chat"},{label:"deepseek-reasoner",value:"deepseek-reasoner"}],chatgpt:[{label:"gpt-5",value:"gpt-5"},{label:"gpt-5-thinking",value:"gpt-5-thinking"},{label:"gpt-4.1",value:"gpt-4.1"},{label:"gpt-4.1-mini",value:"gpt-4.1-mini"},{label:"gpt-4o",value:"gpt-4o"},{label:"gpt-4o-mini",value:"gpt-4o-mini"}],gemini:[{label:"gemini-2.5-flash",value:"gemini-2.5-flash"},{label:"gemini-2.5-pro",value:"gemini-2.5-pro"},{label:"gemini-2.5-flash-lite",value:"gemini-2.5-flash-lite"},{label:"gemini-2.0-flash",value:"gemini-2.0-flash"},{label:"gemini-2.0-pro",value:"gemini-2.0-pro"}]}}},created:function(){var e=this;this.adaptiveWindows(),this.listLLM(),this.responseContent=localStorage.getItem("AIAssistantGenerateCodeReport"),null!==this.responseContent&&this.responseContent.length>0&&(this.isShowResultBtn=!0);var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.llmType=o.data.llmType,e.ruleForm.llmModel=o.data.llmModel,e.ruleForm.apiKey=o.data.apiKey,e.ruleForm.goDir=o.data.goDir,e.ruleForm.goFile=o.data.goFile,""!==o.data.targetType&&(e.ruleForm.targetType=o.data.targetType),e.selectChangeLLMType(e.ruleForm.llmType))}).catch(function(e){})},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.updateIsShowingInfo(!0);var o=appConfig.spongeServiceAddr+"/assistant",r="";r="goDir"!==t.ruleForm.targetType?"assistant generate --type="+t.ruleForm.llmType+" --model="+t.ruleForm.llmModel+" --api-key="+t.ruleForm.apiKey+" --file="+t.ruleForm.goFile:"assistant generate --type="+t.ruleForm.llmType+" --model="+t.ruleForm.llmModel+" --api-key="+t.ruleForm.apiKey+" --dir="+t.ruleForm.goDir;var l={path:t.path,arg:r};m.a.post(o,l).then(function(e){t.updateIsShowingInfo(!1),0==e.data.code?(t.responseContent=e.data.data,localStorage.setItem("AIAssistantGenerateCodeReport",t.responseContent),t.showResultDialogVisible=!0,t.isShowResultBtn=!0):t.$message.error(e.data.msg)}).catch(function(e){t.updateIsShowingInfo(!1),t.$message.error(e.response.data.msg)})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.ruleForm.llmType="chatgpt",this.ruleForm.targetType="goDir",this.ruleForm.goDir="",this.ruleForm.goFile="",this.ruleForm.apiKey="",this.selectChangeLLMType(this.ruleForm.llmType)},listLLM:function(){var e=this,t=appConfig.spongeServiceAddr+"/listLLM";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.llmTypeOptions=o.data.llmTypeOptions,e.allLLMOptions=o.data.allLLMOptions)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){this.value=e,this.$forceUpdate()},selectChangeLLMType:function(e){this.value=e,this.llmModelOptions=this.allLLMOptions[e]||[],this.llmModelOptions.length>0&&(this.ruleForm.llmModel=this.llmModelOptions[0].value),this.$forceUpdate()},handleTargetTypeChange:function(e){"goDir"===e?(this.$refs.ruleForm.clearValidate("goFile"),this.$refs.ruleForm.clearValidate("goDir")):"goFile"===e&&(this.$refs.ruleForm.clearValidate("goDir"),this.$refs.ruleForm.clearValidate("goFile"))},togglePassword:function(){this.showPassword=!this.showPassword},updateIsShowingInfo:function(e){this.isShowingInfo=e},showResult:function(){this.showResultDialogVisible=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},ze={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#00AEB1"},attrs:{href:"https://go-sponge.com/zh/guide/ai/assistant.html#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B",target:"_blank"}},[e._v(e._s(e.title))])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"AI åŠ©æ‰‹ç±»å‹",prop:"llmType"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹© AI åŠ©æ‰‹ç±»å‹",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeLLMType},model:{value:e.ruleForm.llmType,callback:function(t){e.$set(e.ruleForm,"llmType",t)},expression:"ruleForm.llmType"}},e._l(e.llmTypeOptions,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              æ³¨ï¼šå›½å¤–çš„ AI æœåŠ¡å•†éœ€è¦å¼€å¯ç½‘ç»œä»£ç†ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"æ¨¡å‹åç§°",prop:"llmModel"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹©æ¨¡å‹åç§°",filterable:"","allow-create":"",clearable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.llmModel,callback:function(t){e.$set(e.ruleForm,"llmModel",t)},expression:"ruleForm.llmModel"}},e._l(e.llmModelOptions,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              æ”¯æŒæ‰‹åŠ¨è¾“å…¥æˆ–é€‰æ‹©å·²æœ‰æ¨¡å‹åç§°ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"API Key",prop:"apiKey"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{type:e.showPassword?"text":"password",placeholder:"è¯·è¾“å…¥ä» AI æœåŠ¡å•†æ§åˆ¶å°è·å–çš„ API Key"},scopedSlots:e._u([{key:"append",fn:function(){return[o("el-button",{attrs:{icon:(e.showPassword,"el-icon-view")},on:{click:e.togglePassword}})]},proxy:!0}]),model:{value:e.ruleForm.apiKey,callback:function(t){e.$set(e.ruleForm,"apiKey","string"==typeof t?t.trim():t)},expression:"ruleForm.apiKey"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              å¡«å†™ AI åŠ©æ‰‹çš„ API Keyï¼Œç”¨äºè°ƒç”¨ç›¸åº”çš„æœåŠ¡ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"ä»£ç èŒƒå›´",prop:"targetType"}},[o("el-radio-group",{on:{change:e.handleTargetTypeChange},model:{value:e.ruleForm.targetType,callback:function(t){e.$set(e.ruleForm,"targetType",t)},expression:"ruleForm.targetType"}},[o("el-radio",{attrs:{label:"goDir"}},[e._v("Go é¡¹ç›®")]),e._v(" "),o("el-radio",{attrs:{label:"goFile"}},[e._v("Go æ–‡ä»¶")])],1)],1),e._v(" "),"goDir"===e.ruleForm.targetType?o("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"Go é¡¹ç›®",prop:"goDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·è¾“å…¥æœ¬åœ° Go é¡¹ç›®ä»£ç çš„ç»å¯¹è·¯å¾„"},model:{value:e.ruleForm.goDir,callback:function(t){e.$set(e.ruleForm,"goDir","string"==typeof t?t.trim():t)},expression:"ruleForm.goDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              è‹¥è¯¥é¡¹ç›®ç”± sponge åˆ›å»ºï¼ŒAI åŠ©æ‰‹å°†"),o("br"),e._v("\n              è‡ªåŠ¨ä¾æ®é¡¹ç›®ç»“æ„å’Œä¸Šä¸‹æ–‡ç”Ÿæˆç›¸åº”ä»£ç ã€‚"),o("br"),e._v("\n              Windows ç¤ºä¾‹ï¼šD:\\project\\dir\\internal\\service"),o("br"),e._v("\n              Linux ç¤ºä¾‹ï¼š/project/dir/internal/service"),o("br")])])],1):e._e(),e._v(" "),"goFile"===e.ruleForm.targetType?o("el-form-item",{attrs:{label:"Go æ–‡ä»¶",prop:"goFile"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·è¾“å…¥æœ¬åœ° Go æ–‡ä»¶çš„ç»å¯¹è·¯å¾„"},model:{value:e.ruleForm.goFile,callback:function(t){e.$set(e.ruleForm,"goFile","string"==typeof t?t.trim():t)},expression:"ruleForm.goFile"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              è‹¥è¯¥æ–‡ä»¶æ˜¯ç”± sponge åˆ›å»ºé¡¹ç›®ä¸­çš„ä¸€ä¸ª Go æ–‡ä»¶ï¼Œ"),o("br"),e._v("\n              å¹¶ä¸”è¯¥æ–‡ä»¶åœ¨ "),o("b",[e._v("handler")]),e._v("ã€"),o("b",[e._v("service")]),e._v(" ç­‰ç›®å½•ä¸‹ï¼Œ"),o("br"),e._v("\n              AI åŠ©æ‰‹å°†è‡ªåŠ¨ä¾æ®é¡¹ç›®ç»“æ„å’Œä¸Šä¸‹æ–‡ç”Ÿæˆç›¸åº”ä»£ç ã€‚"),o("br"),e._v("\n              Windows ç¤ºä¾‹ï¼šD:\\project\\dir\\internal\\service\\file.go"),o("br"),e._v("\n              Linux ç¤ºä¾‹ï¼š/project/dir/internal/service/file.go"),o("br")])])],1):e._e()],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isShowingInfo,loading:e.isShowingInfo},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("ç”Ÿæˆä»£ç ")]),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowResultBtn,expression:"isShowResultBtn"}],attrs:{size:"default"},on:{click:e.showResult}},[e._v("æŸ¥çœ‹ç»“æœ")])],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"æ‰§è¡Œç»“æœ",visible:e.showResultDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showResultDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.responseContent,callback:function(t){e.responseContent=t},expression:"responseContent"}})],1)],1)],1)},staticRenderFns:[]};var $e=o("VU/8")(Ae,ze,!1,function(e){o("LF/H")},"data-v-79d2aa9a",null).exports,qe={name:"AssistantMerge",data:function(){return{title:"æŠŠ AI åŠ©æ‰‹ç”Ÿæˆçš„ä»£ç åˆå¹¶åˆ°å¯¹åº” Go ä»£ç æ–‡ä»¶",path:"assistant-merge",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowingInfo:!1,responseContent:"",showResultDialogVisible:!1,isShowResultBtn:!1,ruleForm:{llmType:"",targetType:"goDir",goDir:"",goFile:"",isClean:!1},rules:{llmType:[{required:!0,message:"è¯·é€‰æ‹© AI åŠ©æ‰‹ç±»å‹",trigger:"blur"}],goDir:[{required:!0,message:"è¯·è¾“å…¥ Go é¡¹ç›®è·¯å¾„",trigger:"blur"}],goFile:[{required:!0,message:"è¯·è¾“å…¥ Go æ–‡ä»¶è·¯å¾„",trigger:"blur"}]},llmTypeOptions:[{label:"deepseek",value:"deepseek"},{label:"chatgpt",value:"chatgpt"},{label:"gemini",value:"gemini"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listLLM(),this.responseContent=localStorage.getItem("AIAssistantMergeCodeReport"),null!==this.responseContent&&this.responseContent.length>0&&(this.isShowResultBtn=!0);var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.llmType=o.data.llmType,e.ruleForm.goDir=o.data.goDir,e.ruleForm.goFile=o.data.goFile,e.ruleForm.targetType=o.data.targetType,e.ruleForm.isClean=o.data.isCleanAICode)}).catch(function(e){}),""===this.ruleForm.targetType&&(this.ruleForm.targetType="goDir")},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.updateIsShowingInfo(!0);var o=appConfig.spongeServiceAddr+"/assistant",r="";r="goDir"!==t.ruleForm.targetType?"assistant merge --type="+t.ruleForm.llmType+" --file="+t.ruleForm.goFile+" --is-clean="+t.ruleForm.isClean:"assistant merge --type="+t.ruleForm.llmType+" --dir="+t.ruleForm.goDir+" --is-clean="+t.ruleForm.isClean;var l={path:t.path,arg:r};m.a.post(o,l).then(function(e){t.updateIsShowingInfo(!1),0==e.data.code?(t.responseContent=e.data.data,localStorage.setItem("AIAssistantMergeCodeReport",t.responseContent),t.showResultDialogVisible=!0,t.isShowResultBtn=!0):t.$message.error(e.data.msg)}).catch(function(e){t.updateIsShowingInfo(!1),t.$message.error(e.response.data.msg)})})},clearFormData:function(){this.ruleForm={},this.ruleForm.targetType="goDir",this.ruleForm.isClean=!1},listLLM:function(){var e=this,t=appConfig.spongeServiceAddr+"/listLLM";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.llmTypeOptions=o.data.llmTypeOptions,e.allLLMOptions=o.data.allLLMOptions)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){this.value=e,this.$forceUpdate()},selectChangeLLMType:function(e){this.value=e,this.$forceUpdate()},handleTargetTypeChange:function(e){"goDir"===e?(this.$refs.ruleForm.clearValidate("goFile"),this.$refs.ruleForm.clearValidate("goDir")):"goFile"===e&&(this.$refs.ruleForm.clearValidate("goDir"),this.$refs.ruleForm.clearValidate("goFile"))},updateIsShowingInfo:function(e){this.isShowingInfo=e},showResult:function(){this.showResultDialogVisible=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Pe={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#4169E1"},attrs:{href:"https://go-sponge.com/zh/guide/ai/assistant.html#åˆå¹¶ä»£ç ",target:"_blank"}},[e._v(e._s(e.title))])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"AI åŠ©æ‰‹ç±»å‹",prop:"llmType"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·é€‰æ‹© AI åŠ©æ‰‹ç±»å‹",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeLLMType},model:{value:e.ruleForm.llmType,callback:function(t){e.$set(e.ruleForm,"llmType",t)},expression:"ruleForm.llmType"}},e._l(e.llmTypeOptions,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä»£ç ç”±å“ªç±»AIåŠ©æ‰‹ç”Ÿæˆï¼Œå°±é€‰æ‹©å¯¹åº”çš„åŠ©æ‰‹ç±»å‹ã€‚\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"ä»£ç èŒƒå›´",prop:"targetType"}},[o("el-radio-group",{on:{change:e.handleTargetTypeChange},model:{value:e.ruleForm.targetType,callback:function(t){e.$set(e.ruleForm,"targetType",t)},expression:"ruleForm.targetType"}},[o("el-radio",{attrs:{label:"goDir"}},[e._v("Go é¡¹ç›®")]),e._v(" "),o("el-radio",{attrs:{label:"goFile"}},[e._v("Go æ–‡ä»¶")])],1)],1),e._v(" "),"goDir"===e.ruleForm.targetType?o("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"Go é¡¹ç›®",prop:"goDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·è¾“å…¥æœ¬åœ° Go é¡¹ç›®ä»£ç çš„ç»å¯¹è·¯å¾„"},model:{value:e.ruleForm.goDir,callback:function(t){e.$set(e.ruleForm,"goDir","string"==typeof t?t.trim():t)},expression:"ruleForm.goDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¸ AIåŠ©æ‰‹ç”Ÿæˆä»£ç çš„ Go é¡¹ç›®è·¯å¾„ä¸€æ ·ã€‚"),o("br"),e._v("\n              Windows ç¤ºä¾‹ï¼šD:\\project\\dir\\internal\\service"),o("br"),e._v("\n              Linux ç¤ºä¾‹ï¼š/project/dir/internal/service"),o("br")])])],1):e._e(),e._v(" "),"goFile"===e.ruleForm.targetType?o("el-form-item",{attrs:{label:"Go æ–‡ä»¶",prop:"goFile"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"è¯·è¾“å…¥æœ¬åœ° Go æ–‡ä»¶çš„ç»å¯¹è·¯å¾„"},model:{value:e.ruleForm.goFile,callback:function(t){e.$set(e.ruleForm,"goFile","string"==typeof t?t.trim():t)},expression:"ruleForm.goFile"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              ä¸ AI åŠ©æ‰‹ç”Ÿæˆä»£ç çš„ Go æ–‡ä»¶è·¯å¾„ä¸€æ ·ã€‚"),o("br"),e._v("\n              Windows ç¤ºä¾‹ï¼šD:\\project\\dir\\internal\\service\\file.go"),o("br"),e._v("\n              Linux ç¤ºä¾‹ï¼š/project/dir/internal/service/file.go"),o("br")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"æ¸…é™¤ AI ä»£ç "}},[o("el-switch",{model:{value:e.ruleForm.isClean,callback:function(t){e.$set(e.ruleForm,"isClean",t)},expression:"ruleForm.isClean"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              åˆå¹¶ä»£ç ä¹‹åï¼Œæ¸…é™¤ AI åŠ©æ‰‹ç”Ÿæˆçš„ä»£ç ã€‚\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("é‡ç½®")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isShowingInfo,loading:e.isShowingInfo},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("åˆå¹¶ä»£ç ")]),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowResultBtn,expression:"isShowResultBtn"}],attrs:{size:"default"},on:{click:e.showResult}},[e._v("æŸ¥çœ‹ç»“æœ")])],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"æ‰§è¡Œç»“æœ",visible:e.showResultDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showResultDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.responseContent,callback:function(t){e.responseContent=t},expression:"responseContent"}})],1)],1)],1)},staticRenderFns:[]};var Ie=o("VU/8")(qe,Pe,!1,function(e){o("Na0A")},"data-v-1967b386",null).exports,Me={name:"Home",data:function(){return{homeImageSrc:o("X4KW"),homeTplImageSrc:o("SOJA"),homeAssistantImageSrc:o("XkHf")}}},We={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:18,offset:3}},[o("p",{staticStyle:{"margin-bottom":"30px","line-height":"150%"}},[e._v('\n      Sponge is a powerful and easy-to-use Go development framework. Its core\n      philosophy is "Definition is Code". It generates modular Go code by\n      parsing SQL, Protobuf, and JSON files. These code modules can be\n      flexibly combined to build various types of complete backend services.\n      Sponge provides a one-stop project development solution, covering code\n      generation, development, testing, API documentation, and deployment. It\n      helps developers easily build stable and reliable high-performance\n      backend services.\n    ')]),e._v(" "),o("p",[e._v("\n      Github Repository:\n      "),o("a",{attrs:{href:"https://github.com/go-dev-frame/sponge",target:"_blank"}},[e._v("https://github.com/go-dev-frame/sponge")])]),e._v(" "),o("p",[e._v("\n      Development Documentation:\n      "),o("a",{attrs:{href:"https://go-sponge.com",target:"_blank"}},[e._v("https://go-sponge.com")])]),e._v(" "),o("br"),e._v(" "),o("p",[o("b",[e._v("\n        Sponge code generation engine.\n      ")])]),e._v(" "),o("p",[o("b",[e._v("1.")]),e._v(" The code generation framework based on built-in templates, as\n      shown in the following figure:\n    ")]),e._v(" "),o("div",{staticClass:"home-image"},[o("el-image",{attrs:{src:e.homeImageSrc}})],1),e._v(" "),o("br"),e._v(" "),o("p",[o("b",[e._v("2.")]),e._v(" Sponge generates code framework based on custom templates, as\n      shown in the following figure:\n    ")]),e._v(" "),o("div",{staticClass:"framework-image"},[o("el-image",{attrs:{src:e.homeTplImageSrc}})],1),e._v(" "),o("br"),e._v(" "),o("p",[o("b",[e._v("3.")]),e._v(" sponge generates a business logic code framework based on\n      functions and comments, as shown in the following figure:\n    ")]),e._v(" "),o("div",{staticClass:"framework-image"},[o("el-image",{attrs:{src:e.homeAssistantImageSrc}})],1),e._v(" "),o("br"),e._v(" "),o("p")])],1)},staticRenderFns:[]};var Le=o("VU/8")(Me,We,!1,function(e){o("Gmoc")},null,null).exports,je={name:"DownloadCode",data:function(){return{downloadStatusDialogVisible:!1,dialogContent:""}},methods:{execution:function(e,t,o,r){var l=this,i={path:t,arg:o};this.$emit("update-is-downloading",!0),m.a.post(e,i,{responseType:"blob"}).then(function(e){var t=e.data,o=e.headers,i=o["content-disposition"],s=new Blob([t],{type:o["content-type"]}),a=document.createElement("a"),n=window.URL.createObjectURL(s);a.href=n,a.download=decodeURI(i),a.style.display="none",document.body.appendChild(a),a.click(),a.parentNode.removeChild(a),window.URL.revokeObjectURL(n),l.dialogContent=r,l.downloadStatusDialogVisible=!0,l.$emit("update-is-downloading",!1)}).catch(function(e){console.log(e);var t=e.response.headers;""!=t["err-msg"]?l.$message.error(t["err-msg"]):l.$message.error(e.message),l.$emit("update-is-downloading",!1)})}}},Ee={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{staticClass:"helper-dialog",attrs:{title:"Downloaded Successfully",visible:e.downloadStatusDialogVisible,width:"60%",center:""},on:{"update:visible":function(t){e.downloadStatusDialogVisible=t}}},[o("h3",{staticStyle:{"margin-left":"30px"}},[e._v("Help for use:")]),e._v(" "),o("div",{staticStyle:{padding:"10px 30px","font-size":"16px"},domProps:{innerHTML:e._s(e.dialogContent)}})])],1)},staticRenderFns:[]};var Ue=o("VU/8")(je,Ee,!1,function(e){o("7O3S")},"data-v-73feaec2",null).exports,Be={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{attrs:{title:"monolithic application repository (monolith)\nor microservice multi-repositories (muti-repo) directory structure",width:"75%",top:"7vh",visible:e.isShowMutiDialog},on:{"update:visible":function(t){e.isShowMutiDialog=t}}},[o("pre",[e._v(e._s(e.mutiRepoText))])]),e._v(" "),o("el-dialog",{attrs:{title:"Microservice monolithic repository directory structure (also known as large repository directory structure)",width:"80%",visible:e.isShowMonoDialog},on:{"update:visible":function(t){e.isShowMonoDialog=t}}},[o("pre",[e._v(e._s(e.monoRepoText))])])],1)},staticRenderFns:[]};var Ge=o("VU/8")({name:"ShowRepoDir",computed:{mutiRepoFormattedText:function(){return this.mutiRepoText.replace(/\n/g,"<br>")}},data:function(){return{isShowMutiDialog:!1,isShowMonoDialog:!1,mutiRepoText:" .\nâ”œâ”€â”€ api            # Protobuf files and generated * pb.go directory.\nâ”œâ”€â”€ assets         # Store various static resources, such as images, markdown files, etc.\nâ”œâ”€â”€ cmd            # Program entry directory.\nâ”œâ”€â”€ configs        # Directory for configuration files.\nâ”œâ”€â”€ deployments    # Bare metal, docker, k8s deployment script directory.\nâ”œâ”€â”€ docs           # Directory for API interface Swagger documentation.\nâ”œâ”€â”€ internal       # Directory for project internal code.\nâ”‚     â”œâ”€â”€ cache        # Cache directory wrapped around business logic.\nâ”‚     â”œâ”€â”€ config       # Directory for Go structure configuration files.\nâ”‚     â”œâ”€â”€ dao          # Data access directory.\nâ”‚     â”œâ”€â”€ ecode        # Directory for system error codes and custom business error codes.\nâ”‚     â”œâ”€â”€ handler      # Directory for implementing HTTP business functionality.\nâ”‚     â”œâ”€â”€ model        # Database model directory.\nâ”‚     â”œâ”€â”€ routers      # HTTP routing directory.\nâ”‚     â”œâ”€â”€ rpcclient    # Directory for client-side code that connects to gRPC servers.\nâ”‚     â”œâ”€â”€ server       # Directory for creating servers, including HTTP and gRPC servers.\nâ”‚     â”œâ”€â”€ service      # Directory for implementing gRPC business functionality.\nâ”‚     â””â”€â”€ types        # Directory for defining request and response parameter structures for HTTP.\nâ”œâ”€â”€ pkg            # Directory for shared libraries.\nâ”œâ”€â”€ scripts        # Directory for scripts.\nâ”œâ”€â”€ test           # Directory for scripts required for testing services  and test SQL.\nâ”œâ”€â”€ third_party    # Directory for third-party protobuf files or external helper programs.\nâ”œâ”€â”€ Makefile       # Develop, test, deploy related command sets.\nâ”œâ”€â”€ go.mod         # Go module dependencies and version control file.\nâ””â”€â”€ go.sum         # Go module dependencies key and checksum file.\n      ",monoRepoText:" .\nâ”œâ”€â”€ api\nâ”‚    â”œâ”€â”€ server1       # Protobuf files and generated *pb.go directory for service 1.\nâ”‚    â”œâ”€â”€ server2       # Protobuf files and generated *pb.go directory for service 2.\nâ”‚    â”œâ”€â”€ server3       # Protobuf files and generated *pb.go directory for service 3.\nâ”‚    â””â”€â”€ ...\nâ”œâ”€â”€ server1        # Code directory for Service 1, it has a similar structure to the microservice multi repo directory.\nâ”œâ”€â”€ server2        # Code directory for Service 2, it has a similar structure to the microservice multi repo directory.\nâ”œâ”€â”€ server3        # Code directory for Service 3, it has a similar structure to the microservice multi repo directory.\nâ”œâ”€â”€ ...\nâ”œâ”€â”€ third_party    # Third-party protobuf files.\nâ”œâ”€â”€ go.mod         # Go module dependencies and version control file.\nâ””â”€â”€ go.sum         # Go module dependencies' checksums and hash keys.\n\n"}}},Be,!1,function(e){o("SX+c")},"data-v-54394927",null).exports,Ve={name:"WebHTTP",data:function(){return{title:"",path:"web-http",helpInfo:'\n      <p><b>Create web server based on sql</b> generates the complete web server backend code including the CRUD API, for more development details, please refer to the <a href="https://go-sponge.com/guide/web/based-on-sql.html" target="_blank">Development Guide</a>.</p>\n      <br />\n      <p>1. Unzip the file.</p>\n      <p>2. Open a terminal and execute the command to generate the swagger documentation:   <b style="color: green">make docs</b></p>\n      <p>3. Compile and run server:   <b style="color: green">make run</b></p>\n      <p>4. Visit <a href="http://localhost:8080/swagger/index.html" target="_blank">http://localhost:8080/swagger/index.html</a> in your browser and test the <b>CRUD</b> api.</p>\n      <br />\n      <p>Technology stack: <b>Go, Gin, {{.DBDriver}}, go-redis, Zap, Prometheus, OpenTracing</b>, etc.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",projectName:"",repoAddr:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the server",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:Ue,ShowRepoDir:Ge},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),l="web http --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi,i=t.helpInfo;i="mongodb"===t.ruleForm.dbDriver?i.replace("{{.DBDriver}}","Mongo"):i.replace("{{.DBDriver}}","Gorm"),t.$refs.downloadCode.execution(o,t.path,l,i)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},He={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#ff8040"},attrs:{href:"https://go-sponge.com/guide/web/based-on-sql.html",target:"_blank"}},[e._v("Create web server based on sql")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          â€” generate complete web server backend code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database type",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v(", "),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              The dsn of mongodb supports SRV records, with the format:"),o("br"),e._v(" "),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              The dsn of postgresql supports the specified schema, example of\n              adding"),o("br"),e._v("\n              parameters after dsn\n              "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file. "),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"supports multiple selection",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Table names must be in singular form. For example,"),o("br"),e._v('\n              use "role" instead of "roles".'),o("br"),e._v("\n              If you need to add a new data table, please go to"),o("br"),e._v(" "),o("b",[e._v("[Public] â†’ [Generate Service CRUD Code]")]),o("br"),e._v("\n              in the menu to generate the code, and then move it"),o("br"),e._v("\n              to the appropriate location in the project.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server ğŸ¡† your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generation of\n              server"),o("br"),e._v("\n              code suitable for a\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(", where\n              even if"),o("br"),e._v("\n              multiple server codes are placed in one git repository, the\n              codes"),o("br"),e._v("\n              between different servers are not reusable."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("directory structure example")]),e._v(". "),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generation of server code\n              suitable"),o("br"),e._v("\n              for a "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),e._v(",\n              where"),o("br"),e._v("\n              multiple server codes are placed in one git repository, and\n              the"),o("br"),e._v("\n              codes between different servers can be reused. If modules\n              code"),o("br"),e._v("\n              generated later on the page are moved to this server, this\n              option"),o("br"),e._v("\n              also needs to be enabled."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("directory structure example")]),e._v(".\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1)])],1)},staticRenderFns:[]};var Oe=o("VU/8")(Ve,He,!1,function(e){o("C3O1")},"data-v-0dd4e199",null).exports,Ke={name:"WebHandler",data:function(){return{title:"Generate handler CRUD code",path:"web-handler",helpInfo1:'\n      <p>Generate handler code based on sql, contains CRUD API, supporting paging, filtering and sorting queries, caching.</p>\n      <br />\n      <p>1. Unzip the file, move the folder folders <b>internal</b> to a sql based create web server project code folder.</p>\n      <p>2. Open a terminal and execute the command:  <b style="color: green">make docs</b></p>\n      <p>3. Compile and run servers:   <b style="color: green">make run</b></p>\n      <p>4. Visit <a href="http://localhost:8080/swagger/index.html" target="_blank">http://localhost:8080/swagger/index.html</a> in your browser and test the <b>CRUD</b> api.</p>\n      ',helpInfo2:'\n      <p>Generate protobuf and handler code based on sql, contains CRUD API, supporting paging, filtering and sorting queries, caching.</p>\n      <br />\n      <p>1. Unzip the file, move the folders <b>api</b> and <b>internal</b> to a protobuf based create web server project code folder.</p>\n      <p>2. Open a terminal and execute the command:  <b style="color: green">make proto</b></p>\n      <p>3. Compile and run server:  <b style="color: green">make run</b></p>\n      <p>4. Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser and test the <b>CRUD</b> api.</p>\n      ',helpInfo:"",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",embed:!1,isUseInProtobuf:!1,serverName:"",isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:Ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),l="";if(t.ruleForm.isUseInProtobuf){if(""==t.ruleForm.serverName)return t.$message.error("server name cannot be empty"),!1;t.helpInfo=t.helpInfo2,l="web handler-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else{if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("server name cannot be empty"),!1;l="web handler --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else l="web handler --module-name="+t.ruleForm.moduleName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.helpInfo=t.helpInfo1}t.$refs.downloadCode.execution(o,t.path,l,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,isUseInProtobuf:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Ze={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database type",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              The dsn of mongodb supports SRV records, with the format:"),o("br"),e._v(" "),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              The dsn of postgresql supports the specified schema, example of\n              adding"),o("br"),e._v("\n              parameters after dsn\n              "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"supports multiple selection",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Table names must be in singular form. For example,"),o("br"),e._v('\n              use "role" instead of "roles".'),o("br")])])],1),e._v(" "),e.ruleForm.isUseInProtobuf||e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"required field"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              server code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server ğŸ¡† your_server\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" server code directory,"),o("br"),e._v("\n              fill in the module name of the go.mod file"),o("br"),e._v("\n              corresponding to the "),o("b",[e._v("user")]),e._v(" server here.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"protobuf type"}},[o("el-switch",{model:{value:e.ruleForm.isUseInProtobuf,callback:function(t){e.$set(e.ruleForm,"isUseInProtobuf",t)},expression:"ruleForm.isUseInProtobuf"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If it is disable, it means that the generated handler CRUD code\n              is only suitable for"),o("br"),e._v('\n              the project code of "Create web server based on sql".'),o("br"),e._v("\n              If it is enable, it means that the generated handler CRUD code\n              is only suitable for"),o("br"),e._v('\n              the project code of "Create web server based on protobuf".\n            ')])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generated module\n              code"),o("br"),e._v("\n              is only suitable for\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(" type\n              projects."),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generated module code is\n              only"),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),o("br"),e._v("\n              type projects.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var Je=o("VU/8")(Ke,Ze,!1,function(e){o("ASZ4")},"data-v-064c657f",null).exports,Xe={name:"WebCache",data:function(){return{title:"Generate cache code",path:"web-cache",helpInfo:'\n      <p>Generate Key-Value cache (redis) code, for more development details, please refer to the <a href="https://go-sponge.com/guide/module-code/gen-cache.html" target="_blank">Development Guide</a>.</p>\n      <br />\n      <p>Move the folder <b>internal</b> to your project code folder.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{moduleName:"",serverName:"",cacheName:"",prefixKey:"",keyName:"",keyType:"",valueName:"",valueType:"",suitedMonoRepo:!1,isNeedCustomKeyPrefix:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],cacheName:[{required:!0,message:"please type the cache name",trigger:"blur"}],keyName:[{required:!0,message:"please type the key name",trigger:"blur"}],keyType:[{required:!0,message:"please select the go type of key",trigger:"blur"}],valueName:[{required:!0,message:"please type the value name",trigger:"blur"}],valueType:[{required:!0,message:"please select the go type of value",trigger:"blur"}]},keyTypes:[{label:"uint64",value:"uint64"},{label:"string",value:"string"},{label:"int",value:"int"},{label:"int64",value:"int64"}],valueTypes:[{label:"uint64",value:"uint64"},{label:"string",value:"string"},{label:"int",value:"int"},{label:"int64",value:"int64"}]}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName)}).catch(function(e){})},components:{DownloadCode:v},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r="";if(""==t.ruleForm.keyType)return t.$message.error("Go type of the key cannot be empty"),!1;if(""==t.ruleForm.valueType)return t.$message.error("Go type of the value cannot be empty"),!1;if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("server name cannot be empty"),!1;r="web cache --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --cache-name="+t.ruleForm.cacheName+" --prefix-key="+t.ruleForm.prefixKey+" --key-name="+t.ruleForm.keyName+" --key-type="+t.ruleForm.keyType+" --value-name="+t.ruleForm.valueName+" --value-type="+t.ruleForm.valueType+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo}else r="web cache --module-name="+t.ruleForm.moduleName+" --cache-name="+t.ruleForm.cacheName+" --prefix-key="+t.ruleForm.prefixKey+" --key-name="+t.ruleForm.keyName+" --key-type="+t.ruleForm.keyType+" --value-name="+t.ruleForm.valueName+" --value-type="+t.ruleForm.valueType+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.ruleForm={}},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){this.value=e,this.$forceUpdate()},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Qe={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please type the name of the module"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" server code directory,"),o("br"),e._v("\n              fill in the module name of the go.mod file"),o("br"),e._v("\n              corresponding to the "),o("b",[e._v("user")]),e._v(" server here.\n            ")])])],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"required field"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              server code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server ğŸ¡† your_server\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"cache name",prop:"cacheName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"e.g. userToken"},model:{value:e.ruleForm.cacheName,callback:function(t){e.$set(e.ruleForm,"cacheName","string"==typeof t?t.trim():t)},expression:"ruleForm.cacheName"}})],1),e._v(" "),e.ruleForm.isNeedCustomKeyPrefix?o("el-form-item",{attrs:{label:"cache key prefix",prop:"prefixKey"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"e.g. user:token"},model:{value:e.ruleForm.prefixKey,callback:function(t){e.$set(e.ruleForm,"prefixKey","string"==typeof t?t.trim():t)},expression:"ruleForm.prefixKey"}})],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"key name",prop:"keyName"}},[o("el-input",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"e.g. id"},model:{value:e.ruleForm.keyName,callback:function(t){e.$set(e.ruleForm,"keyName","string"==typeof t?t.trim():t)},expression:"ruleForm.keyName"}}),e._v(" "),o("el-select",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"Go type of key",filterable:"","allow-create":"",clearable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.keyType,callback:function(t){e.$set(e.ruleForm,"keyType",t)},expression:"ruleForm.keyType"}},e._l(e.keyTypes,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"value name",prop:"valueName"}},[o("el-input",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"e.g. token"},model:{value:e.ruleForm.valueName,callback:function(t){e.$set(e.ruleForm,"valueName","string"==typeof t?t.trim():t)},expression:"ruleForm.valueName"}}),e._v(" "),o("el-select",{staticStyle:{width:"40%","font-size":"medium"},attrs:{placeholder:"Go type of value",filterable:"","allow-create":"",clearable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.valueType,callback:function(t){e.$set(e.ruleForm,"valueType",t)},expression:"ruleForm.valueType"}},e._l(e.valueTypes,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:" custom cache key prefix "}},[o("el-switch",{model:{value:e.ruleForm.isNeedCustomKeyPrefix,callback:function(t){e.$set(e.ruleForm,"isNeedCustomKeyPrefix",t)},expression:"ruleForm.isNeedCustomKeyPrefix"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The default key name stored in the cache service is\n              "),o("b",[e._v("cache name: key value")]),o("br"),o("br"),e._v("\n              If this option is enabled, setting a custom cache key prefix\n              will change the"),o("br"),e._v("key name to\n              "),o("b",[e._v("custom cache key prefix: key value")]),e._v(".\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generated module\n              code"),o("br"),e._v("\n              is only suitable for\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(" type\n              projects."),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generated module code is\n              only"),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),o("br"),e._v("\n              type projects.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var Ye=o("VU/8")(Xe,Qe,!1,function(e){o("MenH")},"data-v-131a2647",null).exports,et={name:"WebDao",data:function(){return{title:"Generate DAO CRUD code",path:"web-dao",helpInfo:'\n      <p>Generate DAO code based on table sql, contains CRUD API, arbitrary condition paging query, caching, for more development details, please refer to the <a href="https://go-sponge.com/guide/module-code/gen-dao-crud.html" target="_blank">Development Guide</a>.</p>\n      <br />\n      <p>1. Move the folder <b>internal</b> to your project code folder.</p>\n      <p>2. Invoke DAO code in handler or service.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",includeInitDB:!1,embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.includeInitDB=!1,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:Ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),l="";if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("server name cannot be empty"),!1;l="web dao --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --include-init-db="+t.ruleForm.includeInitDB+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi}else l="web dao --module-name="+t.ruleForm.moduleName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --include-init-db="+t.ruleForm.includeInitDB+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,l,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},tt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database type",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              The dsn of mongodb supports SRV records, with the format:"),o("br"),e._v(" "),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              The dsn of postgresql supports the specified schema, example of\n              adding"),o("br"),e._v("\n              parameters after dsn\n              "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"supports multiple selection",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Table names must be in singular form. For example,"),o("br"),e._v('\n              use "role" instead of "roles".'),o("br")])])],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"required field"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              server code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server ğŸ¡† your_server\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" server code directory,"),o("br"),e._v("\n              fill in the module name of the go.mod file"),o("br"),e._v("\n              corresponding to the "),o("b",[e._v("user")]),e._v(" server here.\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generated module\n              code"),o("br"),e._v("\n              is only suitable for\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(" type\n              projects."),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generated module code is\n              only"),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),o("br"),e._v("\n              type projects.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var ot=o("VU/8")(et,tt,!1,function(e){o("VjOo")},"data-v-487fb410",null).exports,rt={name:"WebModel",data:function(){return{title:"Generate model code",path:"web-model",helpInfo:"\n      <p>Generate the corresponding go structure based on the table sql.</p>\n      <br />\n      <p>Move the folder <b>internal</b> to your project code folder.</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",embed:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:Ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),l="web model --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed;t.$refs.downloadCode.execution(o,t.path,l,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},lt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database type",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              The dsn of mongodb supports SRV records, with the format:"),o("br"),e._v(" "),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              The dsn of postgresql supports the specified schema, example of\n              adding"),o("br"),e._v("\n              parameters after dsn\n              "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"supports multiple selection",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Table names must be in singular form. For example,"),o("br"),e._v('\n              use "role" instead of "roles".'),o("br")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e()],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var it=o("VU/8")(rt,lt,!1,function(e){o("kD/A")},"data-v-20fa4a6c",null).exports,st={name:"MicroRPC",data:function(){return{title:"",path:"micro-rpc",helpInfo:'\n      <p><b>Create gRPC server based on sql</b> generates a complete microservice code including CRUD API, for more development details, please refer to the <a href="https://go-sponge.com/guide/grpc/based-on-sql.html" target="_blank">Development Guide</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open a terminal and execute the command to generate code:  <b style="color: green">make proto</b></p>\n      <p>3. Compile and run server:   <b style="color: green">make run</b></p>\n      <p>4. Open the file using <b>Goland</b> or <b>VSCode</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span>, test or performance test the api.</p>\n      <br />\n      <p>Technology stack: <b>Go, gRPC, {{.DBDriver}}, go-redis, Protobuf, Zap, Prometheus, OpenTracing</b>, etc.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",projectName:"",repoAddr:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the server",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:Ue,ShowRepoDir:Ge},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),l="micro rpc --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi,i=t.helpInfo;i="mongodb"===t.ruleForm.dbDriver?i.replace("{{.DBDriver}}","Mongo"):i.replace("{{.DBDriver}}","Gorm"),t.$refs.downloadCode.execution(o,t.path,l,i)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},at={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#99c400"},attrs:{href:"https://go-sponge.com/guide/grpc/based-on-sql.html",target:"_blank"}},[e._v("Create gRPC server based on sql")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          â€” generate complete microservice code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database type",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v(", "),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              The dsn of mongodb supports SRV records, with the format:"),o("br"),e._v(" "),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              The dsn of postgresql supports the specified schema, example of\n              adding"),o("br"),e._v("\n              parameters after dsn\n              "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"supports multiple selection",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Table names must be in singular form. For example,"),o("br"),e._v('\n              use "role" instead of "roles".'),o("br"),e._v("\n              If you need to add a new data table, please go to"),o("br"),e._v(" "),o("b",[e._v("[Public] â†’ [Generate Service CRUD Code]")]),o("br"),e._v("\n              in the menu to generate the code, and then move it"),o("br"),e._v("\n              to the appropriate location in the project.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server ğŸ¡† your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generation of\n              server"),o("br"),e._v("\n              code suitable for a\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(", where\n              even if"),o("br"),e._v("\n              multiple server codes are placed in one git repository, the\n              codes"),o("br"),e._v("\n              between different servers are not reusable."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("directory structure example")]),e._v(". "),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generation of server code\n              suitable"),o("br"),e._v("\n              for a "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),e._v(",\n              where"),o("br"),e._v("\n              multiple server codes are placed in one git repository, and\n              the"),o("br"),e._v("\n              codes between different servers can be reused. If modules\n              code"),o("br"),e._v("\n              generated later on the page are moved to this server, this\n              option"),o("br"),e._v("\n              also needs to be enabled."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("directory structure example")]),e._v(".\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1)])],1)},staticRenderFns:[]};var nt=o("VU/8")(st,at,!1,function(e){o("m8iD")},"data-v-24576b84",null).exports,ct={name:"MicroRPCConn",data:function(){return{title:"Generate gRPC connection code",path:"micro-rpc-conn",helpInfo:"\n      <p>The gRPC server connection code includes common service governance features such as service discovery, load balancing, flow limiting, melting, link tracing, etc.</p>\n      <br />\n      <p>Unzip the file and move the folder <b>internal</b> to your project code folder.</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{moduleName:"",serverName:"",rpcServerNames:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],rpcServerNames:[{required:!0,message:"please type the name of the gRPC server",trigger:"blur"}]}}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.rpcServerNames=o.data.rpcServerNames)}).catch(function(e){})},components:{DownloadCode:Ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r="";if(t.ruleForm.suitedMonoRepo){if(""==t.ruleForm.serverName)return t.$message.error("server name cannot be empty"),!1;r="micro rpc-conn --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --rpc-server-name="+t.ruleForm.rpcServerNames+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo}else r="micro rpc-conn --module-name="+t.ruleForm.moduleName+" --rpc-server-name="+t.ruleForm.rpcServerNames+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.ruleForm={}},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},dt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please type the name of the module"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" server code directory,"),o("br"),e._v("\n              fill in the module name of the go.mod file"),o("br"),e._v("\n              corresponding to the "),o("b",[e._v("user")]),e._v(" server here.\n            ")])])],1),e._v(" "),e.ruleForm.suitedMonoRepo?o("el-form-item",{attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"required field"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              server code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server ğŸ¡† your_server\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"gRPC server name",prop:"rpcServerNames"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"multiple gRPC servers support"},model:{value:e.ruleForm.rpcServerNames,callback:function(t){e.$set(e.ruleForm,"rpcServerNames","string"==typeof t?t.trim():t)},expression:"ruleForm.rpcServerNames"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If you want to generate code to connect multiple gRPC\n              servers,"),o("br"),e._v("\n              gRPC server names are separated by commas."),o("br"),e._v("\n              example: service1,service2,service3\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generated module\n              code"),o("br"),e._v("\n              is only suitable for\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(" type\n              projects."),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generated module code is\n              only"),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),o("br"),e._v("\n              type projects.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var mt=o("VU/8")(ct,dt,!1,function(e){o("lZNn")},"data-v-010677e0",null).exports,ut={name:"MicroService",data:function(){return{title:"Generate service CRUD code",path:"micro-service",helpInfo:'\n      <p>Generate service code based on table sql, including gRPC CRUD API and test code, supporting paging, filtering and sorting queries, caching.</p>\n      <br />\n      <p>1. Unzip the code file</p>\n      <p>2. Move the folders <b>api</b> and <b>internal</b> to your gRPC server code folder.</p>\n      <p>3. Open a terminal and execute the command:  <b style="color: green">make proto</b></p>\n      <p>4. Compile and run server:   <b style="color: green">make run</b></p>\n      <p>5. Open the file using <b>Goland</b> or <b>VSCode</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span>, and test the CRUD API.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the server",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:Ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),l="micro service --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,l,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},pt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database type",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              The dsn of mongodb supports SRV records, with the format:"),o("br"),e._v(" "),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              The dsn of postgresql supports the specified schema, example of\n              adding"),o("br"),e._v("\n              parameters after dsn\n              "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"supports multiple selection",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Table names must be in singular form. For example,"),o("br"),e._v('\n              use "role" instead of "roles".'),o("br")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              server code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server ğŸ¡† your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" server code directory,"),o("br"),e._v("\n              fill in the module name of the go.mod file"),o("br"),e._v("\n              corresponding to the "),o("b",[e._v("user")]),e._v(" server here.\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generated module\n              code"),o("br"),e._v("\n              is only suitable for\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(" type\n              projects."),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generated module code is\n              only"),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),o("br"),e._v("\n              type projects.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var vt=o("VU/8")(ut,pt,!1,function(e){o("jWvp")},"data-v-0dc8c356",null).exports,ht={name:"MicroService",data:function(){return{title:"Generate service+handler CRUD code",path:"micro-service-handler",helpInfo:'\n      <p>Generate service+handler code based on table sql, the code contains gRPC+HTTP CRUD API related code.</p>\n      <br />\n      <p>1. Unzip the code file, move the folders <b>api</b> and <b>internal</b> to the project code folder "create gRPC+HTTP servers based on protobuf" </p>\n      <p>2. Open a terminal and execute the command:  <b style="color: green">make proto</b></p>\n      <p>3. Compile and run server:   <b style="color: green">make run</b></p>\n      <p>4. Test or performance test api:<br />\n        &emsp;â—‹ Open the file using <b>Goland</b> or <b>VSCode</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span> and test or performance test gRPC api.<br />\n        &emsp;â—‹ Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser and test http api.</p>\n        ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the server",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:Ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),l="micro service-handler --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,l,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},ft={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database type",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              The dsn of mongodb supports SRV records, with the format:"),o("br"),e._v(" "),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              The dsn of postgresql supports the specified schema, example of\n              adding"),o("br"),e._v("\n              parameters after dsn\n              "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"supports multiple selection",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Table names must be in singular form. For example,"),o("br"),e._v('\n              use "role" instead of "roles".'),o("br")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, if the generated code is to be moved to the\n              "),o("b",[e._v("user")]),o("br"),e._v("\n              server code directory, fill in "),o("b",[e._v("user")]),e._v(" here."),o("br"),e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server ğŸ¡† your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              For example, the generated code will be"),o("br"),e._v("\n              moved to the "),o("b",[e._v("user")]),e._v(" server code directory,"),o("br"),e._v("\n              fill in the module name of the go.mod file"),o("br"),e._v("\n              corresponding to the "),o("b",[e._v("user")]),e._v(" server here.\n            ")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generated module\n              code"),o("br"),e._v("\n              is only suitable for\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(" type\n              projects."),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generated module code is\n              only"),o("br"),e._v("\n              suitable for\n              "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),o("br"),e._v("\n              type projects.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var bt=o("VU/8")(ht,ft,!1,function(e){o("rMfZ")},"data-v-86476c02",null).exports,gt={name:"MicroProtobuf",data:function(){var e;return e={title:"Generate protobuf CRUD description information",path:"micro-protobuf",helpInfo:'\n      <p>Converting table sql to protobuf description information, mainly contains CRUD API.</p>\n      <br />\n      <p>Move the folder <b>api</b> to your project code folder, the proto file is also used for the following purposes.: </p>\n      <p style="text-indent:2em;">â— generate swagger documents.\n      <p style="text-indent:2em;">â— generate the required code as a custom plug-in for protoc.\n      <p style="text-indent:2em;">â— create web servers.\n      <p style="text-indent:2em;">â— create gRPC servers.\n      <p style="text-indent:2em;">â— create gRPC+HTTP servers.\n      <p style="text-indent:2em;">â— create gRPC gateway servers.\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",isWebProto:!1,isExtendedApi:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the server",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1},f()(e,"isSelectedAllTable",!1),f()(e,"dbDriverNames",[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]),e},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.isWebProto=!1,e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:Ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),l="micro protobuf --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --web-type="+t.ruleForm.isWebProto+" --extended-api="+t.ruleForm.isExtendedApi;t.$refs.downloadCode.execution(o,t.path,l,t.helpInfo)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[]}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table names success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},_t={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database type",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",clearable:"",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              The dsn of mongodb supports SRV records, with the format:"),o("br"),e._v(" "),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              The dsn of postgresql supports the specified schema, example of\n              adding"),o("br"),e._v("\n              parameters after dsn\n              "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"supports multiple selection",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Table names must be in singular form. For example,"),o("br"),e._v('\n              use "role" instead of "roles".'),o("br")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server ğŸ¡† your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"include route and swagger"}},[o("el-switch",{model:{value:e.ruleForm.isWebProto,callback:function(t){e.$set(e.ruleForm,"isWebProto",t)},expression:"ruleForm.isWebProto"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If enabled, the generated proto file include the route and\n              "),o("br"),e._v("\n              swagger description information."),o("br"),e._v("\n              if disable, route and swagger description information are not\n              include.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var Ft=o("VU/8")(gt,_t,!1,function(e){o("QRxO")},"data-v-0383bd10",null).exports,wt={name:"WebHTTPPb",data:function(){return{title:"",path:"web-http-pb",helpInfo:'\n      <p><b>Create web server based on protobuf</b> generates generic web server backend code, for more development details, please refer to the <a href="https://go-sponge.com/guide/web/based-on-protobuf.html" target="_blank">Development Guide</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open a terminal and execute the command to generate code: <b style="color: green">make proto</b></p>\n      <p>3. Open file <span style="color: chocolate">internal/handler/xxx.go</span>, replace <span style="color: chocolate">panic("implement me")</span> according to template code example.</p>\n      <p>4. Compile and run server:   <b style="color: green">make run</b></p>\n      <p>5. Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser and test api.</p>\n      <br />\n      <p>Technology stack: <b>Go, Gin, Protobuf, Zap, Prometheus, OpenTracing</b>, etc.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the server",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}],protobufFile:[{required:!0,message:"please select a proto file",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\n// The first user is the go module name, the second user is the server name, and v1 is the version number.\noption go_package = "user/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // Login comments\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "login",\n      description: "login with email",\n    };\n  }\n\n  // Note: The following two types of rpc will be ignored to generate http related code\n  //    1. Google.api.http is not set in rpc, e.g. SayHi\n  //    2. rpc is of stream type, such as ClientSteam, ServerSteam, BidiSteam\n\n  //rpc SayHi(HelloRequest) returns (HelloReply) {}\n  //rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  //rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  //rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:Ue,ShowRepoDir:Ge},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="web http-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+"--server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to download code")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},yt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#e403a4"},attrs:{href:"https://go-sponge.com/guide/web/based-on-protobuf.html",target:"_blank"}},[e._v("Create web server based on protobuf")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          â€” generate generic web server backend code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto file",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("View an example of a protobuf file")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("select proto file")]),e._v(", multi-file support.\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server ğŸ¡† your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generation of\n              server"),o("br"),e._v("\n              code suitable for a\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(", where\n              even if"),o("br"),e._v("\n              multiple server codes are placed in one git repository, the\n              codes"),o("br"),e._v("\n              between different servers are not reusable."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("directory structure example")]),e._v(". "),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generation of server code\n              suitable"),o("br"),e._v("\n              for a "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),e._v(",\n              where"),o("br"),e._v("\n              multiple server codes are placed in one git repository, and\n              the"),o("br"),e._v("\n              codes between different servers can be reused. If modules\n              code"),o("br"),e._v("\n              generated later on the page are moved to this server, this\n              option"),o("br"),e._v("\n              also needs to be enabled."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("directory structure example")]),e._v(".\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var Ct=o("VU/8")(wt,yt,!1,function(e){o("pqT2")},"data-v-04b2976d",null).exports,St={name:"MicroRPCPb",data:function(){return{title:"",path:"micro-rpc-pb",helpInfo:'\n      <p><b>Create gRPC server based on protobuf</b> generates generic gRPC server code, for more development details, please refer to the <a href="https://go-sponge.com/guide/grpc/based-on-protobuf.html" target="_blank">Development Guide</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open a terminal and execute the command to generate code:   <b style="color: green">make proto</b></p>\n      <p>3. Open file <span style="color: chocolate">internal/service/xxx.go</span>, replace <span style="color: chocolate">panic("implement me")</span> according to template code example.</p>\n      <p>4. Compile and run server:   <b style="color: green">make run</b></p>\n      <p>5. Open the file using <b>Goland</b> or <b>VSCode</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span>, and test api.</p>\n      <br />\n      <p>Technology stack: <b>Go, gRPC, Protobuf, Zap, Prometheus, OpenTracing</b>, etc.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the server",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}],protobufFile:[{required:!0,message:"please select a proto file",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\n// The first user is the go module name, the second user is the server name, and v1 is the version number.\noption go_package = "user/api/user/v1;v1";\n\nservice user {\n  // Login comments\n  rpc Login(LoginRequest) returns (LoginReply) {}\n\n  rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:Ue,ShowRepoDir:Ge},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro rpc-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to download code")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Dt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#2ba207"},attrs:{href:"https://go-sponge.com/guide/grpc/based-on-protobuf.html",target:"_blank"}},[e._v("Create gRPC server based on protobuf")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          â€” generate generic microservice code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto file",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("View an example of a protobuf file")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("select proto file")]),e._v(", multi-file support.\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server ğŸ¡† your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generation of\n              server"),o("br"),e._v("\n              code suitable for a\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(", where\n              even if"),o("br"),e._v("\n              multiple server codes are placed in one git repository, the\n              codes"),o("br"),e._v("\n              between different servers are not reusable."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("directory structure example")]),e._v(". "),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generation of server code\n              suitable"),o("br"),e._v("\n              for a "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),e._v(",\n              where"),o("br"),e._v("\n              multiple server codes are placed in one git repository, and\n              the"),o("br"),e._v("\n              codes between different servers can be reused. If modules\n              code"),o("br"),e._v("\n              generated later on the page are moved to this server, this\n              option"),o("br"),e._v("\n              also needs to be enabled."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("directory structure example")]),e._v(".\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var xt=o("VU/8")(St,Dt,!1,function(e){o("IH7g")},"data-v-74adb6d2",null).exports,Nt={name:"MicroRPC",data:function(){return{title:"",path:"micro-rpc",helpInfo:'\n      <p><b>Create gRPC+HTTP servers based on sql</b> generates a complete microservice code including CRUD API, for more development details, please refer to the <a href="https://go-sponge.com/guide/grpc-http/based-on-sql.html" target="_blank">Development Guide</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open a terminal and execute the command to generate code:  <b style="color: green">make proto</b></p>\n      <p>3. Compile and run server:   <b style="color: green">make run</b></p>\n      <p>4. Test or performance test api:<br />\n        &emsp;â—‹ Open the file using <b>Goland</b> or <b>VSCode</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span> and test or performance test gRPC api.<br />\n        &emsp;â—‹ Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser and test http api.</p>\n      <br />\n      <p>Technology stack: <b>Go, gRPC, {{.DBDriver}}, go-redis, Protobuf, Zap, Prometheus, OpenTracing</b>, etc.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowEmbedModel:!0,isDownloading:!1,ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",moduleName:"",serverName:"",projectName:"",repoAddr:"",embed:!1,isExtendedApi:!1,suitedMonoRepo:!1},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"change"}],moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the server",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}]},tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.checkDBDriver(e.ruleForm.dbDriver),e.listTables(!1))}).catch(function(e){})},components:{DownloadCode:Ue,ShowRepoDir:Ge},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=appConfig.spongeServiceAddr+"/generate",r=t.ruleForm.tableName.join(","),l="micro grpc-http --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --db-driver="+t.ruleForm.dbDriver+" --db-dsn="+t.ruleForm.dsnAddr+" --db-table="+r+" --embed="+t.ruleForm.embed+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo+" --extended-api="+t.ruleForm.isExtendedApi,i=t.helpInfo;i="mongodb"===t.ruleForm.dbDriver?i.replace("{{.DBDriver}}","Mongo"):i.replace("{{.DBDriver}}","Gorm"),t.$refs.downloadCode.execution(o,t.path,l,i)})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.tableNames=[],this.ruleForm={tableName:[],embed:!1,suitedMonoRepo:!1}},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name")),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate(),this.checkDBDriver(e)},checkDBDriver:function(e){this.isShowEmbedModel="mongodb"!=e},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},kt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#00CED1"},attrs:{href:"https://go-sponge.com/guide/grpc-http/based-on-sql.html",target:"_blank"}},[e._v("Create gRPC+HTTP servers based on sql")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          â€” generate complete microservice code that supports gRPC and HTTP\n          protocols")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database type",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After selecting the database type, the generated code"),o("br"),e._v("\n              will automatically match that database type.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v(", "),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              The dsn of mongodb supports SRV records, with the format:"),o("br"),e._v(" "),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              The dsn of postgresql supports the specified schema, example of\n              adding"),o("br"),e._v("\n              parameters after dsn\n              "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or\n              "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"supports multiple selection",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Table names must be in singular form. For example,"),o("br"),e._v('\n              use "role" instead of "roles".'),o("br"),e._v("\n              If you need to add a new data table, please go to"),o("br"),e._v(" "),o("b",[e._v("[Public] â†’ [Generate Service CRUD Code]")]),o("br"),e._v("\n              in the menu to generate the code, and then move it"),o("br"),e._v("\n              to the appropriate location in the project.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server ğŸ¡† your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),e.isShowEmbedModel?o("el-form-item",{attrs:{label:"embed model"}},[o("el-switch",{model:{value:e.ruleForm.embed,callback:function(t){e.$set(e.ruleForm,"embed",t)},expression:"ruleForm.embed"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The gorm.Model struct field corresponds to the four column names\n              "),o("br"),e._v("\n              id, created_at, updated_at, and deleted_at in the table,\n              supports soft deletion.\n              "),o("br"),e._v("\n              If the table contains these column names, enable it."),o("br"),e._v("\n              If the table does not contain these column names, disable it.\n            ")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"CRUD API extend"}},[o("el-switch",{model:{value:e.ruleForm.isExtendedApi,callback:function(t){e.$set(e.ruleForm,"isExtendedApi",t)},expression:"ruleForm.isExtendedApi"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Default off, generating 5 basic CRUD API codes."),o("br"),e._v("\n              If enabled, in addition to the 5 basic CRUD APIs,"),o("br"),e._v("\n              an additional 4 APIs have been added, namely"),o("br"),e._v("\n              DeleteByIDs, GetByCondition, ListByIDs, ListByLastID.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generation of\n              server"),o("br"),e._v("\n              code suitable for a\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(", where\n              even if"),o("br"),e._v("\n              multiple server codes are placed in one git repository, the\n              codes"),o("br"),e._v("\n              between different servers are not reusable."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("directory structure example")]),e._v(". "),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generation of server code\n              suitable"),o("br"),e._v("\n              for a "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),e._v(",\n              where"),o("br"),e._v("\n              multiple server codes are placed in one git repository, and\n              the"),o("br"),e._v("\n              codes between different servers can be reused. If modules\n              code"),o("br"),e._v("\n              generated later on the page are moved to this server, this\n              option"),o("br"),e._v("\n              also needs to be enabled."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("directory structure example")]),e._v(".\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1)])],1)},staticRenderFns:[]};var Rt=o("VU/8")(Nt,kt,!1,function(e){o("kGCC")},"data-v-138ea357",null).exports,Tt={name:"MicroGRPCHTTPPb",data:function(){return{title:"",path:"micro-grpc-http-pb",helpInfo:'\n      <p><b>Create gRPC+HTTP servers based on protobuf</b> generates generic gRPC and HTTP hibrid servers code, for more development details, please refer to the <a href="https://go-sponge.com/guide/grpc-http/based-on-protobuf.html" target="_blank">Development Guide</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open the terminal and execute the command to generate code:   <b style="color: green">make proto</b></p>\n      <p>3. Open file <span style="color: chocolate">internal/service/xxx.go</span>, replace <span style="color: chocolate">panic("implement me")</span> according to template code example.</p>\n      <p>4. Compile and run server:   <b style="color: green">make run</b></p>\n      <p>5. Test or performance test api:<br />\n        &emsp;â—‹ Open the file using <b>Goland</b> or <b>VSCode</b> <span style="color: chocolate">internal/service/xxx_client_test.go</span> and test or performance test gRPC api.<br />\n        &emsp;â—‹ Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser and test http api.</p>\n      <br />\n      <p>Technology stack: <b>Go, Gin, gRPC, Protobuf, Zap, Prometheus, OpenTracing</b>, etc.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the server",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}],protobufFile:[{required:!0,message:"please select a proto file",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\n// The first user is the go module name, the second user is the server name, and v1 is the version number.\noption go_package = "user/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // Login comments\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "login",\n      description: "log in with email",\n    };\n  }\n\n  // Note: The following two types of rpc will be ignored to generate http related code\n  //    1. Google.api.http is not set in rpc, e.g. SayHi\n  //    2. rpc is of stream type, such as ClientSteam, ServerSteam, BidiSteam\n\n  rpc SayHi(HelloRequest) returns (HelloReply) {}\n  rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:Ue,ShowRepoDir:Ge},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro grpc-http-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to download code")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},At={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#21A3F1"},attrs:{href:"https://go-sponge.com/guide/grpc-http/based-on-protobuf.html",target:"_blank"}},[e._v("Create gRPC+HTTP servers based on protobuf")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          â€” Generate generic microservice code that supports gRPC and\n          HTTP protocols")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto file",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("View an example of a protobuf file")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("select proto file")]),e._v(", multi-file support.\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server ğŸ¡† your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generation of\n              server"),o("br"),e._v("\n              code suitable for a\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(", where\n              even if"),o("br"),e._v("\n              multiple server codes are placed in one git repository, the\n              codes"),o("br"),e._v("\n              between different servers are not reusable."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("directory structure example")]),e._v(". "),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generation of server code\n              suitable"),o("br"),e._v("\n              for a "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),e._v(",\n              where"),o("br"),e._v("\n              multiple server codes are placed in one git repository, and\n              the"),o("br"),e._v("\n              codes between different servers can be reused. If modules\n              code"),o("br"),e._v("\n              generated later on the page are moved to this server, this\n              option"),o("br"),e._v("\n              also needs to be enabled."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("directory structure example")]),e._v(".\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var zt=o("VU/8")(Tt,At,!1,function(e){o("wYtl")},"data-v-88e08182",null).exports,$t={name:"MicroRPCGwPb",data:function(){return{title:"",path:"micro-rpc-gw-pb",helpInfo:'\n      <p><b>Create gRPC gateway server based on protobuf</b> generates server code for converting http requests to gRPC requests, for more development details, please refer to the <a href="https://go-sponge.com/guide/grpc-gateway/based-on-protobuf.html" target="_blank">Development Guide</a>.</p>\n      <br />\n      <p>1. Unzip the code file.</p>\n      <p>2. Open a terminal and execute the command to generate code: <b style="color: green">make proto</b></p>\n      <p>3. Open <span style="color: chocolate">internal/service/xxx.go</span> file, replace <span style="color: chocolate">panic("implement me")</span> according to template code example. </p>\n      <p>4. Compile and run server.<b style="color: green">make run</b></p>\n      <p>5. Visit <a href="http://localhost:8080/apis/swagger/index.html" target="_blank">http://localhost:8080/apis/swagger/index.html</a> in your browser, and test api.</p>\n      <br />\n      <p>Technology stack: <b>Go, Gin, Protobuf, Zap, Prometheus, OpenTracing</b>, etc.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{moduleName:"",serverName:"",projectName:"",repoAddr:"",protobufFile:"",suitedMonoRepo:!1},rules:{moduleName:[{required:!0,message:"please type the name of the go module",trigger:"blur"}],serverName:[{required:!0,message:"please type the name of the server",trigger:"blur"}],projectName:[{required:!0,message:"please type the project name",trigger:"blur"}],protobufFile:[{required:!0,message:"please select a proto file",trigger:"change"}]},showProtoDemoDialogVisible:!1,protoDemoContent:'syntax = "proto3";\n\npackage api.user.v1;\n\nimport "google/api/annotations.proto";\nimport "protoc-gen-openapiv2/options/annotations.proto";\n\n// The first user is the go module name, the second user is the server name, and v1 is the version number.\noption go_package = "user/api/user/v1;v1";\n\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {\n  host: "localhost:8080"\n  base_path: ""\n  info: {\n    title: "user api docs";\n    version: "2.0";\n  };\n  schemes: HTTP;\n  schemes: HTTPS;\n  consumes: "application/json";\n  produces: "application/json";\n};\n\nservice user {\n  // Login comments\n  rpc Login(LoginRequest) returns (LoginReply) {\n    option (google.api.http) = {\n      post: "/api/v1/login"\n      body: "*"\n    };\n    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {\n      summary: "login",\n      description: "login with email",\n    };\n  }\n\n  // Note: The following two types of rpc will be ignored to generate http related code\n  //    1. Google.api.http is not set in rpc, e.g. SayHi\n  //    2. rpc is of stream type, such as ClientSteam, ServerSteam, BidiSteam\n\n  //rpc SayHi(HelloRequest) returns (HelloReply) {}\n  //rpc ClientSteam(stream HelloRequest) returns (HelloReply) {}\n  //rpc ServerSteam(HelloRequest) returns (stream HelloReply) {}\n  //rpc BidiSteam(stream HelloRequest) returns (stream HelloReply) {}\n}\n\nmessage LoginRequest {\n  string email = 1;\n  string password = 2;\n}\n\nmessage LoginReply {\n  string token = 1;\n}\n\nmessage HelloRequest {\n  string name = 1;\n}\n\nmessage HelloReply {\n  string msg = 1;\n}\n'}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.moduleName=o.data.moduleName,e.ruleForm.serverName=o.data.serverName,e.ruleForm.projectName=o.data.projectName,e.ruleForm.repoAddr=o.data.repoAddr,e.ruleForm.protobufFile="")}).catch(function(e){})},components:{DownloadCode:Ue,ShowRepoDir:Ge},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="micro rpc-gw-pb --module-name="+t.ruleForm.moduleName+" --server-name="+t.ruleForm.serverName+" --project-name="+t.ruleForm.projectName+" --repo-addr="+t.ruleForm.repoAddr+" --protobuf-file="+e.data.data+" --suited-mono-repo="+t.ruleForm.suitedMonoRepo;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to download code")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("protobufFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},showProtoFileDemo:function(){this.showProtoDemoDialogVisible=!0},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},qt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#CF40FF"},attrs:{href:"https://go-sponge.com/guide/grpc-gateway/based-on-protobuf.html",target:"_blank"}},[e._v("Create gRPC gateway server based on protobuf")]),e._v(" "),o("span",{staticStyle:{color:"#666","font-weight":"normal"}},[e._v("\n          â€” generate gRPC gateway server project code")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"proto file",prop:"protobufFile"}},[o("el-link",{staticStyle:{"margin-left":"10%","padding-bottom":"5px","font-size":"16px"},attrs:{type:"primary"},on:{click:e.showProtoFileDemo}},[e._v("View an example of a protobuf file")]),e._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("select proto file")]),e._v(", multi-file support.\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"server name",prop:"serverName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.serverName,callback:function(t){e.$set(e.ruleForm,"serverName","string"==typeof t?t.trim():t)},expression:"ruleForm.serverName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains hyphens, they will be converted to\n              underscores."),o("br"),e._v("\n              example: your-server ğŸ¡† your_server\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"module name",prop:"moduleName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.moduleName,callback:function(t){e.$set(e.ruleForm,"moduleName","string"==typeof t?t.trim():t)},expression:"ruleForm.moduleName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              module name for go.mod file.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"project name",prop:"projectName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.projectName,callback:function(t){e.$set(e.ruleForm,"projectName","string"==typeof t?t.trim():t)},expression:"ruleForm.projectName"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the name contains uppercase letters, they will be"),o("br"),e._v("\n              converted to lowercase and separated by underscores."),o("br"),e._v("\n              example: yourProject ğŸ¡† your-project\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"docker repository"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.repoAddr,callback:function(t){e.$set(e.ruleForm,"repoAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.repoAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Docker image repository address, the default value is\n              "),o("b",[e._v("image-repo-host")]),e._v(","),o("br"),e._v("\n              this parameter is used to build docker images, k8s deployment\n              scripts, "),o("br"),e._v("\n              if you use the official docker image repository, just fill in\n              the user name"),o("br"),e._v("\n              of the registered docker repository, if you use the private\n              repository"),o("br"),e._v("\n              address, you need to fill in the full repository address."),o("br")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"large repository type"}},[o("el-switch",{model:{value:e.ruleForm.suitedMonoRepo,callback:function(t){e.$set(e.ruleForm,"suitedMonoRepo",t)},expression:"ruleForm.suitedMonoRepo"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Disabled by default, it indicates that the generation of\n              server"),o("br"),e._v("\n              code suitable for a\n              "),o("b",[e._v("monolithic application repository (monolith)")]),o("br"),e._v("\n              or "),o("b",[e._v("microservice multiple repository (multi-repo)")]),e._v(", where\n              even if"),o("br"),e._v("\n              multiple server codes are placed in one git repository, the\n              codes"),o("br"),e._v("\n              between different servers are not reusable."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMutiRepoDir}},[e._v("directory structure example")]),e._v(". "),o("br"),o("br"),e._v("\n              If enabled, it indicates that the generation of server code\n              suitable"),o("br"),e._v("\n              for a "),o("b",[e._v("microservice monolithic repository (mono-repo)")]),e._v(",\n              where"),o("br"),e._v("\n              multiple server codes are placed in one git repository, and\n              the"),o("br"),e._v("\n              codes between different servers can be reused. If modules\n              code"),o("br"),e._v("\n              generated later on the page are moved to this server, this\n              option"),o("br"),e._v("\n              also needs to be enabled."),o("br"),e._v("\n              Click to view\n              "),o("el-button",{attrs:{type:"text"},on:{click:e.showMonoRepoDir}},[e._v("directory structure example")]),e._v(".\n            ")],1)])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"user.proto",visible:e.showProtoDemoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showProtoDemoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.protoDemoContent,callback:function(t){e.protoDemoContent=t},expression:"protoDemoContent"}})],1)],1)],1)},staticRenderFns:[]};var Pt=o("VU/8")($t,qt,!1,function(e){o("+m+9")},"data-v-fb8898c4",null).exports,It={name:"YamlConfig",data:function(){return{title:"Generate configuration code",path:"yaml-config",helpInfo:"\n      <p>Converts a yaml configuration to a go struct and includes code to read the yaml configuration.</p>\n      <br />\n      <p>Move the folder <b>internal</b> to your project code folder, if the configuration code already exists, replace it.</p>\n      ",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,fileList:[],ruleForm:{yamlFile:""},rules:{yamlFile:[{required:!0,message:"please select a yaml file",trigger:"change"}]}}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){0==t.data.code&&(e.ruleForm.yamlFile="")}).catch(function(e){})},components:{DownloadCode:Ue},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=appConfig.spongeServiceAddr+"/generate",r="config --yaml-file="+e.data.data;t.$refs.downloadCode.execution(o,t.path,r,t.helpInfo)}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to download code")})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.yamlFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("yamlFile")},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.yamlFile="",this.$refs.ruleForm.validateField("yamlFile"))},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Mt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",{staticStyle:{color:"#484848"}},[e._v(e._s(e.title))])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"30%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"yaml file",prop:"yamlFile"}},[o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",accept:".yaml,.yml",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("Click to select a yaml file")]),o("br"),e._v("\n              or drag and drop the file here\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}})],1)],1)])],1)},staticRenderFns:[]};var Wt=o("VU/8")(It,Mt,!1,function(e){o("XOSJ")},"data-v-677d71dc",null).exports,Lt={name:"PerformanceTest",data:function(){return{title:"Pressure test parameter configuration",path:"performanceTest",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,btnRunPerftestShowDisabled:!1,btnRunPerftestLoading:!1,btnStopPerftestShowDisabled:!0,btnStopPerftestLoading:!1,responseContent:"",showResultDialogVisible:!1,isShowResultBtn:!1,customChecked:!1,prometheusChecked:!1,ruleForm:{protocol:"HTTP",url:"",method:"GET",body:"",headers:"",concurrency:"",testType:"",duration:"",totalRequests:"",pushType:"",pushUrl:"",prometheusUrl:"",jobName:""},rules:{protocol:[{required:!0,message:"please select protocol",trigger:"blur"}],url:[{required:!0,message:"please enter URL",trigger:"blur"},{pattern:/^(http|https):\/\/.+/,message:"please enter a valid URL address",trigger:"blur"}],pushUrl:[{required:!0,pattern:/^(http|https):\/\/.+/,message:"please enter a valid URL address",trigger:"blur"}],prometheusUrl:[{required:!0,pattern:/^(http|https):\/\/.+/,message:"please enter a valid URL address",trigger:"blur"}],jobName:[{required:!0,message:"please enter job name",trigger:"blur"}]},protocolOptions:["HTTP","HTTP/2","HTTP/3"],methodOptions:["GET","POST","PUT","DELETE","PATCH"]}},created:function(){var e=this;this.adaptiveWindows(),this.responseContent=localStorage.getItem("PerformanceTestReport"),null!==this.responseContent&&this.responseContent.length>0&&(this.isShowResultBtn=!0);var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.protocol=o.data.protocol,e.ruleForm.url=o.data.url,e.ruleForm.method=o.data.method,e.ruleForm.body=o.data.body,e.ruleForm.testType=o.data.testType,e.ruleForm.pushType=o.data.pushType,e.ruleForm.pushUrl=o.data.pushUrl,e.ruleForm.prometheusUrl=o.data.prometheusUrl,e.ruleForm.jobName=o.data.jobName),""===e.ruleForm.protocol?e.ruleForm.protocol="HTTP":e.ruleForm.protocol=e.toUpperProtocol(e.ruleForm.protocol),""===e.ruleForm.method&&(e.ruleForm.method="GET"),null!==o.data.headers&&o.data.headers.length>0&&(e.ruleForm.headers=o.data.headers.join("\n")),o.data.worker>0&&(e.ruleForm.concurrency=o.data.worker),o.data.totalRequests>0&&(e.ruleForm.totalRequests=o.data.totalRequests),""!==o.data.duration&&(e.ruleForm.duration=o.data.duration),"custom"===o.data.pushType?e.customChecked=!0:"prometheus"===o.data.pushType&&(e.prometheusChecked=!0)}).catch(function(e){})},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.setRunPerftestBtnStatus(!1,!0),t.setStopPerftestBtnStatus(!1,!1);var o=appConfig.spongeServiceAddr+"/performanceTest",r="perftest "+t.toLowerProtocol(t.ruleForm.protocol)+" --url="+t.ruleForm.url;if(""===t.ruleForm.method&&(t.ruleForm.method="GET"),r+=" --method="+t.ruleForm.method,t.ruleForm.headers){var l=t.parseHeadersList(),i=!0,s=!1,a=void 0;try{for(var n,c=ge()(l);!(i=(n=c.next()).done);i=!0){var d=n.value;r+=" --header="+d.key+":"+d.value}}catch(e){s=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(s)throw a}}}if("GET"!==t.ruleForm.method&&""!==t.ruleForm.body)if(r.toLowerCase().includes("application/json"))try{var u=JSON.parse(t.ruleForm.body);r+=" --body="+fe()(u).replace(/\n/g,"\\n").replace(/ /g,"%20")}catch(e){return t.$message.error("JSON parse failed: "+e.message),t.resetBtnStatus(),!1}else r+=" --body="+t.ruleForm.body;if(""!==t.ruleForm.concurrency&&(r+=" --worker="+t.ruleForm.concurrency),"duration"===t.ruleForm.testType?""!==t.ruleForm.duration?r+=" --duration="+t.ruleForm.duration+"s":r+=" --duration=10s":"requests"===t.ruleForm.testType&&""!==t.ruleForm.totalRequests&&(r+=" --total="+t.ruleForm.totalRequests),t.customChecked)""!==t.ruleForm.pushUrl&&(r+=" --push-url="+t.ruleForm.pushUrl);else if(t.prometheusChecked){if(""===t.ruleForm.prometheusUrl||""===t.ruleForm.jobName)return t.$message.error("please enter prometheus URL and job name"),t.resetBtnStatus(),!1;r+=" --push-url="+t.ruleForm.prometheusUrl+" --prometheus-job-name="+t.ruleForm.jobName}var p={path:t.path,arg:r};m.a.post(o,p).then(function(e){t.resetBtnStatus(),0==e.data.code?(t.responseContent=e.data.data,localStorage.setItem("PerformanceTestReport",t.responseContent),t.showResultDialogVisible=!0,t.isShowResultBtn=!0):t.$message.error(e.data.msg)}).catch(function(e){t.resetBtnStatus(!1),t.$message.error(e.response.data.msg)})})},stopPerformanceTest:function(){var e=this,t=appConfig.spongeServiceAddr+"/performanceTest/stop",o="perftest "+this.toLowerProtocol(this.ruleForm.protocol)+" --url="+this.ruleForm.url;""===this.ruleForm.method&&(this.ruleForm.method="GET"),o+=" --method="+this.ruleForm.method,this.setRunPerftestBtnStatus(!0,!1),this.setStopPerftestBtnStatus(!0,!0);var r={path:this.path,arg:o};m.a.post(t,r).then(function(t){e.resetBtnStatus(),0==t.data.code||e.$message.error(t.data.msg)}).catch(function(t){e.resetBtnStatus(),e.$message.error(t.response.data.msg)})},clearFormData:function(){this.customChecked=!1,this.prometheusChecked=!1,this.ruleForm={},this.ruleForm.protocol="HTTP",this.ruleForm.method="GET"},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){this.value=e,this.$forceUpdate()},selectChangeLLMType:function(e){this.value=e,this.llmModelOptions=this.allLLMOptions[e]||[],this.llmModelOptions.length>0&&(this.ruleForm.llmModel=this.llmModelOptions[0].value),this.$forceUpdate()},resetIfZero:function(e){0===this.ruleForm[e]&&(this.ruleForm[e]="")},resetPushTypeChange:function(){this.$refs.ruleForm.clearValidate("pushUrl"),this.$refs.ruleForm.clearValidate("prometheusUrl"),this.$refs.ruleForm.clearValidate("jobName")},handlePushTypeChange:function(e,t){this.resetPushTypeChange(),"custom"===e?(this.customChecked=t,t?(this.prometheusChecked=!1,this.ruleForm.pushType="custom"):this.ruleForm.pushType=""):"prometheus"===e&&(this.prometheusChecked=t,t?(this.customChecked=!1,this.ruleForm.pushType="prometheus"):this.ruleForm.pushType="")},parseHeadersList:function(){var e=[];if(!this.ruleForm.headers)return e;var t=this.ruleForm.headers.split("\n"),o=!0,r=!1,l=void 0;try{for(var i,s=ge()(t);!(o=(i=s.next()).done);o=!0){var a=i.value;if(a=a.trim()){var n=a.split(":"),c=ve()(n),d=c[0],m=c.slice(1);d&&m.length>0&&e.push({key:d.trim(),value:m.join(":").trim()})}}}catch(e){r=!0,l=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw l}}return e},toLowerProtocol:function(e){return{HTTP:"http","HTTP/2":"http2","HTTP/3":"http3"}[e]||e},toUpperProtocol:function(e){return{http:"HTTP",http2:"HTTP/2",http3:"HTTP/3"}[e]||e},setRunPerftestBtnStatus:function(e,t){this.btnRunPerftestShowDisabled=e,this.btnRunPerftestLoading=t},setStopPerftestBtnStatus:function(e,t){this.btnStopPerftestShowDisabled=e,this.btnStopPerftestLoading=t},resetBtnStatus:function(){this.setRunPerftestBtnStatus(!1,!1),this.setStopPerftestBtnStatus(!0,!1)},showResult:function(){this.showResultDialogVisible=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},jt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[e._v("Perform Benchmark Tests and Generate Evaluation Reports")])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"protocol",prop:"protocol"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select protocol",filterable:""},model:{value:e.ruleForm.protocol,callback:function(t){e.$set(e.ruleForm,"protocol",t)},expression:"ruleForm.protocol"}},e._l(e.protocolOptions,function(e,t){return o("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"URL",prop:"url"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"example: http://localhost:8080/user/1"},model:{value:e.ruleForm.url,callback:function(t){e.$set(e.ruleForm,"url","string"==typeof t?t.trim():t)},expression:"ruleForm.url"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"request method",prop:"method"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select method",filterable:""},model:{value:e.ruleForm.method,callback:function(t){e.$set(e.ruleForm,"method",t)},expression:"ruleForm.method"}},e._l(e.methodOptions,function(e,t){return o("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),e._v(" "),"GET"!==e.ruleForm.method?o("el-form-item",{attrs:{label:"request body",prop:"body"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{type:"textarea",placeholder:"please enter request body, support json, form-data, text",autosize:{minRows:3,maxRows:10}},model:{value:e.ruleForm.body,callback:function(t){e.$set(e.ruleForm,"body",t)},expression:"ruleForm.body"}})],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"request headers",prop:"headers"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{type:"textarea",placeholder:"Key : Value, multiple request headers separated by newline",autosize:{minRows:1,maxRows:5}},model:{value:e.ruleForm.headers,callback:function(t){e.$set(e.ruleForm,"headers",t)},expression:"ruleForm.headers"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"concurrency",prop:"concurrency"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"default value CPU cores * 3",type:"number",min:"0"},on:{blur:function(t){return e.resetIfZero("concurrency")}},model:{value:e.ruleForm.concurrency,callback:function(t){e.$set(e.ruleForm,"concurrency",e._n(t))},expression:"ruleForm.concurrency"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"execution strategy",prop:"testType"}},[o("el-radio-group",{model:{value:e.ruleForm.testType,callback:function(t){e.$set(e.ruleForm,"testType",t)},expression:"ruleForm.testType"}},[o("el-radio",{attrs:{label:"requests"}},[e._v("request quantity")]),e._v(" "),o("el-radio",{attrs:{label:"duration"}},[e._v("duration")])],1)],1),e._v(" "),"duration"===e.ruleForm.testType?o("el-form-item",{attrs:{label:"duration(s)",prop:"duration"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"default value is 10",type:"number",min:"0"},on:{blur:function(t){return e.resetIfZero("duration")}},model:{value:e.ruleForm.duration,callback:function(t){e.$set(e.ruleForm,"duration",e._n(t))},expression:"ruleForm.duration"}})],1):e._e(),e._v(" "),"requests"===e.ruleForm.testType?o("el-form-item",{attrs:{label:"request quantity",prop:"totalRequests"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"default value is 5000",type:"number",min:"0"},on:{blur:function(t){return e.resetIfZero("totalRequests")}},model:{value:e.ruleForm.totalRequests,callback:function(t){e.$set(e.ruleForm,"totalRequests",e._n(t))},expression:"ruleForm.totalRequests"}})],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"push target",prop:"pushType"}},[o("el-checkbox",{on:{change:function(t){return e.handlePushTypeChange("prometheus",t)}},model:{value:e.prometheusChecked,callback:function(t){e.prometheusChecked=t},expression:"prometheusChecked"}},[e._v("prometheus")]),e._v(" "),o("el-checkbox",{on:{change:function(t){return e.handlePushTypeChange("custom",t)}},model:{value:e.customChecked,callback:function(t){e.customChecked=t},expression:"customChecked"}},[e._v("customization")])],1),e._v(" "),"custom"===e.ruleForm.pushType?o("el-form-item",{attrs:{label:"URL",prop:"pushUrl"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"example: http://localhost:7070/report"},model:{value:e.ruleForm.pushUrl,callback:function(t){e.$set(e.ruleForm,"pushUrl","string"==typeof t?t.trim():t)},expression:"ruleForm.pushUrl"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n                Request method: "),o("b",[e._v("POST")]),o("br"),e._v("\n                Request body content in JSON format, exampleï¼š\n                "),o("pre",[e._v('{\n  "perf_test_id": 1756889770355402807,\n  "url": "http://localhost:8080/post",\n  "method": "POST",\n  "body": "{\\"name\\":\\"Alice\\",\\"age\\":25}",\n  "total_requests": 500000,\n  "total_duration": 4.5,\n  "success_count": 500000,\n  "error_count": 0,\n  "errors": [""],\n  "qps": 111285.6,\n  "avg_latency": 0.44,\n  "p25_latency": 0,\n  "p50_latency": 0.51,\n  "p95_latency": 1.23,\n  "min_latency": 0,\n  "max_latency": 26.94,\n  "total_sent": 12500000,\n  "total_received": 24500000,\n  "status_codes": {\n    "200": 500000\n  },\n  "created_at": "2025-08-08T18:56:11.86+08:00"\n}\n\nTip: The unit of total_duration is seconds, and\n     the unit of xxx_latency is milliseconds.\n')])])])],1):e._e(),e._v(" "),"prometheus"===e.ruleForm.pushType?o("el-form-item",{attrs:{label:"address",prop:"prometheusUrl"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"prometheus address example: http://localhost:9090"},model:{value:e.ruleForm.prometheusUrl,callback:function(t){e.$set(e.ruleForm,"prometheusUrl","string"==typeof t?t.trim():t)},expression:"ruleForm.prometheusUrl"}})],1):e._e(),e._v(" "),"prometheus"===e.ruleForm.pushType?o("el-form-item",{attrs:{label:"job name",prop:"jobName"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please enter job name"},model:{value:e.ruleForm.jobName,callback:function(t){e.$set(e.ruleForm,"jobName","string"==typeof t?t.trim():t)},expression:"ruleForm.jobName"}})],1):e._e()],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.btnRunPerftestShowDisabled,loading:e.btnRunPerftestLoading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Run")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.btnStopPerftestShowDisabled,loading:e.btnStopPerftestLoading},on:{click:e.stopPerformanceTest}},[e._v("Stop")]),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowResultBtn,expression:"isShowResultBtn"}],attrs:{size:"default"},on:{click:e.showResult}},[e._v("View Report")])],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"Performance Test Report",visible:e.showResultDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showResultDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.responseContent,callback:function(t){e.responseContent=t},expression:"responseContent"}})],1)],1)],1)},staticRenderFns:[]};var Et=o("VU/8")(Lt,jt,!1,function(e){o("DX42")},"data-v-45fd2211",null).exports,Ut={name:"CustomTplField",data:function(){return{title:"",path:"custom-tpl-field",helpInfo:'\n      <p>Generate code based on json and custom templates, for more development details, please refer to the <a href="https://go-sponge.com/guide/customize/template-json.html" target="_blank">Development Guide</a>.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,isShowingInfo:!1,fileList:[],ruleForm:{templateDir:"",jsonFile:""},rules:{templateDir:[{required:!0,message:"please enter the absolute path of the directory where the template code is located",trigger:"blur"}],jsonFile:[{required:!0,message:"please select json file",trigger:"change"}]},showTplInfoDialogVisible:!1,tplContent:""}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(""!==o.data.fields&&(e.ruleForm.jsonFile=o.data.fields,e.fileList.push({name:o.data.fields.split("/").pop(),raw:o.data.fields,status:"fromRecord"})),e.ruleForm.templateDir=o.data.templateDir)}).catch(function(e){})},components:{DownloadCode:Ue,ShowRepoDir:Ge},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(1!==t.fileList.length||"fromRecord"!==t.fileList[0].status){var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){0==e.data.code?t.downloadZipCode(e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("download code failed")})}else t.downloadZipCode(t.fileList[0].raw)})},showTemplateInfo:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(1!==t.fileList.length||"fromRecord"!==t.fileList[0].status){var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){0==e.data.code?t.getTemplateInfo(e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to obtain template information")})}else t.getTemplateInfo(t.fileList[0].raw)})},downloadZipCode:function(e){var t=appConfig.spongeServiceAddr+"/generate",o="template field --tpl-dir="+this.ruleForm.templateDir+" --fields="+e;this.$refs.downloadCode.execution(t,this.path,o,this.helpInfo)},getTemplateInfo:function(e){var t=this;this.updateIsShowingInfo(!0);var o=appConfig.spongeServiceAddr+"/getTemplateInfo",r="template field --tpl-dir="+this.ruleForm.templateDir+" --fields="+e+" --only-print=true",l={path:this.path,arg:r};m.a.post(o,l).then(function(e){t.updateIsShowingInfo(!1),0==e.data.code?(t.tplContent=e.data.data,t.showTplInfoDialogVisible=!0):t.$message.error(e.data.msg)}).catch(function(e){t.updateIsShowingInfo(!1),t.$message.error(e.response.data.msg)})},updateIsDownloading:function(e){this.isDownloading=e},updateIsShowingInfo:function(e){this.isShowingInfo=e},clearFormData:function(){this.fileList=[],this.ruleForm={}},handleOnchange:function(e,t){this.ruleForm.jsonFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("jsonFile"),t.length>1&&(this.fileList=t.slice(-1))},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.jsonFile="",this.$refs.ruleForm.validateField("jsonFile"))},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Bt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#F25126"},attrs:{href:"https://go-sponge.com/guide/customize/template-json.html",target:"_blank"}},[e._v("\n          Generate code based on json and custom templates\n        ")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"template dir",prop:"templateDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.templateDir,callback:function(t){e.$set(e.ruleForm,"templateDir","string"==typeof t?t.trim():t)},expression:"ruleForm.templateDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The absolute path to the directory where the custom"),o("br"),e._v("\n              template code is located. "),o("br"),e._v("\n              Windows environment example: D:\\tmp\\template-dir"),o("br"),e._v("\n              Linux environment example: /tmp/template-dir\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"fields",prop:"jsonFile"}},[o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",accept:".json",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("Select json file")]),e._v(", only one file is allowed.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{"margin-bottom":"50px"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{size:"default",disabled:e.isShowingInfo,loading:e.isShowingInfo},on:{click:function(t){return e.showTemplateInfo("ruleForm")}}},[e._v("Show info")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"Template Information",visible:e.showTplInfoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showTplInfoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.tplContent,callback:function(t){e.tplContent=t},expression:"tplContent"}})],1)],1)],1)},staticRenderFns:[]};var Gt=o("VU/8")(Ut,Bt,!1,function(e){o("wvnU")},"data-v-f1de9012",null).exports,Vt={name:"WebModel",data:function(){return{title:"",path:"custom-tpl-sql",helpInfo:'\n      <p>Generate code based on sql, json and custom templates, for more development details, please refer to the <a href="https://go-sponge.com/guide/customize/template-sql.html" target="_blank">Development Guide</a>.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,isShowingInfo:!1,fileList:[],ruleForm:{dsnAddr:"",tableName:[],dbDriver:"",templateDir:"",jsonFile:""},rules:{dsnAddr:[{required:!0,message:"please type the database dsn address",trigger:"blur"}],tableName:[{required:!0,message:"please select a table name",trigger:"change"}],dbDriver:[{required:!0,message:"please select a database type",trigger:"blur"}],templateDir:[{required:!0,message:"please enter the absolute path of the directory where the template code is located",trigger:"blur"}]},showTplInfoDialogVisible:!1,tplContent:"",tplFileNameExample:"{{.TableName}}.go.tmpl",tableNames:[],isSelectedAllTable:!1,dbDriverNames:[{label:"mysql",value:"mysql"},{label:"mongodb",value:"mongodb"},{label:"postgresql",value:"postgresql"},{label:"sqlite",value:"sqlite"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listDbDrivers();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.dsnAddr=o.data.dsn,e.ruleForm.dbDriver=o.data.dbDriver,e.listTables(!1),""!==o.data.fields&&(e.ruleForm.jsonFile=o.data.fields,e.fileList.push({name:o.data.fields.split("/").pop(),raw:o.data.fields,status:"fromRecord"})),e.ruleForm.templateDir=o.data.templateDir)}).catch(function(e){})},components:{DownloadCode:Ue,ShowRepoDir:Ge},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(0!==t.fileList.length)if(1!==t.fileList.length||"fromRecord"!==t.fileList[0].status){var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){0==e.data.code?t.downloadZipCode(e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("download code failed")})}else t.downloadZipCode(t.fileList[0].raw);else t.downloadZipCode("")})},showTemplateInfo:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(0!==t.fileList.length)if(1!==t.fileList.length||"fromRecord"!==t.fileList[0].status){var o=new FormData;t.fileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){0==e.data.code?t.getTemplateInfo(e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("failed to obtain template information")})}else t.getTemplateInfo(t.fileList[0].raw);else t.getTemplateInfo("")})},downloadZipCode:function(e){var t=appConfig.spongeServiceAddr+"/generate",o=this.ruleForm.tableName.join(","),r="template sql --db-driver="+this.ruleForm.dbDriver+" --db-dsn="+this.ruleForm.dsnAddr+" --db-table="+o+" --tpl-dir="+this.ruleForm.templateDir+" --fields="+e;this.$refs.downloadCode.execution(t,this.path,r,this.helpInfo)},getTemplateInfo:function(e){var t=this;this.updateIsShowingInfo(!0);var o=appConfig.spongeServiceAddr+"/getTemplateInfo",r=this.ruleForm.tableName.join(","),l="template sql --db-driver="+this.ruleForm.dbDriver+" --db-dsn="+this.ruleForm.dsnAddr+" --db-table="+r+" --tpl-dir="+this.ruleForm.templateDir+" --fields="+e+" --only-print=true",i={path:this.path,arg:l};m.a.post(o,i).then(function(e){t.updateIsShowingInfo(!1),0==e.data.code?(t.tplContent=e.data.data,t.showTplInfoDialogVisible=!0):t.$message.error(e.data.msg)}).catch(function(e){t.updateIsShowingInfo(!1),t.$message.error(e.response.data.msg)})},updateIsDownloading:function(e){this.isDownloading=e},updateIsShowingInfo:function(e){this.isShowingInfo=e},clearFormData:function(){this.tableNames=[],this.fileList=[],this.ruleForm={tableName:[]}},handleOnchange:function(e,t){this.ruleForm.jsonFile=e.name,this.fileList=t,0!==t.length&&this.$refs.ruleForm.validateField("jsonFile"),t.length>1&&(this.fileList=t.slice(-1))},handleOnRemove:function(e,t){this.fileList=t,0===t.length&&(this.ruleForm.jsonFile="",this.$refs.ruleForm.validateField("jsonFile"))},listTables:function(e){var t=this;if(""!=this.ruleForm.dsnAddr){var o=appConfig.spongeServiceAddr+"/listTables",r={dsn:this.ruleForm.dsnAddr,dbDriver:this.ruleForm.dbDriver};m.a.post(o,r,{timeout:3e3}).then(function(o){var r=o.data;e&&(0==r.code?t.$message.success("Get table name success"):t.$message.error("Failed to get table name, "+r.msg)),t.tableNames=r.data}).catch(function(o){e&&t.$message.error("Failed to get table name, please check if "+t.ruleForm.dbDriver+"  dsn address is correct or "+t.ruleForm.dbDriver+" service is running.")})}},listDbDrivers:function(){var e=this,t=appConfig.spongeServiceAddr+"/listDrivers";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.dbDriverNames=o.data)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(other)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){e.length===this.tableNames.length?this.isSelectedAllTable=!0:this.isSelectedAllTable=!1,this.value=e,this.$forceUpdate()},selectAllTables:function(e){var t=this;this.ruleForm.tableName=[],e&&this.tableNames.forEach(function(e){t.ruleForm.tableName.push(e.value)})},selectChangeDB:function(e){this.value=e,this.$forceUpdate()},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Ht={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#00BFFF"},attrs:{href:"https://go-sponge.com/guide/customize/template-sql.html",target:"_blank"}},[e._v("Generate code based on sql and custom template")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"database type",prop:"dbDriver"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select database type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeDB},model:{value:e.ruleForm.dbDriver,callback:function(t){e.$set(e.ruleForm,"dbDriver",t)},expression:"ruleForm.dbDriver"}},e._l(e.dbDriverNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"database dsn",prop:"dsnAddr"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"user:password@(127.0.0.1:3306)/db_name"},model:{value:e.ruleForm.dsnAddr,callback:function(t){e.$set(e.ruleForm,"dsnAddr","string"==typeof t?t.trim():t)},expression:"ruleForm.dsnAddr"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the database is "),o("b",[e._v("mysql")]),e._v("ã€"),o("b",[e._v("mongodb")]),e._v(",\n              "),o("b",[e._v("postgresql")]),e._v(" fill in the dsn address."),o("br"),e._v("\n              dsn format: "),o("b",[e._v("user:password@(host:port)/db_name")]),o("br"),e._v("\n              Note: user and password cannot contain special characters\n              "),o("b",[e._v("@")]),e._v(" "),o("b",[e._v(":")]),e._v(" "),o("b",[e._v("(")]),e._v(" "),o("b",[e._v(")")]),e._v(" "),o("br"),o("br"),e._v("\n              The dsn of mongodb supports SRV records, with the format:"),o("br"),e._v(" "),o("b",[e._v("mongodb+srv://user:password@(host:port)/db_name")]),o("br"),o("br"),e._v("\n              The dsn of postgresql supports the specified schema, example of\n              adding"),o("br"),e._v("\n              parameters after dsn\n              "),o("b",[e._v("?search_path=schema1&search_path=schema2")]),o("br"),o("br"),e._v("\n              If the database is "),o("b",[e._v("sqlite")]),e._v(", fill in the local absolute\n              path of the sqlite db file."),o("br"),e._v("\n              Example: "),o("b",[e._v("/tmp/test.db")]),e._v(" or "),o("b",[e._v("C:\\Users\\Desktop\\test.db")])])]),e._v(" "),o("el-link",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"primary"},on:{click:function(t){return e.listTables(!0)}}},[e._v("get tables")])],1),e._v(" "),o("el-form-item",{attrs:{label:"table name",prop:"tableName"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"supports multiple selection",clearable:"",filterable:"",multiple:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.tableName,callback:function(t){e.$set(e.ruleForm,"tableName",t)},expression:"ruleForm.tableName"}},[o("el-checkbox",{staticStyle:{padding:"10px 0px 15px 20px","font-weight":"bold",color:"#409EFF"},on:{change:e.selectAllTables},model:{value:e.isSelectedAllTable,callback:function(t){e.isSelectedAllTable=t},expression:"isSelectedAllTable"}},[e._v("select all")]),e._v(" "),o("el-badge",{staticStyle:{padding:"10px 18px 12px 0px",position:"absolute",right:"0"},attrs:{type:"primary"},model:{value:e.ruleForm.tableName.length,callback:function(t){e.$set(e.ruleForm.tableName,"length",t)},expression:"ruleForm.tableName.length"}}),e._v(" "),e._l(e.tableNames,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"template dir",prop:"templateDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.templateDir,callback:function(t){e.$set(e.ruleForm,"templateDir","string"==typeof t?t.trim():t)},expression:"ruleForm.templateDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The absolute path to the directory where the custom"),o("br"),e._v("\n              template code is located. "),o("br"),e._v("\n              Windows environment example: D:\\tmp\\template-dir"),o("br"),e._v("\n              Linux environment example: /tmp/template-dir"),o("br"),o("br"),e._v("\n              Note: If multiple table names are selected, all template"),o("br"),e._v("\n              file names in the directory must use the table names."),o("br"),e._v("\n              example: "),o("b",[e._v(e._s(e.tplFileNameExample))])])])],1),e._v(" "),o("el-form-item",{attrs:{label:"fields",prop:"jsonFile"}},[o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",accept:".json",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("Select json file")]),e._v(", only one file is allowed.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{"margin-bottom":"50px"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{size:"default",disabled:e.isShowingInfo,loading:e.isShowingInfo},on:{click:function(t){return e.showTemplateInfo("ruleForm")}}},[e._v("Show info")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"Template Information",visible:e.showTplInfoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showTplInfoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.tplContent,callback:function(t){e.tplContent=t},expression:"tplContent"}})],1)],1)],1)},staticRenderFns:[]};var Ot=o("VU/8")(Vt,Ht,!1,function(e){o("Ao6i")},"data-v-21b09c94",null).exports,Kt={name:"CustomTplProtobuf",data:function(){return{title:"",path:"custom-tpl-protobuf",helpInfo:'\n      <p>Generate code based on protobuf, json and custom templates, for more development details, please refer to the <a href="https://go-sponge.com/guide/customize/template-protobuf.html" target="_blank">Development Guide</a>.</p>\n      ',labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,isShowingInfo:!1,protoFileList:[],fileList:[],ruleForm:{protobufFile:"",depProtoDir:"",templateDir:"",jsonFile:""},rules:{protobufFile:[{required:!0,message:"please select a proto file",trigger:"change"}],templateDir:[{required:!0,message:"please enter the absolute path of the directory where the template code is located",trigger:"blur"}]},showTplInfoDialogVisible:!1,tplContent:"",tplFileNameExample:"{{.Proto.FileNamePrefix}}.go.tmpl"}},created:function(){var e=this;this.adaptiveWindows();var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.protobufFile="",e.ruleForm.depProtoDir=o.data.depProtoDir,e.ruleForm.templateDir=o.data.templateDir,""!==o.data.fields&&(e.ruleForm.jsonFile=o.data.fields,e.fileList.push({name:o.data.fields.split("/").pop(),raw:o.data.fields,status:"fromRecord"})))}).catch(function(e){})},components:{DownloadCode:Ue,ShowRepoDir:Ge},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.protoFileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=e.data.data;if(1===t.fileList.length)if("fromRecord"===t.fileList[0].status)t.downloadZipCode(o,t.fileList[0].raw);else{var r=new FormData;t.fileList.forEach(function(e){r.append("files",e.raw)});var l=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(l,r).then(function(e){0==e.data.code?t.downloadZipCode(o,e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("download code failed")})}else t.downloadZipCode(o,"")}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("download code failed")})})},showTemplateInfo:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=new FormData;t.protoFileList.forEach(function(e){o.append("files",e.raw)});var r=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(r,o).then(function(e){if(0==e.data.code){var o=e.data.data;if(1===t.fileList.length)if("fromRecord"===t.fileList[0].status)t.getTemplateInfo(o,t.fileList[0].raw);else{var r=new FormData;t.fileList.forEach(function(e){r.append("files",e.raw)});var l=appConfig.spongeServiceAddr+"/uploadFiles";m.a.post(l,r).then(function(e){0==e.data.code?t.getTemplateInfo(o,e.data.data):t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("download code failed")})}else t.getTemplateInfo(o,"")}else t.$message.error(e.data.msg)}).catch(function(e){t.$message.error("download code failed")})})},downloadZipCode:function(e,t){var o=appConfig.spongeServiceAddr+"/generate",r="template protobuf --protobuf-file="+e+" --dep-proto-dir="+this.ruleForm.depProtoDir+" --tpl-dir="+this.ruleForm.templateDir+" --fields="+t;this.$refs.downloadCode.execution(o,this.path,r,this.helpInfo)},getTemplateInfo:function(e,t){var o=this;this.updateIsShowingInfo(!0);var r=appConfig.spongeServiceAddr+"/getTemplateInfo",l="template protobuf --protobuf-file="+e+" --dep-proto-dir="+this.ruleForm.depProtoDir+" --tpl-dir="+this.ruleForm.templateDir+" --fields="+t+" --only-print=true",i={path:this.path,arg:l};m.a.post(r,i).then(function(e){o.updateIsShowingInfo(!1),0==e.data.code?(o.tplContent=e.data.data,o.showTplInfoDialogVisible=!0):o.$message.error(e.data.msg)}).catch(function(e){o.updateIsShowingInfo(!1),o.$message.error(e.response.data.msg)})},updateIsDownloading:function(e){this.isDownloading=e},updateIsShowingInfo:function(e){this.isShowingInfo=e},clearFormData:function(){this.protoFileList=[],this.fileList=[],this.ruleForm={}},handleProtoOnchange:function(e,t){this.ruleForm.protobufFile=e.name,this.protoFileList=t,0!==this.protoFileList.length&&this.$refs.ruleForm.validateField("protobufFile")},handleProtoOnRemove:function(e,t){this.protoFileList=t,0===this.protoFileList.length&&(this.ruleForm.protobufFile="",this.$refs.ruleForm.validateField("protobufFile"))},handleOnchange:function(e,t){this.ruleForm.jsonFile=e.name,this.fileList=t,t.length>1&&(this.fileList=t.slice(-1))},handleOnRemove:function(e,t){this.fileList=t,0===this.fileList.length&&(this.ruleForm.jsonFile="")},showMutiRepoDir:function(){this.$refs.showRepoDir.isShowMutiDialog=!0},showMonoRepoDir:function(){this.$refs.showRepoDir.isShowMonoDialog=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Zt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#32CD32"},attrs:{href:"https://go-sponge.com/guide/customize/template-protobuf.html",target:"_blank"}},[e._v("Generate code based on protobuf and custom templates")])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"template dir",prop:"templateDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.templateDir,callback:function(t){e.$set(e.ruleForm,"templateDir","string"==typeof t?t.trim():t)},expression:"ruleForm.templateDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The absolute path to the directory where the custom"),o("br"),e._v("\n              template code is located. "),o("br"),e._v("\n              Windows environment example: D:\\tmp\\template-dir"),o("br"),e._v("\n              Linux environment example: /tmp/template-dir"),o("br"),o("br"),e._v("\n              Note: If multiple proto files are selected, all template"),o("br"),e._v("\n              file names in the directory must use the proto file name."),o("br"),e._v("\n              example: "),o("b",[e._v(e._s(e.tplFileNameExample))])])])],1),e._v(" "),o("el-form-item",{attrs:{label:"proto file",prop:"protobufFile"}},[o("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"",accept:".proto",action:"#","auto-upload":!1,"on-change":e.handleProtoOnchange,"on-remove":e.handleProtoOnRemove,"file-list":e.protoFileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("Select proto file")]),e._v(", multi-file support.\n            ")])])],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-top":"50px"},attrs:{label:"dep-proto-dir",prop:"depProtoDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},model:{value:e.ruleForm.depProtoDir,callback:function(t){e.$set(e.ruleForm,"depProtoDir","string"==typeof t?t.trim():t)},expression:"ruleForm.depProtoDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The absolute path of the directory where the dependent proto"),o("br"),e._v("\n              files are located. For example, if a.proto depends on\n              b.proto,"),o("br"),e._v("\n              place the b.proto file in this directory."),o("br"),e._v("\n              Windows environment example: D:\\tmp\\dep-proto-dir"),o("br"),e._v("\n              Linux environment example: /tmp/dep-proto-dir\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"fields",prop:"jsonFile"}},[o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",accept:".json",action:"#","auto-upload":!1,"on-change":e.handleOnchange,"on-remove":e.handleOnRemove,"file-list":e.fileList}},[o("i",{staticClass:"el-icon-upload"}),e._v(" "),o("div",{staticClass:"el-upload__text"},[o("em",[e._v("Select json file")]),e._v(", only one file is allowed.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{"margin-bottom":"50px"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{size:"default",disabled:e.isShowingInfo,loading:e.isShowingInfo},on:{click:function(t){return e.showTemplateInfo("ruleForm")}}},[e._v("Show info")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isDownloading,loading:e.isDownloading},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Download code")]),e._v(" "),o("DownloadCode",{ref:"downloadCode",on:{"update-is-downloading":e.updateIsDownloading}}),e._v(" "),o("ShowRepoDir",{ref:"showRepoDir"})],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"Template Information",visible:e.showTplInfoDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showTplInfoDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.tplContent,callback:function(t){e.tplContent=t},expression:"tplContent"}})],1)],1)],1)},staticRenderFns:[]};var Jt=o("VU/8")(Kt,Zt,!1,function(e){o("g8oR")},"data-v-38a3de12",null).exports,Xt={name:"AssistantGenerate",data:function(){return{title:"AI Assistant Automatically Generates Business Logic Code by Understanding Project Context",path:"assistant-generate",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isDownloading:!1,showPassword:!1,isShowingInfo:!1,responseContent:"",showResultDialogVisible:!1,isShowResultBtn:!1,ruleForm:{llmType:"",llmModel:"",apiKey:"",targetType:"goDir",goDir:"",goFile:""},rules:{llmType:[{required:!0,message:"please select AI assistant type",trigger:"blur"}],llmModel:[{required:!0,message:"please select or input model name",trigger:"blur"}],apiKey:[{required:!0,message:"please enter API Key",trigger:"blur"}],goDir:[{required:!0,message:"please enter Go project path",trigger:"blur"}],goFile:[{required:!0,message:"please enter Go file path",trigger:"blur"}]},llmTypeOptions:[{label:"deepseek",value:"deepseek"},{label:"chatgpt",value:"chatgpt"},{label:"gemini",value:"gemini"}],llmModelOptions:[],allLLMOptions:{deepseek:[{label:"deepseek-chat",value:"deepseek-chat"},{label:"deepseek-reasoner",value:"deepseek-reasoner"}],chatgpt:[{label:"gpt-5",value:"gpt-5"},{label:"gpt-5-thinking",value:"gpt-5-thinking"},{label:"gpt-4.1",value:"gpt-4.1"},{label:"gpt-4.1-mini",value:"gpt-4.1-mini"},{label:"gpt-4o",value:"gpt-4o"},{label:"gpt-4o-mini",value:"gpt-4o-mini"}],gemini:[{label:"gemini-2.5-flash",value:"gemini-2.5-flash"},{label:"gemini-2.5-pro",value:"gemini-2.5-pro"},{label:"gemini-2.5-flash-lite",value:"gemini-2.5-flash-lite"},{label:"gemini-2.0-flash",value:"gemini-2.0-flash"},{label:"gemini-2.0-pro",value:"gemini-2.0-pro"}]}}},created:function(){var e=this;this.adaptiveWindows(),this.listLLM(),this.responseContent=localStorage.getItem("AIAssistantGenerateCodeReport"),null!==this.responseContent&&this.responseContent.length>0&&(this.isShowResultBtn=!0);var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.llmType=o.data.llmType,e.ruleForm.llmModel=o.data.llmModel,e.ruleForm.apiKey=o.data.apiKey,e.ruleForm.goDir=o.data.goDir,e.ruleForm.goFile=o.data.goFile,""!==o.data.targetType&&(e.ruleForm.targetType=o.data.targetType),e.selectChangeLLMType(e.ruleForm.llmType))}).catch(function(e){})},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.updateIsShowingInfo(!0);var o=appConfig.spongeServiceAddr+"/assistant",r="";r="goDir"!==t.ruleForm.targetType?"assistant generate --type="+t.ruleForm.llmType+" --model="+t.ruleForm.llmModel+" --api-key="+t.ruleForm.apiKey+" --file="+t.ruleForm.goFile:"assistant generate --type="+t.ruleForm.llmType+" --model="+t.ruleForm.llmModel+" --api-key="+t.ruleForm.apiKey+" --dir="+t.ruleForm.goDir;var l={path:t.path,arg:r};m.a.post(o,l).then(function(e){t.updateIsShowingInfo(!1),0==e.data.code?(t.responseContent=e.data.data,localStorage.setItem("AIAssistantGenerateCodeReport",t.responseContent),t.showResultDialogVisible=!0,t.isShowResultBtn=!0):t.$message.error(e.data.msg)}).catch(function(e){t.updateIsShowingInfo(!1),t.$message.error(e.response.data.msg)})})},updateIsDownloading:function(e){this.isDownloading=e},clearFormData:function(){this.ruleForm.llmType="chatgpt",this.ruleForm.targetType="goDir",this.ruleForm.goDir="",this.ruleForm.goFile="",this.ruleForm.apiKey="",this.selectChangeLLMType(this.ruleForm.llmType)},listLLM:function(){var e=this,t=appConfig.spongeServiceAddr+"/listLLM";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.llmTypeOptions=o.data.llmTypeOptions,e.allLLMOptions=o.data.allLLMOptions)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){this.value=e,this.$forceUpdate()},selectChangeLLMType:function(e){this.value=e,this.llmModelOptions=this.allLLMOptions[e]||[],this.llmModelOptions.length>0&&(this.ruleForm.llmModel=this.llmModelOptions[0].value),this.$forceUpdate()},handleTargetTypeChange:function(e){"goDir"===e?(this.$refs.ruleForm.clearValidate("goFile"),this.$refs.ruleForm.clearValidate("goDir")):"goFile"===e&&(this.$refs.ruleForm.clearValidate("goDir"),this.$refs.ruleForm.clearValidate("goFile"))},togglePassword:function(){this.showPassword=!this.showPassword},updateIsShowingInfo:function(e){this.isShowingInfo=e},showResult:function(){this.showResultDialogVisible=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},Qt={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#00AEB1"},attrs:{href:"https://go-sponge.com/guide/ai/assistant.html#usage-example",target:"_blank"}},[e._v(e._s(e.title))])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"AI Assistant Type",prop:"llmType"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select AI assistant type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeLLMType},model:{value:e.ruleForm.llmType,callback:function(t){e.$set(e.ruleForm,"llmType",t)},expression:"ruleForm.llmType"}},e._l(e.llmTypeOptions,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"Model Name",prop:"llmModel"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select or input model name",filterable:"","allow-create":"",clearable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChange},model:{value:e.ruleForm.llmModel,callback:function(t){e.$set(e.ruleForm,"llmModel",t)},expression:"ruleForm.llmModel"}},e._l(e.llmModelOptions,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              supported manual input or select existing model name.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"API Key",prop:"apiKey"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{type:e.showPassword?"text":"password",placeholder:"please enter API Key from AI service provider"},scopedSlots:e._u([{key:"append",fn:function(){return[o("el-button",{attrs:{icon:(e.showPassword,"el-icon-view")},on:{click:e.togglePassword}})]},proxy:!0}]),model:{value:e.ruleForm.apiKey,callback:function(t){e.$set(e.ruleForm,"apiKey","string"==typeof t?t.trim():t)},expression:"ruleForm.apiKey"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Fill in the API Key of the AI assistant"),o("br"),e._v("\n              to call the corresponding service.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"Code Range",prop:"targetType"}},[o("el-radio-group",{on:{change:e.handleTargetTypeChange},model:{value:e.ruleForm.targetType,callback:function(t){e.$set(e.ruleForm,"targetType",t)},expression:"ruleForm.targetType"}},[o("el-radio",{attrs:{label:"goDir"}},[e._v("Go Project")]),e._v(" "),o("el-radio",{attrs:{label:"goFile"}},[e._v("Go File")])],1)],1),e._v(" "),"goDir"===e.ruleForm.targetType?o("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"Go Project",prop:"goDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please enter the absolute path of the local Go project code"},model:{value:e.ruleForm.goDir,callback:function(t){e.$set(e.ruleForm,"goDir","string"==typeof t?t.trim():t)},expression:"ruleForm.goDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the project is created by sponge, the AI assistant will"),o("br"),e._v("\n              automatically generate the corresponding code based on"),o("br"),e._v("\n              the project structure and context."),o("br"),e._v("\n              Windows example: D:\\project\\dir\\internal\\service"),o("br"),e._v("\n              Linux example: /project/dir/internal/service"),o("br")])])],1):e._e(),e._v(" "),"goFile"===e.ruleForm.targetType?o("el-form-item",{attrs:{label:"Go File",prop:"goFile"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please enter the absolute path of the local Go file"},model:{value:e.ruleForm.goFile,callback:function(t){e.$set(e.ruleForm,"goFile","string"==typeof t?t.trim():t)},expression:"ruleForm.goFile"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              If the file is a Go file in a sponge project, and the file is\n              located"),o("br"),e._v("\n              in the "),o("b",[e._v("handler")]),e._v(", "),o("b",[e._v("service")]),e._v(", and other directories,\n              the AI assistant will"),o("br"),e._v("\n              automatically generate the corresponding code based on the"),o("br"),e._v("\n              project structure and context."),o("br"),e._v("\n              Windows example: D:\\project\\dir\\internal\\service\\file.go"),o("br"),e._v("\n              Linux example: /project/dir/internal/service/file.go"),o("br")])])],1):e._e()],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isShowingInfo,loading:e.isShowingInfo},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Generate Code")]),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowResultBtn,expression:"isShowResultBtn"}],attrs:{size:"default"},on:{click:e.showResult}},[e._v("View Results")])],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"Execution Result",visible:e.showResultDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showResultDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.responseContent,callback:function(t){e.responseContent=t},expression:"responseContent"}})],1)],1)],1)},staticRenderFns:[]};var Yt=o("VU/8")(Xt,Qt,!1,function(e){o("N3/h")},"data-v-7d57ca68",null).exports,eo={name:"AssistantMerge",data:function(){return{title:"Merge code generated by AI assistant into corresponding Go code file",path:"assistant-merge",labelPosition:"right",windowWidth:document.documentElement.clientWidth,spanSize:16,offsetSize:4,isShowingInfo:!1,responseContent:"",showResultDialogVisible:!1,isShowResultBtn:!1,ruleForm:{llmType:"",targetType:"goDir",goDir:"",goFile:"",isClean:!1},rules:{llmType:[{required:!0,message:"please select the AI assistant type",trigger:"blur"}],goDir:[{required:!0,message:"please enter the Go project path",trigger:"blur"}],goFile:[{required:!0,message:"please enter the Go file path",trigger:"blur"}]},llmTypeOptions:[{label:"deepseek",value:"deepseek"},{label:"chatgpt",value:"chatgpt"},{label:"gemini",value:"gemini"}]}},created:function(){var e=this;this.adaptiveWindows(),this.listLLM(),this.responseContent=localStorage.getItem("AIAssistantMergeCodeReport"),null!==this.responseContent&&this.responseContent.length>0&&(this.isShowResultBtn=!0);var t=appConfig.spongeServiceAddr+"/record/"+this.path;m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.ruleForm.llmType=o.data.llmType,e.ruleForm.goDir=o.data.goDir,e.ruleForm.goFile=o.data.goFile,e.ruleForm.targetType=o.data.targetType,e.ruleForm.isClean=o.data.isCleanAICode)}).catch(function(e){}),""===this.ruleForm.targetType&&(this.ruleForm.targetType="goDir")},mounted:function(){var e=this;window.onresize=function(){e.$nextTick(function(){e.adaptiveWindows()})}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.updateIsShowingInfo(!0);var o=appConfig.spongeServiceAddr+"/assistant",r="";r="goDir"!==t.ruleForm.targetType?"assistant merge --type="+t.ruleForm.llmType+" --file="+t.ruleForm.goFile+" --is-clean="+t.ruleForm.isClean:"assistant merge --type="+t.ruleForm.llmType+" --dir="+t.ruleForm.goDir+" --is-clean="+t.ruleForm.isClean;var l={path:t.path,arg:r};m.a.post(o,l).then(function(e){t.updateIsShowingInfo(!1),0==e.data.code?(t.responseContent=e.data.data,localStorage.setItem("AIAssistantMergeCodeReport",t.responseContent),t.showResultDialogVisible=!0,t.isShowResultBtn=!0):t.$message.error(e.data.msg)}).catch(function(e){t.updateIsShowingInfo(!1),t.$message.error(e.response.data.msg)})})},clearFormData:function(){this.ruleForm={},this.ruleForm.targetType="goDir",this.ruleForm.isClean=!1},listLLM:function(){var e=this,t=appConfig.spongeServiceAddr+"/listLLM";m.a.get(t).then(function(t){var o=t.data;0==o.code&&(e.llmTypeOptions=o.data.llmTypeOptions,e.allLLMOptions=o.data.allLLMOptions)}).catch(function(e){})},selectBlur:function(e){""!==e.target.value&&(this.value=e.target.value+"(å…¶ä»–)",this.$forceUpdate())},selectClear:function(){this.value="",this.$forceUpdate()},selectChange:function(e){this.value=e,this.$forceUpdate()},selectChangeLLMType:function(e){this.value=e,this.$forceUpdate()},handleTargetTypeChange:function(e){"goDir"===e?(this.$refs.ruleForm.clearValidate("goFile"),this.$refs.ruleForm.clearValidate("goDir")):"goFile"===e&&(this.$refs.ruleForm.clearValidate("goDir"),this.$refs.ruleForm.clearValidate("goFile"))},updateIsShowingInfo:function(e){this.isShowingInfo=e},showResult:function(){this.showResultDialogVisible=!0},adaptiveWindows:function(){this.windowWidth=document.documentElement.clientWidth,this.windowWidth<900?(this.spanSize=24,this.offsetSize=0):this.windowWidth<=1200?(this.spanSize=18,this.offsetSize=3):(this.spanSize=16,this.offsetSize=4)}}},to={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:e.spanSize,offset:e.offsetSize}},[o("div",{staticClass:"title"},[o("h3",[o("a",{staticStyle:{color:"#4169E1"},attrs:{href:"https://go-sponge.com/guide/ai/assistant.html#merge-code",target:"_blank"}},[e._v(e._s(e.title))])])]),e._v(" "),o("div",{staticClass:"form-style"},[o("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"25%",model:e.ruleForm,rules:e.rules}},[o("el-form-item",{attrs:{label:"AI Assistant Type",prop:"llmType"}},[o("el-select",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"please select AI assistant type",filterable:""},on:{blur:e.selectBlur,clear:e.selectClear,change:e.selectChangeLLMType},model:{value:e.ruleForm.llmType,callback:function(t){e.$set(e.ruleForm,"llmType",t)},expression:"ruleForm.llmType"}},e._l(e.llmTypeOptions,function(e,t){return o("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Select the same type of AI assistant that"),o("br"),e._v("\n              was used to generate the code.\n            ")])])],1),e._v(" "),o("el-form-item",{attrs:{label:"Code Range",prop:"targetType"}},[o("el-radio-group",{on:{change:e.handleTargetTypeChange},model:{value:e.ruleForm.targetType,callback:function(t){e.$set(e.ruleForm,"targetType",t)},expression:"ruleForm.targetType"}},[o("el-radio",{attrs:{label:"goDir"}},[e._v("Go Project")]),e._v(" "),o("el-radio",{attrs:{label:"goFile"}},[e._v("Go File")])],1)],1),e._v(" "),"goDir"===e.ruleForm.targetType?o("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"Go Project",prop:"goDir"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"Enter the absolute path of the local Go project"},model:{value:e.ruleForm.goDir,callback:function(t){e.$set(e.ruleForm,"goDir","string"==typeof t?t.trim():t)},expression:"ruleForm.goDir"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              The Go project path is the same as the"),o("br"),e._v("\n              code generated by the AI assistant."),o("br"),e._v("\n              Windows example: D:\\project\\dir\\internal\\service"),o("br"),e._v("\n              Linux example: /project/dir/internal/service"),o("br")])])],1):e._e(),e._v(" "),"goFile"===e.ruleForm.targetType?o("el-form-item",{attrs:{label:"Go File",prop:"goFile"}},[o("el-input",{staticStyle:{width:"80%","font-size":"medium"},attrs:{placeholder:"Enter the absolute path of the local Go file"},model:{value:e.ruleForm.goFile,callback:function(t){e.$set(e.ruleForm,"goFile","string"==typeof t?t.trim():t)},expression:"ruleForm.goFile"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              Same Go file path as the code generated"),o("br"),e._v("\n              by the AI assistant."),o("br"),e._v("\n              Windows example: D:\\project\\dir\\internal\\service\\file.go"),o("br"),e._v("\n              Linux example: /project/dir/internal/service/file.go"),o("br")])])],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"Clear AI Code"}},[o("el-switch",{model:{value:e.ruleForm.isClean,callback:function(t){e.$set(e.ruleForm,"isClean",t)},expression:"ruleForm.isClean"}}),e._v(" "),o("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"10px"},attrs:{effect:"light",placement:"top"}},[o("i",{staticClass:"el-icon-question"}),e._v(" "),o("div",{staticClass:"tooltip-content",attrs:{slot:"content"},slot:"content"},[e._v("\n              After merging the code, clear the code"),o("br"),e._v("\n              generated by the AI assistant.\n            ")])])],1)],1),e._v(" "),o("div",{staticStyle:{margin:"30px auto"}}),e._v(" "),o("div",{staticClass:"conform-btns"},[o("el-button",{attrs:{size:"default"},on:{click:e.clearFormData}},[e._v("Reset")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"default",disabled:e.isShowingInfo,loading:e.isShowingInfo},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Merge Code")]),e._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowResultBtn,expression:"isShowResultBtn"}],attrs:{size:"default"},on:{click:e.showResult}},[e._v("View Result")])],1)],1),e._v(" "),o("el-dialog",{attrs:{top:"5vh",title:"Results of execution",visible:e.showResultDialogVisible,width:"66%",center:""},on:{"update:visible":function(t){e.showResultDialogVisible=t}}},[o("el-input",{attrs:{type:"textarea",rows:20,autosize:"",readonly:""},model:{value:e.responseContent,callback:function(t){e.responseContent=t},expression:"responseContent"}})],1)],1)],1)},staticRenderFns:[]};var oo=o("VU/8")(eo,to,!1,function(e){o("gxVv")},"data-v-a31c68ae",null).exports;r.default.use(a.a);var ro=new a.a({mode:"history",routes:[{path:"*",redirect:"/ui"},{path:"/ui",component:d},{path:"/ui/web-http",component:w},{path:"/ui/web-handler",component:S},{path:"/ui/web-cache",component:N},{path:"/ui/web-dao",component:T},{path:"/ui/web-model",component:$},{path:"/ui/micro-rpc",component:I},{path:"/ui/micro-rpc-conn",component:L},{path:"/ui/micro-rpc-pb",component:ee},{path:"/ui/micro-grpc-http",component:re},{path:"/ui/micro-grpc-http-pb",component:se},{path:"/ui/micro-rpc-gw-pb",component:ce},{path:"/ui/micro-service",component:U},{path:"/ui/micro-service-handler",component:V},{path:"/ui/micro-protobuf",component:K},{path:"/ui/web-http-pb",component:X},{path:"/ui/yaml-config",component:ue},{path:"/ui/performance-test",component:we},{path:"/ui/custom-tpl-field",component:Se},{path:"/ui/custom-tpl-sql",component:Ne},{path:"/ui/custom-tpl-protobuf",component:Te},{path:"/ui/assistant-generate",component:$e},{path:"/ui/assistant-merge",component:Ie},{path:"/ui/download",component:v},{path:"/en/ui",component:Le},{path:"/en/ui/web-http",component:Oe},{path:"/en/ui/web-handler",component:Je},{path:"/en/ui/web-cache",component:Ye},{path:"/en/ui/web-dao",component:ot},{path:"/en/ui/web-model",component:it},{path:"/en/ui/micro-rpc",component:nt},{path:"/en/ui/micro-rpc-conn",component:mt},{path:"/en/ui/micro-rpc-pb",component:xt},{path:"/en/ui/micro-grpc-http",component:Rt},{path:"/en/ui/micro-grpc-http-pb",component:zt},{path:"/en/ui/micro-rpc-gw-pb",component:Pt},{path:"/en/ui/micro-service",component:vt},{path:"/en/ui/micro-service-handler",component:bt},{path:"/en/ui/micro-protobuf",component:Ft},{path:"/en/ui/web-http-pb",component:Ct},{path:"/en/ui/yaml-config",component:Wt},{path:"/en/ui/performance-test",component:Et},{path:"/en/ui/custom-tpl-field",component:Gt},{path:"/en/ui/custom-tpl-sql",component:Ot},{path:"/en/ui/custom-tpl-protobuf",component:Jt},{path:"/en/ui/assistant-generate",component:Yt},{path:"/en/ui/assistant-merge",component:oo},{path:"/en/ui/download",component:Ue}]}),lo=(o("tvR6"),o("zL8q")),io=o.n(lo),so=o("Dd8w"),ao=o.n(so),no=o("TXmL"),co=o("wUZ8"),mo=o.n(co),uo=o("Vi3T"),po=o.n(uo);r.default.use(no.a);var vo={en:ao()({},mo.a,{navMenu:{webType:"Web",webHttp:"Create Web Server",microRpc:"Create gRPC Server",microType:"Microservice",webHttpPb:"Create Web Server",microRpcGwPb:"Create gRPC Gateway Server",microrpcPb:"Create gRPC Server",microGRPCHTTP:"Create gRPC+HTTP Servers",microGRPCHTTPPb:"Create gRPC+HTTP Servers",microServiceHandler:"Generate Service+Handler CRUD Code",microService:"Generate Service CRUD Code",wehHandler:"Generate Handler CRUD Code",webDao:"Generate DAO CRUD Code",webModel:"Generate Model Code",microProtobuf:"Generate Protobuf CRUD Code",yamlConfig:"Generate Configuration Code",performanceTest:"Generate Performance Test Report",microRpcConn:"Generate gRPC Connection Code",webCache:"Generate Cache Code",customType:"Generate Custom Code",customTplField:"JSON",customTplSql:"SQL",customTplProtobuf:"Protobuf",assistant:"AI Assistant Generate Code",assistantGenerate:"Generate Go Code",assistantMerge:"Merge Go Code"},footer:{text1:"If it helps you, give it a ",text2:"",text3:""}}),cn:ao()({},po.a,{navMenu:{webType:"Web",webHttp:"åˆ›å»º web æœåŠ¡",wehHandler:"ç”Ÿæˆ handler CRUD ä»£ç ",microType:"å¾®æœåŠ¡",microRpc:"åˆ›å»º gRPC æœåŠ¡",microService:"ç”Ÿæˆ service CRUD ä»£ç ",webHttpPb:"åˆ›å»º web æœåŠ¡",microRpcGwPb:"åˆ›å»º gRPC ç½‘å…³æœåŠ¡",microrpcPb:"åˆ›å»º gRPC æœåŠ¡",microGRPCHTTP:"åˆ›å»º gRPC+HTTP æœåŠ¡",microGRPCHTTPPb:"åˆ›å»º gRPC+HTTP æœåŠ¡",microServiceHandler:"ç”Ÿæˆ service+handler CRUD ä»£ç ",webDao:"ç”Ÿæˆ DAO CRUD ä»£ç ",webModel:"ç”Ÿæˆ model ä»£ç ",microProtobuf:"ç”Ÿæˆ protobuf CRUD ä»£ç ",yamlConfig:"ç”Ÿæˆ configuration ä»£ç ",performanceTest:"ç”Ÿæˆæ€§èƒ½æµ‹è¯•æŠ¥å‘Š",microRpcConn:"ç”Ÿæˆ gRPC æœåŠ¡è¿æ¥ä»£ç ",webCache:"ç”Ÿæˆ cache ä»£ç ",customType:"ç”Ÿæˆè‡ªå®šä¹‰ä»£ç ",customTplField:"JSON",customTplSql:"SQL",customTplProtobuf:"Protobuf",assistant:"AI åŠ©æ‰‹ç”Ÿæˆä»£ç ",assistantGenerate:"ç”Ÿæˆ Go ä»£ç ",assistantMerge:"åˆå¹¶ Go ä»£ç "},footer:{text1:"å¦‚æœå¯¹æ‚¨æœ‰å¸®åŠ©ç»™ä¸ª",text2:" ï¼Œæ¬¢è¿åŠ å…¥",text3:"go spongeå¾®ä¿¡äº¤æµç¾¤ã€‚"}})},ho=new no.a({locale:"cn",messages:vo});r.default.use(io.a,{i18n:function(e,t){return ho.t(e,t)}}),r.default.config.productionTip=!1,new r.default({el:"#app",i18n:ho,router:ro,components:{App:s},template:"<App/>"})},Na0A:function(e,t){},"PLa/":function(e,t){},Pigd:function(e,t){},PkeA:function(e,t){},QRxO:function(e,t){},SOJA:function(e,t,o){e.exports=o.p+"static/img/template-framework.e7e3cc8.png"},"SX+c":function(e,t){},VNrH:function(e,t){},VjOo:function(e,t){},WMDj:function(e,t){},X4KW:function(e,t,o){e.exports=o.p+"static/img/sponge-framework.46868cb.png"},XOSJ:function(e,t){},XkHf:function(e,t,o){e.exports=o.p+"static/img/ai-assistant-framework.762e956.png"},ZmZt:function(e,t){},bAPV:function(e,t){},cuTw:function(e,t){},dqU9:function(e,t){},dvqj:function(e,t){},ebUW:function(e,t,o){e.exports=o.p+"static/img/wechat.4ce8c69.jpg"},fFLM:function(e,t){},g8oR:function(e,t){},gxVv:function(e,t){},hIB5:function(e,t,o){e.exports=o.p+"static/img/go-sponge-logo.6d5d978.png"},hveK:function(e,t){},iV68:function(e,t){},iai1:function(e,t){},jWvp:function(e,t){},"kD/A":function(e,t){},kGCC:function(e,t){},lZNn:function(e,t){},m8iD:function(e,t){},pRqx:function(e,t){},pqT2:function(e,t){},qk92:function(e,t){},rMfZ:function(e,t){},s0Bq:function(e,t){},t84Y:function(e,t){},tN7h:function(e,t){},tvR6:function(e,t){},wYtl:function(e,t){},wvnU:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.7d14490af8ba07678235.js.map